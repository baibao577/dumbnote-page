<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="./favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dumbnote Mindmap - Offline-First Visual Mind Mapping</title>

    <!-- Primary Meta Tags -->
    <meta
      name="title"
      content="Dumbnote Mindmap - Offline-First Visual Mind Mapping"
    />
    <meta
      name="description"
      content="Tame scattered thoughts. Capture ideas visually. Work offline and export to Markdown. No cloud, no login - just open and start mapping."
    />
    <meta
      name="keywords"
      content="mindmap, mind mapping, offline, markdown export, visual thinking, knowledge management, note taking, brainstorming"
    />
    <meta name="author" content="Dumbnote" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://dumbnote.app/mindmap" />
    <meta
      property="og:title"
      content="Dumbnote Mindmap - Offline-First Visual Mind Mapping"
    />
    <meta
      property="og:description"
      content="Tame scattered thoughts. Capture ideas visually. Work offline and export to Markdown. No cloud, no login - just open and start mapping."
    />
    <meta property="og:image" content="./favicon.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://dumbnote.app/mindmap" />
    <meta
      property="twitter:title"
      content="Dumbnote Mindmap - Offline-First Visual Mind Mapping"
    />
    <meta
      property="twitter:description"
      content="Tame scattered thoughts. Capture ideas visually. Work offline and export to Markdown. No cloud, no login - just open and start mapping."
    />
    <meta property="twitter:image" content="/favicon.png" />

    <!-- Additional SEO -->
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <link rel="canonical" href="https://dumbnote.app/mindmap" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Bu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ve={},Si=[],Sn=()=>{},Yb=()=>!1,ia=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Fu=t=>t.startsWith("onUpdate:"),mt=Object.assign,Hu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Xb=Object.prototype.hasOwnProperty,Le=(t,e)=>Xb.call(t,e),Ce=Array.isArray,Ci=t=>sa(t)==="[object Map]",Zp=t=>sa(t)==="[object Set]",Ae=t=>typeof t=="function",et=t=>typeof t=="string",Zn=t=>typeof t=="symbol",qe=t=>t!==null&&typeof t=="object",em=t=>(qe(t)||Ae(t))&&Ae(t.then)&&Ae(t.catch),tm=Object.prototype.toString,sa=t=>tm.call(t),Qb=t=>sa(t).slice(8,-1),nm=t=>sa(t)==="[object Object]",Vu=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,cs=Bu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Zb=/-(\w)/g,Cr=oa(t=>t.replace(Zb,(e,n)=>n?n.toUpperCase():"")),ex=/\B([A-Z])/g,Nr=oa(t=>t.replace(ex,"-$1").toLowerCase()),rm=oa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ba=oa(t=>t?`on${rm(t)}`:""),br=(t,e)=>!Object.is(t,e),Po=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$c=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Pc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},tx=t=>{const e=et(t)?Number(t):NaN;return isNaN(e)?t:e};let cd;const la=()=>cd||(cd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ei(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=et(r)?sx(r):ei(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(et(t)||qe(t))return t}const nx=/;(?![^(]*\))/g,rx=/:([^]+)/,ix=/\/\*[^]*?\*\//g;function sx(t){const e={};return t.replace(ix,"").split(nx).forEach(n=>{if(n){const r=n.split(rx);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ct(t){let e="";if(et(t))e=t;else if(Ce(t))for(let n=0;n<t.length;n++){const r=Ct(t[n]);r&&(e+=r+" ")}else if(qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ox="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lx=Bu(ox);function im(t){return!!t||t===""}const sm=t=>!!(t&&t.__v_isRef===!0),Wt=t=>et(t)?t:t==null?"":Ce(t)||qe(t)&&(t.toString===tm||!Ae(t.toString))?sm(t)?Wt(t.value):JSON.stringify(t,om,2):String(t),om=(t,e)=>sm(e)?om(t,e.value):Ci(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Fa(r,s)+" =>"]=i,n),{})}:Zp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Fa(n))}:Zn(e)?Fa(e):qe(e)&&!Ce(e)&&!nm(e)?String(e):e,Fa=(t,e="")=>{var n;return Zn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jt;class ax{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jt;try{return jt=this,e()}finally{jt=n}}}on(){++this._on===1&&(this.prevScope=jt,jt=this)}off(){this._on>0&&--this._on===0&&(jt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function cx(){return jt}let We;const Ha=new WeakSet;class lm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jt&&jt.active&&jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ha.has(this)&&(Ha.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ud(this),um(this);const e=We,n=fn;We=this,fn=!0;try{return this.fn()}finally{fm(this),We=e,fn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Uu(e);this.deps=this.depsTail=void 0,ud(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ha.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lc(this)&&this.run()}get dirty(){return Lc(this)}}let am=0,us,fs;function cm(t,e=!1){if(t.flags|=8,e){t.next=fs,fs=t;return}t.next=us,us=t}function ju(){am++}function Wu(){if(--am>0)return;if(fs){let e=fs;for(fs=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;us;){let e=us;for(us=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function um(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function fm(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Uu(r),ux(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Lc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(dm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function dm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ms)||(t.globalVersion=Ms,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Lc(t))))return;t.flags|=2;const e=t.dep,n=We,r=fn;We=t,fn=!0;try{um(t);const i=t.fn(t._value);(e.version===0||br(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{We=n,fn=r,fm(t),t.flags&=-3}}function Uu(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Uu(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function ux(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let fn=!0;const hm=[];function Yn(){hm.push(fn),fn=!1}function Xn(){const t=hm.pop();fn=t===void 0?!0:t}function ud(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let Ms=0,fx=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class aa{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!fn||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new fx(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,pm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,Ms++,this.notify(e)}notify(e){ju();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Wu()}}}function pm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)pm(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const zc=new WeakMap,Kr=Symbol(""),Bc=Symbol(""),As=Symbol("");function Tt(t,e,n){if(fn&&We){let r=zc.get(t);r||zc.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new aa),i.map=r,i.key=n),i.track()}}function Vn(t,e,n,r,i,s){const o=zc.get(t);if(!o){Ms++;return}const l=a=>{a&&a.trigger()};if(ju(),e==="clear")o.forEach(l);else{const a=Ce(t),c=a&&Vu(n);if(a&&n==="length"){const u=Number(r);o.forEach((f,d)=>{(d==="length"||d===As||!Zn(d)&&d>=u)&&l(f)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(As)),e){case"add":a?c&&l(o.get("length")):(l(o.get(Kr)),Ci(t)&&l(o.get(Bc)));break;case"delete":a||(l(o.get(Kr)),Ci(t)&&l(o.get(Bc)));break;case"set":Ci(t)&&l(o.get(Kr));break}}Wu()}function di(t){const e=Pe(t);return e===t?e:(Tt(e,"iterate",As),on(t)?e:e.map(xt))}function ca(t){return Tt(t=Pe(t),"iterate",As),t}const dx={__proto__:null,[Symbol.iterator](){return Va(this,Symbol.iterator,xt)},concat(...t){return di(this).concat(...t.map(e=>Ce(e)?di(e):e))},entries(){return Va(this,"entries",t=>(t[1]=xt(t[1]),t))},every(t,e){return On(this,"every",t,e,void 0,arguments)},filter(t,e){return On(this,"filter",t,e,n=>n.map(xt),arguments)},find(t,e){return On(this,"find",t,e,xt,arguments)},findIndex(t,e){return On(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return On(this,"findLast",t,e,xt,arguments)},findLastIndex(t,e){return On(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return On(this,"forEach",t,e,void 0,arguments)},includes(...t){return ja(this,"includes",t)},indexOf(...t){return ja(this,"indexOf",t)},join(t){return di(this).join(t)},lastIndexOf(...t){return ja(this,"lastIndexOf",t)},map(t,e){return On(this,"map",t,e,void 0,arguments)},pop(){return Ki(this,"pop")},push(...t){return Ki(this,"push",t)},reduce(t,...e){return fd(this,"reduce",t,e)},reduceRight(t,...e){return fd(this,"reduceRight",t,e)},shift(){return Ki(this,"shift")},some(t,e){return On(this,"some",t,e,void 0,arguments)},splice(...t){return Ki(this,"splice",t)},toReversed(){return di(this).toReversed()},toSorted(t){return di(this).toSorted(t)},toSpliced(...t){return di(this).toSpliced(...t)},unshift(...t){return Ki(this,"unshift",t)},values(){return Va(this,"values",xt)}};function Va(t,e,n){const r=ca(t),i=r[e]();return r!==t&&!on(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const hx=Array.prototype;function On(t,e,n,r,i,s){const o=ca(t),l=o!==t&&!on(t),a=o[e];if(a!==hx[e]){const f=a.apply(t,s);return l?xt(f):f}let c=n;o!==t&&(l?c=function(f,d){return n.call(this,xt(f),d,t)}:n.length>2&&(c=function(f,d){return n.call(this,f,d,t)}));const u=a.call(o,c,r);return l&&i?i(u):u}function fd(t,e,n,r){const i=ca(t);let s=n;return i!==t&&(on(t)?n.length>3&&(s=function(o,l,a){return n.call(this,o,l,a,t)}):s=function(o,l,a){return n.call(this,o,xt(l),a,t)}),i[e](s,...r)}function ja(t,e,n){const r=Pe(t);Tt(r,"iterate",As);const i=r[e](...n);return(i===-1||i===!1)&&Gu(n[0])?(n[0]=Pe(n[0]),r[e](...n)):i}function Ki(t,e,n=[]){Yn(),ju();const r=Pe(t)[e].apply(t,n);return Wu(),Xn(),r}const px=Bu("__proto__,__v_isRef,__isVue"),mm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zn));function mx(t){Zn(t)||(t=String(t));const e=Pe(this);return Tt(e,"has",t),e.hasOwnProperty(t)}class gm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Tx:vm:s?xm:bm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ce(e);if(!i){let a;if(o&&(a=dx[n]))return a;if(n==="hasOwnProperty")return mx}const l=Reflect.get(e,n,Nt(e)?e:r);return(Zn(n)?mm.has(n):px(n))||(i||Tt(e,"get",n),s)?l:Nt(l)?o&&Vu(n)?l:l.value:qe(l)?i?km(l):qu(l):l}}class ym extends gm{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const a=Tr(s);if(!on(r)&&!Tr(r)&&(s=Pe(s),r=Pe(r)),!Ce(e)&&Nt(s)&&!Nt(r))return a?!1:(s.value=r,!0)}const o=Ce(e)&&Vu(n)?Number(n)<e.length:Le(e,n),l=Reflect.set(e,n,r,Nt(e)?e:i);return e===Pe(i)&&(o?br(r,s)&&Vn(e,"set",n,r):Vn(e,"add",n,r)),l}deleteProperty(e,n){const r=Le(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Vn(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Zn(n)||!mm.has(n))&&Tt(e,"has",n),r}ownKeys(e){return Tt(e,"iterate",Ce(e)?"length":Kr),Reflect.ownKeys(e)}}class gx extends gm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const yx=new ym,bx=new gx,xx=new ym(!0);const Fc=t=>t,fo=t=>Reflect.getPrototypeOf(t);function vx(t,e,n){return function(...r){const i=this.__v_raw,s=Pe(i),o=Ci(s),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,c=i[t](...r),u=n?Fc:e?Zo:xt;return!e&&Tt(s,"iterate",a?Bc:Kr),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:l?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function ho(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function kx(t,e){const n={get(i){const s=this.__v_raw,o=Pe(s),l=Pe(i);t||(br(i,l)&&Tt(o,"get",i),Tt(o,"get",l));const{has:a}=fo(o),c=e?Fc:t?Zo:xt;if(a.call(o,i))return c(s.get(i));if(a.call(o,l))return c(s.get(l));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Tt(Pe(i),"iterate",Kr),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Pe(s),l=Pe(i);return t||(br(i,l)&&Tt(o,"has",i),Tt(o,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const o=this,l=o.__v_raw,a=Pe(l),c=e?Fc:t?Zo:xt;return!t&&Tt(a,"iterate",Kr),l.forEach((u,f)=>i.call(s,c(u),c(f),o))}};return mt(n,t?{add:ho("add"),set:ho("set"),delete:ho("delete"),clear:ho("clear")}:{add(i){!e&&!on(i)&&!Tr(i)&&(i=Pe(i));const s=Pe(this);return fo(s).has.call(s,i)||(s.add(i),Vn(s,"add",i,i)),this},set(i,s){!e&&!on(s)&&!Tr(s)&&(s=Pe(s));const o=Pe(this),{has:l,get:a}=fo(o);let c=l.call(o,i);c||(i=Pe(i),c=l.call(o,i));const u=a.call(o,i);return o.set(i,s),c?br(s,u)&&Vn(o,"set",i,s):Vn(o,"add",i,s),this},delete(i){const s=Pe(this),{has:o,get:l}=fo(s);let a=o.call(s,i);a||(i=Pe(i),a=o.call(s,i)),l&&l.call(s,i);const c=s.delete(i);return a&&Vn(s,"delete",i,void 0),c},clear(){const i=Pe(this),s=i.size!==0,o=i.clear();return s&&Vn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=vx(i,t,e)}),n}function Ku(t,e){const n=kx(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Le(n,i)&&i in r?n:r,i,s)}const wx={get:Ku(!1,!1)},Sx={get:Ku(!1,!0)},Cx={get:Ku(!0,!1)};const bm=new WeakMap,xm=new WeakMap,vm=new WeakMap,Tx=new WeakMap;function Ex(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mx(t){return t.__v_skip||!Object.isExtensible(t)?0:Ex(Qb(t))}function qu(t){return Tr(t)?t:Ju(t,!1,yx,wx,bm)}function Ax(t){return Ju(t,!1,xx,Sx,xm)}function km(t){return Ju(t,!0,bx,Cx,vm)}function Ju(t,e,n,r,i){if(!qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Mx(t);if(s===0)return t;const o=i.get(t);if(o)return o;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function Ti(t){return Tr(t)?Ti(t.__v_raw):!!(t&&t.__v_isReactive)}function Tr(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function Gu(t){return t?!!t.__v_raw:!1}function Pe(t){const e=t&&t.__v_raw;return e?Pe(e):t}function wm(t){return!Le(t,"__v_skip")&&Object.isExtensible(t)&&$c(t,"__v_skip",!0),t}const xt=t=>qe(t)?qu(t):t,Zo=t=>qe(t)?km(t):t;function Nt(t){return t?t.__v_isRef===!0:!1}function we(t){return Sm(t,!1)}function Nx(t){return Sm(t,!0)}function Sm(t,e){return Nt(t)?t:new _x(t,e)}class _x{constructor(e,n){this.dep=new aa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Pe(e),this._value=n?e:xt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||on(e)||Tr(e);e=r?e:Pe(e),br(e,n)&&(this._rawValue=e,this._value=r?e:xt(e),this.dep.trigger())}}function me(t){return Nt(t)?t.value:t}const Ox={get:(t,e,n)=>e==="__v_raw"?t:me(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Nt(i)&&!Nt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Cm(t){return Ti(t)?t:new Proxy(t,Ox)}class Rx{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new aa,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Dx(t){return new Rx(t)}class Ix{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new aa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ms-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return cm(this,!0),!0}get value(){const e=this.dep.track();return dm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function $x(t,e,n=!1){let r,i;return Ae(t)?r=t:(r=t.get,i=t.set),new Ix(r,i,n)}const po={},el=new WeakMap;let zr;function Px(t,e=!1,n=zr){if(n){let r=el.get(n);r||el.set(n,r=[]),r.push(t)}}function Lx(t,e,n=Ve){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:l,call:a}=n,c=v=>i?v:on(v)||i===!1||i===0?jn(v,1):jn(v);let u,f,d,h,p=!1,m=!1;if(Nt(t)?(f=()=>t.value,p=on(t)):Ti(t)?(f=()=>c(t),p=!0):Ce(t)?(m=!0,p=t.some(v=>Ti(v)||on(v)),f=()=>t.map(v=>{if(Nt(v))return v.value;if(Ti(v))return c(v);if(Ae(v))return a?a(v,2):v()})):Ae(t)?e?f=a?()=>a(t,2):t:f=()=>{if(d){Yn();try{d()}finally{Xn()}}const v=zr;zr=u;try{return a?a(t,3,[h]):t(h)}finally{zr=v}}:f=Sn,e&&i){const v=f,E=i===!0?1/0:i;f=()=>jn(v(),E)}const g=cx(),y=()=>{u.stop(),g&&g.active&&Hu(g.effects,u)};if(s&&e){const v=e;e=(...E)=>{v(...E),y()}}let w=m?new Array(t.length).fill(po):po;const N=v=>{if(!(!(u.flags&1)||!u.dirty&&!v))if(e){const E=u.run();if(i||p||(m?E.some((B,$)=>br(B,w[$])):br(E,w))){d&&d();const B=zr;zr=u;try{const $=[E,w===po?void 0:m&&w[0]===po?[]:w,h];w=E,a?a(e,3,$):e(...$)}finally{zr=B}}}else u.run()};return l&&l(N),u=new lm(f),u.scheduler=o?()=>o(N,!1):N,h=v=>Px(v,!1,u),d=u.onStop=()=>{const v=el.get(u);if(v){if(a)a(v,4);else for(const E of v)E();el.delete(u)}},e?r?N(!0):w=u.run():o?o(N.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function jn(t,e=1/0,n){if(e<=0||!qe(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Nt(t))jn(t.value,e,n);else if(Ce(t))for(let r=0;r<t.length;r++)jn(t[r],e,n);else if(Zp(t)||Ci(t))t.forEach(r=>{jn(r,e,n)});else if(nm(t)){for(const r in t)jn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&jn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zs(t,e,n,r){try{return r?t(...r):t()}catch(i){ua(i,e,n)}}function dn(t,e,n,r){if(Ae(t)){const i=Zs(t,e,n,r);return i&&em(i)&&i.catch(s=>{ua(s,e,n)}),i}if(Ce(t)){const i=[];for(let s=0;s<t.length;s++)i.push(dn(t[s],e,n,r));return i}}function ua(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ve;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,c)===!1)return}l=l.parent}if(s){Yn(),Zs(s,null,10,[t,a,c]),Xn();return}}zx(t,n,i,r,o)}function zx(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Pt=[];let bn=-1;const Ei=[];let or=null,gi=0;const Tm=Promise.resolve();let tl=null;function qr(t){const e=tl||Tm;return t?e.then(this?t.bind(this):t):e}function Bx(t){let e=bn+1,n=Pt.length;for(;e<n;){const r=e+n>>>1,i=Pt[r],s=Ns(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Yu(t){if(!(t.flags&1)){const e=Ns(t),n=Pt[Pt.length-1];!n||!(t.flags&2)&&e>=Ns(n)?Pt.push(t):Pt.splice(Bx(e),0,t),t.flags|=1,Em()}}function Em(){tl||(tl=Tm.then(Am))}function Fx(t){Ce(t)?Ei.push(...t):or&&t.id===-1?or.splice(gi+1,0,t):t.flags&1||(Ei.push(t),t.flags|=1),Em()}function dd(t,e,n=bn+1){for(;n<Pt.length;n++){const r=Pt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Pt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Mm(t){if(Ei.length){const e=[...new Set(Ei)].sort((n,r)=>Ns(n)-Ns(r));if(Ei.length=0,or){or.push(...e);return}for(or=e,gi=0;gi<or.length;gi++){const n=or[gi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}or=null,gi=0}}const Ns=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Am(t){try{for(bn=0;bn<Pt.length;bn++){const e=Pt[bn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Zs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;bn<Pt.length;bn++){const e=Pt[bn];e&&(e.flags&=-2)}bn=-1,Pt.length=0,Mm(),tl=null,(Pt.length||Ei.length)&&Am()}}let wt=null,Nm=null;function nl(t){const e=wt;return wt=t,Nm=t&&t.type.__scopeId||null,e}function xe(t,e=wt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Td(-1);const s=nl(e);let o;try{o=t(...i)}finally{nl(s),r._d&&Td(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Hx(t,e){if(wt===null)return t;const n=ya(wt),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,l,a=Ve]=e[i];s&&(Ae(s)&&(s={mounted:s,updated:s}),s.deep&&jn(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function Rr(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let a=l.dir[r];a&&(Yn(),dn(a,n,8,[t.el,l,t,e]),Xn())}}const _m=Symbol("_vte"),Om=t=>t.__isTeleport,ds=t=>t&&(t.disabled||t.disabled===""),hd=t=>t&&(t.defer||t.defer===""),pd=t=>typeof SVGElement<"u"&&t instanceof SVGElement,md=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Hc=(t,e)=>{const n=t&&t.to;return et(n)?e?e(n):null:n},Rm={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,l,a,c){const{mc:u,pc:f,pbc:d,o:{insert:h,querySelector:p,createText:m,createComment:g}}=c,y=ds(e.props);let{shapeFlag:w,children:N,dynamicChildren:v}=e;if(t==null){const E=e.el=m(""),B=e.anchor=m("");h(E,n,r),h(B,n,r);const $=(_,j)=>{w&16&&(i&&i.isCE&&(i.ce._teleportTarget=_),u(N,_,j,i,s,o,l,a))},C=()=>{const _=e.target=Hc(e.props,p),j=Dm(_,e,m,h);_&&(o!=="svg"&&pd(_)?o="svg":o!=="mathml"&&md(_)&&(o="mathml"),y||($(_,j),Lo(e,!1)))};y&&($(n,B),Lo(e,!0)),hd(e.props)?(e.el.__isMounted=!1,$t(()=>{C(),delete e.el.__isMounted},s)):C()}else{if(hd(e.props)&&t.el.__isMounted===!1){$t(()=>{Rm.process(t,e,n,r,i,s,o,l,a,c)},s);return}e.el=t.el,e.targetStart=t.targetStart;const E=e.anchor=t.anchor,B=e.target=t.target,$=e.targetAnchor=t.targetAnchor,C=ds(t.props),_=C?n:B,j=C?E:$;if(o==="svg"||pd(B)?o="svg":(o==="mathml"||md(B))&&(o="mathml"),v?(d(t.dynamicChildren,v,_,i,s,o,l),Zu(t,e,!0)):a||f(t,e,_,j,i,s,o,l,!1),y)C?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):mo(e,n,E,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Y=e.target=Hc(e.props,p);Y&&mo(e,Y,null,c,0)}else C&&mo(e,B,$,c,1);Lo(e,y)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:l,anchor:a,targetStart:c,targetAnchor:u,target:f,props:d}=t;if(f&&(i(c),i(u)),s&&i(a),o&16){const h=s||!ds(d);for(let p=0;p<l.length;p++){const m=l[p];r(m,e,n,h,!!m.dynamicChildren)}}},move:mo,hydrate:Vx};function mo(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:l,shapeFlag:a,children:c,props:u}=t,f=s===2;if(f&&r(o,e,n),(!f||ds(u))&&a&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);f&&r(l,e,n)}function Vx(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:c,createText:u}},f){const d=e.target=Hc(e.props,a);if(d){const h=ds(e.props),p=d._lpa||d.firstChild;if(e.shapeFlag&16)if(h)e.anchor=f(o(t),e,l(t),n,r,i,s),e.targetStart=p,e.targetAnchor=p&&o(p);else{e.anchor=o(t);let m=p;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||Dm(d,e,u,c),f(p&&o(p),e,d,n,r,i,s)}Lo(e,h)}return e.anchor&&o(e.anchor)}const jx=Rm;function Lo(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Dm(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[_m]=s,t&&(r(i,t),r(s,t)),s}const lr=Symbol("_leaveCb"),go=Symbol("_enterCb");function Wx(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ai(()=>{t.isMounted=!0}),eo(()=>{t.isUnmounting=!0}),t}const Zt=[Function,Array],Im={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zt,onEnter:Zt,onAfterEnter:Zt,onEnterCancelled:Zt,onBeforeLeave:Zt,onLeave:Zt,onAfterLeave:Zt,onLeaveCancelled:Zt,onBeforeAppear:Zt,onAppear:Zt,onAfterAppear:Zt,onAppearCancelled:Zt},$m=t=>{const e=t.subTree;return e.component?$m(e.component):e},Ux={name:"BaseTransition",props:Im,setup(t,{slots:e}){const n=sg(),r=Wx();return()=>{const i=e.default&&zm(e.default(),!0);if(!i||!i.length)return;const s=Pm(i),o=Pe(t),{mode:l}=o;if(r.isLeaving)return Wa(s);const a=gd(s);if(!a)return Wa(s);let c=Vc(a,o,r,n,f=>c=f);a.type!==Et&&_s(a,c);let u=n.subTree&&gd(n.subTree);if(u&&u.type!==Et&&!Br(a,u)&&$m(n).type!==Et){let f=Vc(u,o,r,n);if(_s(u,f),l==="out-in"&&a.type!==Et)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},Wa(s);l==="in-out"&&a.type!==Et?f.delayLeave=(d,h,p)=>{const m=Lm(r,u);m[String(u.key)]=u,d[lr]=()=>{h(),d[lr]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function Pm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Et){e=n;break}}return e}const Kx=Ux;function Lm(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Vc(t,e,n,r,i){const{appear:s,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:y,onAfterAppear:w,onAppearCancelled:N}=e,v=String(t.key),E=Lm(n,t),B=(_,j)=>{_&&dn(_,r,9,j)},$=(_,j)=>{const Y=j[1];B(_,j),Ce(_)?_.every(U=>U.length<=1)&&Y():_.length<=1&&Y()},C={mode:o,persisted:l,beforeEnter(_){let j=a;if(!n.isMounted)if(s)j=g||a;else return;_[lr]&&_[lr](!0);const Y=E[v];Y&&Br(t,Y)&&Y.el[lr]&&Y.el[lr](),B(j,[_])},enter(_){let j=c,Y=u,U=f;if(!n.isMounted)if(s)j=y||c,Y=w||u,U=N||f;else return;let ae=!1;const k=_[go]=L=>{ae||(ae=!0,L?B(U,[_]):B(Y,[_]),C.delayedLeave&&C.delayedLeave(),_[go]=void 0)};j?$(j,[_,k]):k()},leave(_,j){const Y=String(t.key);if(_[go]&&_[go](!0),n.isUnmounting)return j();B(d,[_]);let U=!1;const ae=_[lr]=k=>{U||(U=!0,j(),k?B(m,[_]):B(p,[_]),_[lr]=void 0,E[Y]===t&&delete E[Y])};E[Y]=t,h?$(h,[_,ae]):ae()},clone(_){const j=Vc(_,e,n,r,i);return i&&i(j),j}};return C}function Wa(t){if(fa(t))return t=Er(t),t.children=null,t}function gd(t){if(!fa(t))return Om(t.type)&&t.children?Pm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ae(n.default))return n.default()}}function _s(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_s(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function zm(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ft?(o.patchFlag&128&&i++,r=r.concat(zm(o.children,e,l))):(e||o.type!==Et)&&r.push(l!=null?Er(o,{key:l}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function qx(t,e){return Ae(t)?mt({name:t.name},e,{setup:t}):t}function Bm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function hs(t,e,n,r,i=!1){if(Ce(t)){t.forEach((p,m)=>hs(p,e&&(Ce(e)?e[m]:e),n,r,i));return}if(Mi(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&hs(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?ya(r.component):r.el,o=i?null:s,{i:l,r:a}=t,c=e&&e.r,u=l.refs===Ve?l.refs={}:l.refs,f=l.setupState,d=Pe(f),h=f===Ve?()=>!1:p=>Le(d,p);if(c!=null&&c!==a&&(et(c)?(u[c]=null,h(c)&&(f[c]=null)):Nt(c)&&(c.value=null)),Ae(a))Zs(a,l,12,[o,u]);else{const p=et(a),m=Nt(a);if(p||m){const g=()=>{if(t.f){const y=p?h(a)?f[a]:u[a]:a.value;i?Ce(y)&&Hu(y,s):Ce(y)?y.includes(s)||y.push(s):p?(u[a]=[s],h(a)&&(f[a]=u[a])):(a.value=[s],t.k&&(u[t.k]=a.value))}else p?(u[a]=o,h(a)&&(f[a]=o)):m&&(a.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,$t(g,n)):g()}}}la().requestIdleCallback;la().cancelIdleCallback;const Mi=t=>!!t.type.__asyncLoader,fa=t=>t.type.__isKeepAlive;function Jx(t,e){Fm(t,"a",e)}function Gx(t,e){Fm(t,"da",e)}function Fm(t,e,n=Mt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(da(e,r,n),n){let i=n.parent;for(;i&&i.parent;)fa(i.parent.vnode)&&Yx(r,e,n,i),i=i.parent}}function Yx(t,e,n,r){const i=da(e,t,r,!0);ha(()=>{Hu(r[e],i)},n)}function da(t,e,n=Mt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Yn();const l=no(n),a=dn(e,n,t,o);return l(),Xn(),a});return r?i.unshift(s):i.push(s),s}}const er=t=>(e,n=Mt)=>{(!Ds||t==="sp")&&da(t,(...r)=>e(...r),n)},Xx=er("bm"),ai=er("m"),Qx=er("bu"),Zx=er("u"),eo=er("bum"),ha=er("um"),ev=er("sp"),tv=er("rtg"),nv=er("rtc");function rv(t,e=Mt){da("ec",t,e)}const iv=Symbol.for("v-ndc");function pa(t,e,n,r){let i;const s=n,o=Ce(t);if(o||et(t)){const l=o&&Ti(t);let a=!1,c=!1;l&&(a=!on(t),c=Tr(t),t=ca(t)),i=new Array(t.length);for(let u=0,f=t.length;u<f;u++)i[u]=e(a?c?Zo(xt(t[u])):xt(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,s)}else if(qe(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,s));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(t[u],u,a,s)}}else i=[];return i}function _t(t,e,n={},r,i){if(wt.ce||wt.parent&&Mi(wt.parent)&&wt.parent.ce)return ce(),Ue(ft,null,[ye("slot",n,r)],64);let s=t[e];s&&s._c&&(s._d=!1),ce();const o=s&&Hm(s(n)),l=n.key||o&&o.key,a=Ue(ft,{key:(l&&!Zn(l)?l:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Hm(t){return t.some(e=>Rs(e)?!(e.type===Et||e.type===ft&&!Hm(e.children)):!0)?t:null}const jc=t=>t?og(t)?ya(t):jc(t.parent):null,ps=mt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jc(t.parent),$root:t=>jc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>jm(t),$forceUpdate:t=>t.f||(t.f=()=>{Yu(t.update)}),$nextTick:t=>t.n||(t.n=qr.bind(t.proxy)),$watch:t=>Mv.bind(t)}),Ua=(t,e)=>t!==Ve&&!t.__isScriptSetup&&Le(t,e),sv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Ua(r,e))return o[e]=1,r[e];if(i!==Ve&&Le(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Le(c,e))return o[e]=3,s[e];if(n!==Ve&&Le(n,e))return o[e]=4,n[e];Wc&&(o[e]=0)}}const u=ps[e];let f,d;if(u)return e==="$attrs"&&Tt(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==Ve&&Le(n,e))return o[e]=4,n[e];if(d=a.config.globalProperties,Le(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Ua(i,e)?(i[e]=n,!0):r!==Ve&&Le(r,e)?(r[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||t!==Ve&&Le(t,o)||Ua(e,o)||(l=s[0])&&Le(l,o)||Le(r,o)||Le(ps,o)||Le(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function yd(t){return Ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Wc=!0;function ov(t){const e=jm(t),n=t.proxy,r=t.ctx;Wc=!1,e.beforeCreate&&bd(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:w,destroyed:N,unmounted:v,render:E,renderTracked:B,renderTriggered:$,errorCaptured:C,serverPrefetch:_,expose:j,inheritAttrs:Y,components:U,directives:ae,filters:k}=e;if(c&&lv(c,r,null),o)for(const z in o){const I=o[z];Ae(I)&&(r[z]=I.bind(n))}if(i){const z=i.call(n,n);qe(z)&&(t.data=qu(z))}if(Wc=!0,s)for(const z in s){const I=s[z],de=Ae(I)?I.bind(n,n):Ae(I.get)?I.get.bind(n,n):Sn,ge=!Ae(I)&&Ae(I.set)?I.set.bind(n):Sn,Se=Tn({get:de,set:ge});Object.defineProperty(r,z,{enumerable:!0,configurable:!0,get:()=>Se.value,set:ke=>Se.value=ke})}if(l)for(const z in l)Vm(l[z],r,n,z);if(a){const z=Ae(a)?a.call(n):a;Reflect.ownKeys(z).forEach(I=>{hv(I,z[I])})}u&&bd(u,t,"c");function T(z,I){Ce(I)?I.forEach(de=>z(de.bind(n))):I&&z(I.bind(n))}if(T(Xx,f),T(ai,d),T(Qx,h),T(Zx,p),T(Jx,m),T(Gx,g),T(rv,C),T(nv,B),T(tv,$),T(eo,w),T(ha,v),T(ev,_),Ce(j))if(j.length){const z=t.exposed||(t.exposed={});j.forEach(I=>{Object.defineProperty(z,I,{get:()=>n[I],set:de=>n[I]=de})})}else t.exposed||(t.exposed={});E&&t.render===Sn&&(t.render=E),Y!=null&&(t.inheritAttrs=Y),U&&(t.components=U),ae&&(t.directives=ae),_&&Bm(t)}function lv(t,e,n=Sn){Ce(t)&&(t=Uc(t));for(const r in t){const i=t[r];let s;qe(i)?"default"in i?s=zo(i.from||r,i.default,!0):s=zo(i.from||r):s=zo(i),Nt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function bd(t,e,n){dn(Ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Vm(t,e,n,r){let i=r.includes(".")?eg(n,r):()=>n[r];if(et(t)){const s=e[t];Ae(s)&&Cn(i,s)}else if(Ae(t))Cn(i,t.bind(n));else if(qe(t))if(Ce(t))t.forEach(s=>Vm(s,e,n,r));else{const s=Ae(t.handler)?t.handler.bind(n):e[t.handler];Ae(s)&&Cn(i,s,t)}}function jm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,l=s.get(e);let a;return l?a=l:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>rl(a,c,o,!0)),rl(a,e,o)),qe(e)&&s.set(e,a),a}function rl(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&rl(t,s,n,!0),i&&i.forEach(o=>rl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=av[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const av={data:xd,props:vd,emits:vd,methods:ts,computed:ts,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:ts,directives:ts,watch:uv,provide:xd,inject:cv};function xd(t,e){return e?t?function(){return mt(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function cv(t,e){return ts(Uc(t),Uc(e))}function Uc(t){if(Ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function It(t,e){return t?[...new Set([].concat(t,e))]:e}function ts(t,e){return t?mt(Object.create(null),t,e):e}function vd(t,e){return t?Ce(t)&&Ce(e)?[...new Set([...t,...e])]:mt(Object.create(null),yd(t),yd(e??{})):e}function uv(t,e){if(!t)return e;if(!e)return t;const n=mt(Object.create(null),t);for(const r in e)n[r]=It(t[r],e[r]);return n}function Wm(){return{app:null,config:{isNativeTag:Yb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fv=0;function dv(t,e){return function(r,i=null){Ae(r)||(r=mt({},r)),i!=null&&!qe(i)&&(i=null);const s=Wm(),o=new WeakSet,l=[];let a=!1;const c=s.app={_uid:fv++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:qv,get config(){return s.config},set config(u){},use(u,...f){return o.has(u)||(u&&Ae(u.install)?(o.add(u),u.install(c,...f)):Ae(u)&&(o.add(u),u(c,...f))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,f){return f?(s.components[u]=f,c):s.components[u]},directive(u,f){return f?(s.directives[u]=f,c):s.directives[u]},mount(u,f,d){if(!a){const h=c._ceVNode||ye(r,i);return h.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),t(h,u,d),a=!0,c._container=u,u.__vue_app__=c,ya(h.component)}},onUnmount(u){l.push(u)},unmount(){a&&(dn(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return s.provides[u]=f,c},runWithContext(u){const f=Ai;Ai=c;try{return u()}finally{Ai=f}}};return c}}let Ai=null;function hv(t,e){if(Mt){let n=Mt.provides;const r=Mt.parent&&Mt.parent.provides;r===n&&(n=Mt.provides=Object.create(r)),n[t]=e}}function zo(t,e,n=!1){const r=Mt||wt;if(r||Ai){let i=Ai?Ai._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ae(e)?e.call(r&&r.proxy):e}}const Um={},Km=()=>Object.create(Um),qm=t=>Object.getPrototypeOf(t)===Um;function pv(t,e,n,r=!1){const i={},s=Km();t.propsDefaults=Object.create(null),Jm(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Ax(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function mv(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,l=Pe(i),[a]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(ma(t.emitsOptions,d))continue;const h=e[d];if(a)if(Le(s,d))h!==s[d]&&(s[d]=h,c=!0);else{const p=Cr(d);i[p]=Kc(a,l,p,h,t,!1)}else h!==s[d]&&(s[d]=h,c=!0)}}}else{Jm(t,e,i,s)&&(c=!0);let u;for(const f in l)(!e||!Le(e,f)&&((u=Nr(f))===f||!Le(e,u)))&&(a?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=Kc(a,l,f,void 0,t,!0)):delete i[f]);if(s!==l)for(const f in s)(!e||!Le(e,f))&&(delete s[f],c=!0)}c&&Vn(t.attrs,"set","")}function Jm(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(cs(a))continue;const c=e[a];let u;i&&Le(i,u=Cr(a))?!s||!s.includes(u)?n[u]=c:(l||(l={}))[u]=c:ma(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,o=!0)}if(s){const a=Pe(n),c=l||Ve;for(let u=0;u<s.length;u++){const f=s[u];n[f]=Kc(i,a,f,c[f],t,!Le(c,f))}}return o}function Kc(t,e,n,r,i,s){const o=t[n];if(o!=null){const l=Le(o,"default");if(l&&r===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(a)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=no(i);r=c[n]=a.call(null,e),u()}}else r=a;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===Nr(n))&&(r=!0))}return r}const gv=new WeakMap;function Gm(t,e,n=!1){const r=n?gv:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},l=[];let a=!1;if(!Ae(t)){const u=f=>{a=!0;const[d,h]=Gm(f,e,!0);mt(o,d),h&&l.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!a)return qe(t)&&r.set(t,Si),Si;if(Ce(s))for(let u=0;u<s.length;u++){const f=Cr(s[u]);kd(f)&&(o[f]=Ve)}else if(s)for(const u in s){const f=Cr(u);if(kd(f)){const d=s[u],h=o[f]=Ce(d)||Ae(d)?{type:d}:mt({},d),p=h.type;let m=!1,g=!0;if(Ce(p))for(let y=0;y<p.length;++y){const w=p[y],N=Ae(w)&&w.name;if(N==="Boolean"){m=!0;break}else N==="String"&&(g=!1)}else m=Ae(p)&&p.name==="Boolean";h[0]=m,h[1]=g,(m||Le(h,"default"))&&l.push(f)}}const c=[o,l];return qe(t)&&r.set(t,c),c}function kd(t){return t[0]!=="$"&&!cs(t)}const Xu=t=>t[0]==="_"||t==="$stable",Qu=t=>Ce(t)?t.map(wn):[wn(t)],yv=(t,e,n)=>{if(e._n)return e;const r=xe((...i)=>Qu(e(...i)),n);return r._c=!1,r},Ym=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Xu(i))continue;const s=t[i];if(Ae(s))e[i]=yv(i,s,r);else if(s!=null){const o=Qu(s);e[i]=()=>o}}},Xm=(t,e)=>{const n=Qu(e);t.slots.default=()=>n},Qm=(t,e,n)=>{for(const r in e)(n||!Xu(r))&&(t[r]=e[r])},bv=(t,e,n)=>{const r=t.slots=Km();if(t.vnode.shapeFlag&32){const i=e.__;i&&$c(r,"__",i,!0);const s=e._;s?(Qm(r,e,n),n&&$c(r,"_",s,!0)):Ym(e,r)}else e&&Xm(t,e)},xv=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Ve;if(r.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:Qm(i,e,n):(s=!e.$stable,Ym(e,i)),o=e}else e&&(Xm(t,e),o={default:1});if(s)for(const l in i)!Xu(l)&&o[l]==null&&delete i[l]},$t=Iv;function vv(t){return kv(t)}function kv(t,e){const n=la();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=Sn,insertStaticContent:p}=t,m=(b,x,A,H=null,F=null,V=null,Q=void 0,J=null,D=!!x.dynamicChildren)=>{if(b===x)return;b&&!Br(b,x)&&(H=X(b),ke(b,F,V,!0),b=null),x.patchFlag===-2&&(D=!1,x.dynamicChildren=null);const{type:P,ref:re,shapeFlag:Z}=x;switch(P){case ga:g(b,x,A,H);break;case Et:y(b,x,A,H);break;case Bo:b==null&&w(x,A,H,Q);break;case ft:U(b,x,A,H,F,V,Q,J,D);break;default:Z&1?E(b,x,A,H,F,V,Q,J,D):Z&6?ae(b,x,A,H,F,V,Q,J,D):(Z&64||Z&128)&&P.process(b,x,A,H,F,V,Q,J,D,he)}re!=null&&F?hs(re,b&&b.ref,V,x||b,!x):re==null&&b&&b.ref!=null&&hs(b.ref,null,V,b,!0)},g=(b,x,A,H)=>{if(b==null)r(x.el=l(x.children),A,H);else{const F=x.el=b.el;x.children!==b.children&&c(F,x.children)}},y=(b,x,A,H)=>{b==null?r(x.el=a(x.children||""),A,H):x.el=b.el},w=(b,x,A,H)=>{[b.el,b.anchor]=p(b.children,x,A,H,b.el,b.anchor)},N=({el:b,anchor:x},A,H)=>{let F;for(;b&&b!==x;)F=d(b),r(b,A,H),b=F;r(x,A,H)},v=({el:b,anchor:x})=>{let A;for(;b&&b!==x;)A=d(b),i(b),b=A;i(x)},E=(b,x,A,H,F,V,Q,J,D)=>{x.type==="svg"?Q="svg":x.type==="math"&&(Q="mathml"),b==null?B(x,A,H,F,V,Q,J,D):_(b,x,F,V,Q,J,D)},B=(b,x,A,H,F,V,Q,J)=>{let D,P;const{props:re,shapeFlag:Z,transition:le,dirs:pe}=b;if(D=b.el=o(b.type,V,re&&re.is,re),Z&8?u(D,b.children):Z&16&&C(b.children,D,null,H,F,Ka(b,V),Q,J),pe&&Rr(b,null,H,"created"),$(D,b,b.scopeId,Q,H),re){for(const S in re)S!=="value"&&!cs(S)&&s(D,S,null,re[S],V,H);"value"in re&&s(D,"value",null,re.value,V),(P=re.onVnodeBeforeMount)&&gn(P,H,b)}pe&&Rr(b,null,H,"beforeMount");const Te=wv(F,le);Te&&le.beforeEnter(D),r(D,x,A),((P=re&&re.onVnodeMounted)||Te||pe)&&$t(()=>{P&&gn(P,H,b),Te&&le.enter(D),pe&&Rr(b,null,H,"mounted")},F)},$=(b,x,A,H,F)=>{if(A&&h(b,A),H)for(let V=0;V<H.length;V++)h(b,H[V]);if(F){let V=F.subTree;if(x===V||ng(V.type)&&(V.ssContent===x||V.ssFallback===x)){const Q=F.vnode;$(b,Q,Q.scopeId,Q.slotScopeIds,F.parent)}}},C=(b,x,A,H,F,V,Q,J,D=0)=>{for(let P=D;P<b.length;P++){const re=b[P]=J?ar(b[P]):wn(b[P]);m(null,re,x,A,H,F,V,Q,J)}},_=(b,x,A,H,F,V,Q)=>{const J=x.el=b.el;let{patchFlag:D,dynamicChildren:P,dirs:re}=x;D|=b.patchFlag&16;const Z=b.props||Ve,le=x.props||Ve;let pe;if(A&&Dr(A,!1),(pe=le.onVnodeBeforeUpdate)&&gn(pe,A,x,b),re&&Rr(x,b,A,"beforeUpdate"),A&&Dr(A,!0),(Z.innerHTML&&le.innerHTML==null||Z.textContent&&le.textContent==null)&&u(J,""),P?j(b.dynamicChildren,P,J,A,H,Ka(x,F),V):Q||I(b,x,J,null,A,H,Ka(x,F),V,!1),D>0){if(D&16)Y(J,Z,le,A,F);else if(D&2&&Z.class!==le.class&&s(J,"class",null,le.class,F),D&4&&s(J,"style",Z.style,le.style,F),D&8){const Te=x.dynamicProps;for(let S=0;S<Te.length;S++){const O=Te[S],M=Z[O],K=le[O];(K!==M||O==="value")&&s(J,O,M,K,F,A)}}D&1&&b.children!==x.children&&u(J,x.children)}else!Q&&P==null&&Y(J,Z,le,A,F);((pe=le.onVnodeUpdated)||re)&&$t(()=>{pe&&gn(pe,A,x,b),re&&Rr(x,b,A,"updated")},H)},j=(b,x,A,H,F,V,Q)=>{for(let J=0;J<x.length;J++){const D=b[J],P=x[J],re=D.el&&(D.type===ft||!Br(D,P)||D.shapeFlag&198)?f(D.el):A;m(D,P,re,null,H,F,V,Q,!0)}},Y=(b,x,A,H,F)=>{if(x!==A){if(x!==Ve)for(const V in x)!cs(V)&&!(V in A)&&s(b,V,x[V],null,F,H);for(const V in A){if(cs(V))continue;const Q=A[V],J=x[V];Q!==J&&V!=="value"&&s(b,V,J,Q,F,H)}"value"in A&&s(b,"value",x.value,A.value,F)}},U=(b,x,A,H,F,V,Q,J,D)=>{const P=x.el=b?b.el:l(""),re=x.anchor=b?b.anchor:l("");let{patchFlag:Z,dynamicChildren:le,slotScopeIds:pe}=x;pe&&(J=J?J.concat(pe):pe),b==null?(r(P,A,H),r(re,A,H),C(x.children||[],A,re,F,V,Q,J,D)):Z>0&&Z&64&&le&&b.dynamicChildren?(j(b.dynamicChildren,le,A,F,V,Q,J),(x.key!=null||F&&x===F.subTree)&&Zu(b,x,!0)):I(b,x,A,re,F,V,Q,J,D)},ae=(b,x,A,H,F,V,Q,J,D)=>{x.slotScopeIds=J,b==null?x.shapeFlag&512?F.ctx.activate(x,A,H,Q,D):k(x,A,H,F,V,Q,D):L(b,x,D)},k=(b,x,A,H,F,V,Q)=>{const J=b.component=Hv(b,H,F);if(fa(b)&&(J.ctx.renderer=he),Vv(J,!1,Q),J.asyncDep){if(F&&F.registerDep(J,T,Q),!b.el){const D=J.subTree=ye(Et);y(null,D,x,A)}}else T(J,b,x,A,F,V,Q)},L=(b,x,A)=>{const H=x.component=b.component;if(Rv(b,x,A))if(H.asyncDep&&!H.asyncResolved){z(H,x,A);return}else H.next=x,H.update();else x.el=b.el,H.vnode=x},T=(b,x,A,H,F,V,Q)=>{const J=()=>{if(b.isMounted){let{next:Z,bu:le,u:pe,parent:Te,vnode:S}=b;{const ee=Zm(b);if(ee){Z&&(Z.el=S.el,z(b,Z,Q)),ee.asyncDep.then(()=>{b.isUnmounted||J()});return}}let O=Z,M;Dr(b,!1),Z?(Z.el=S.el,z(b,Z,Q)):Z=S,le&&Po(le),(M=Z.props&&Z.props.onVnodeBeforeUpdate)&&gn(M,Te,Z,S),Dr(b,!0);const K=Sd(b),ne=b.subTree;b.subTree=K,m(ne,K,f(ne.el),X(ne),b,F,V),Z.el=K.el,O===null&&Dv(b,K.el),pe&&$t(pe,F),(M=Z.props&&Z.props.onVnodeUpdated)&&$t(()=>gn(M,Te,Z,S),F)}else{let Z;const{el:le,props:pe}=x,{bm:Te,m:S,parent:O,root:M,type:K}=b,ne=Mi(x);Dr(b,!1),Te&&Po(Te),!ne&&(Z=pe&&pe.onVnodeBeforeMount)&&gn(Z,O,x),Dr(b,!0);{M.ce&&M.ce._def.shadowRoot!==!1&&M.ce._injectChildStyle(K);const ee=b.subTree=Sd(b);m(null,ee,A,H,b,F,V),x.el=ee.el}if(S&&$t(S,F),!ne&&(Z=pe&&pe.onVnodeMounted)){const ee=x;$t(()=>gn(Z,O,ee),F)}(x.shapeFlag&256||O&&Mi(O.vnode)&&O.vnode.shapeFlag&256)&&b.a&&$t(b.a,F),b.isMounted=!0,x=A=H=null}};b.scope.on();const D=b.effect=new lm(J);b.scope.off();const P=b.update=D.run.bind(D),re=b.job=D.runIfDirty.bind(D);re.i=b,re.id=b.uid,D.scheduler=()=>Yu(re),Dr(b,!0),P()},z=(b,x,A)=>{x.component=b;const H=b.vnode.props;b.vnode=x,b.next=null,mv(b,x.props,H,A),xv(b,x.children,A),Yn(),dd(b),Xn()},I=(b,x,A,H,F,V,Q,J,D=!1)=>{const P=b&&b.children,re=b?b.shapeFlag:0,Z=x.children,{patchFlag:le,shapeFlag:pe}=x;if(le>0){if(le&128){ge(P,Z,A,H,F,V,Q,J,D);return}else if(le&256){de(P,Z,A,H,F,V,Q,J,D);return}}pe&8?(re&16&&oe(P,F,V),Z!==P&&u(A,Z)):re&16?pe&16?ge(P,Z,A,H,F,V,Q,J,D):oe(P,F,V,!0):(re&8&&u(A,""),pe&16&&C(Z,A,H,F,V,Q,J,D))},de=(b,x,A,H,F,V,Q,J,D)=>{b=b||Si,x=x||Si;const P=b.length,re=x.length,Z=Math.min(P,re);let le;for(le=0;le<Z;le++){const pe=x[le]=D?ar(x[le]):wn(x[le]);m(b[le],pe,A,null,F,V,Q,J,D)}P>re?oe(b,F,V,!0,!1,Z):C(x,A,H,F,V,Q,J,D,Z)},ge=(b,x,A,H,F,V,Q,J,D)=>{let P=0;const re=x.length;let Z=b.length-1,le=re-1;for(;P<=Z&&P<=le;){const pe=b[P],Te=x[P]=D?ar(x[P]):wn(x[P]);if(Br(pe,Te))m(pe,Te,A,null,F,V,Q,J,D);else break;P++}for(;P<=Z&&P<=le;){const pe=b[Z],Te=x[le]=D?ar(x[le]):wn(x[le]);if(Br(pe,Te))m(pe,Te,A,null,F,V,Q,J,D);else break;Z--,le--}if(P>Z){if(P<=le){const pe=le+1,Te=pe<re?x[pe].el:H;for(;P<=le;)m(null,x[P]=D?ar(x[P]):wn(x[P]),A,Te,F,V,Q,J,D),P++}}else if(P>le)for(;P<=Z;)ke(b[P],F,V,!0),P++;else{const pe=P,Te=P,S=new Map;for(P=Te;P<=le;P++){const rt=x[P]=D?ar(x[P]):wn(x[P]);rt.key!=null&&S.set(rt.key,P)}let O,M=0;const K=le-Te+1;let ne=!1,ee=0;const _e=new Array(K);for(P=0;P<K;P++)_e[P]=0;for(P=pe;P<=Z;P++){const rt=b[P];if(M>=K){ke(rt,F,V,!0);continue}let yt;if(rt.key!=null)yt=S.get(rt.key);else for(O=Te;O<=le;O++)if(_e[O-Te]===0&&Br(rt,x[O])){yt=O;break}yt===void 0?ke(rt,F,V,!0):(_e[yt-Te]=P+1,yt>=ee?ee=yt:ne=!0,m(rt,x[yt],A,null,F,V,Q,J,D),M++)}const Dt=ne?Sv(_e):Si;for(O=Dt.length-1,P=K-1;P>=0;P--){const rt=Te+P,yt=x[rt],mn=rt+1<re?x[rt+1].el:H;_e[P]===0?m(null,yt,A,mn,F,V,Q,J,D):ne&&(O<0||P!==Dt[O]?Se(yt,A,mn,2):O--)}}},Se=(b,x,A,H,F=null)=>{const{el:V,type:Q,transition:J,children:D,shapeFlag:P}=b;if(P&6){Se(b.component.subTree,x,A,H);return}if(P&128){b.suspense.move(x,A,H);return}if(P&64){Q.move(b,x,A,he);return}if(Q===ft){r(V,x,A);for(let Z=0;Z<D.length;Z++)Se(D[Z],x,A,H);r(b.anchor,x,A);return}if(Q===Bo){N(b,x,A);return}if(H!==2&&P&1&&J)if(H===0)J.beforeEnter(V),r(V,x,A),$t(()=>J.enter(V),F);else{const{leave:Z,delayLeave:le,afterLeave:pe}=J,Te=()=>{b.ctx.isUnmounted?i(V):r(V,x,A)},S=()=>{Z(V,()=>{Te(),pe&&pe()})};le?le(V,Te,S):S()}else r(V,x,A)},ke=(b,x,A,H=!1,F=!1)=>{const{type:V,props:Q,ref:J,children:D,dynamicChildren:P,shapeFlag:re,patchFlag:Z,dirs:le,cacheIndex:pe}=b;if(Z===-2&&(F=!1),J!=null&&(Yn(),hs(J,null,A,b,!0),Xn()),pe!=null&&(x.renderCache[pe]=void 0),re&256){x.ctx.deactivate(b);return}const Te=re&1&&le,S=!Mi(b);let O;if(S&&(O=Q&&Q.onVnodeBeforeUnmount)&&gn(O,x,b),re&6)q(b.component,A,H);else{if(re&128){b.suspense.unmount(A,H);return}Te&&Rr(b,null,x,"beforeUnmount"),re&64?b.type.remove(b,x,A,he,H):P&&!P.hasOnce&&(V!==ft||Z>0&&Z&64)?oe(P,x,A,!1,!0):(V===ft&&Z&384||!F&&re&16)&&oe(D,x,A),H&&Oe(b)}(S&&(O=Q&&Q.onVnodeUnmounted)||Te)&&$t(()=>{O&&gn(O,x,b),Te&&Rr(b,null,x,"unmounted")},A)},Oe=b=>{const{type:x,el:A,anchor:H,transition:F}=b;if(x===ft){Me(A,H);return}if(x===Bo){v(b);return}const V=()=>{i(A),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(b.shapeFlag&1&&F&&!F.persisted){const{leave:Q,delayLeave:J}=F,D=()=>Q(A,V);J?J(b.el,V,D):D()}else V()},Me=(b,x)=>{let A;for(;b!==x;)A=d(b),i(b),b=A;i(x)},q=(b,x,A)=>{const{bum:H,scope:F,job:V,subTree:Q,um:J,m:D,a:P,parent:re,slots:{__:Z}}=b;wd(D),wd(P),H&&Po(H),re&&Ce(Z)&&Z.forEach(le=>{re.renderCache[le]=void 0}),F.stop(),V&&(V.flags|=8,ke(Q,b,x,A)),J&&$t(J,x),$t(()=>{b.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},oe=(b,x,A,H=!1,F=!1,V=0)=>{for(let Q=V;Q<b.length;Q++)ke(b[Q],x,A,H,F)},X=b=>{if(b.shapeFlag&6)return X(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const x=d(b.anchor||b.el),A=x&&x[_m];return A?d(A):x};let se=!1;const R=(b,x,A)=>{b==null?x._vnode&&ke(x._vnode,null,null,!0):m(x._vnode||null,b,x,null,null,null,A),x._vnode=b,se||(se=!0,dd(),Mm(),se=!1)},he={p:m,um:ke,m:Se,r:Oe,mt:k,mc:C,pc:I,pbc:j,n:X,o:t};return{render:R,hydrate:void 0,createApp:dv(R)}}function Ka({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Dr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function wv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Zu(t,e,n=!1){const r=t.children,i=e.children;if(Ce(r)&&Ce(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=ar(i[s]),l.el=o.el),!n&&l.patchFlag!==-2&&Zu(o,l)),l.type===ga&&(l.el=o.el),l.type===Et&&!l.el&&(l.el=o.el)}}function Sv(t){const e=t.slice(),n=[0];let r,i,s,o,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,t[n[l]]<c?s=l+1:o=l;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function Zm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Zm(e)}function wd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Cv=Symbol.for("v-scx"),Tv=()=>zo(Cv);function Ev(t,e){return ef(t,null,e)}function Cn(t,e,n){return ef(t,e,n)}function ef(t,e,n=Ve){const{immediate:r,deep:i,flush:s,once:o}=n,l=mt({},n),a=e&&r||!e&&s!=="post";let c;if(Ds){if(s==="sync"){const h=Tv();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!a){const h=()=>{};return h.stop=Sn,h.resume=Sn,h.pause=Sn,h}}const u=Mt;l.call=(h,p,m)=>dn(h,u,p,m);let f=!1;s==="post"?l.scheduler=h=>{$t(h,u&&u.suspense)}:s!=="sync"&&(f=!0,l.scheduler=(h,p)=>{p?h():Yu(h)}),l.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const d=Lx(t,e,l);return Ds&&(c?c.push(d):a&&d()),d}function Mv(t,e,n){const r=this.proxy,i=et(t)?t.includes(".")?eg(r,t):()=>r[t]:t.bind(r,r);let s;Ae(e)?s=e:(s=e.handler,n=e);const o=no(this),l=ef(i,s.bind(r),n);return o(),l}function eg(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Av=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Cr(e)}Modifiers`]||t[`${Nr(e)}Modifiers`];function Nv(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ve;let i=n;const s=e.startsWith("update:"),o=s&&Av(r,e.slice(7));o&&(o.trim&&(i=n.map(u=>et(u)?u.trim():u)),o.number&&(i=n.map(Pc)));let l,a=r[l=Ba(e)]||r[l=Ba(Cr(e))];!a&&s&&(a=r[l=Ba(Nr(e))]),a&&dn(a,t,6,i);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,dn(c,t,6,i)}}function tg(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},l=!1;if(!Ae(t)){const a=c=>{const u=tg(c,e,!0);u&&(l=!0,mt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!s&&!l?(qe(t)&&r.set(t,null),null):(Ce(s)?s.forEach(a=>o[a]=null):mt(o,s),qe(t)&&r.set(t,o),o)}function ma(t,e){return!t||!ia(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,Nr(e))||Le(t,e))}function Sd(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:f,data:d,setupState:h,ctx:p,inheritAttrs:m}=t,g=nl(t);let y,w;try{if(n.shapeFlag&4){const v=i||r,E=v;y=wn(c.call(E,v,u,f,h,d,p)),w=l}else{const v=e;y=wn(v.length>1?v(f,{attrs:l,slots:o,emit:a}):v(f,null)),w=e.props?l:_v(l)}}catch(v){ms.length=0,ua(v,t,1),y=ye(Et)}let N=y;if(w&&m!==!1){const v=Object.keys(w),{shapeFlag:E}=N;v.length&&E&7&&(s&&v.some(Fu)&&(w=Ov(w,s)),N=Er(N,w,!1,!0))}return n.dirs&&(N=Er(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&_s(N,n.transition),y=N,nl(g),y}const _v=t=>{let e;for(const n in t)(n==="class"||n==="style"||ia(n))&&((e||(e={}))[n]=t[n]);return e},Ov=(t,e)=>{const n={};for(const r in t)(!Fu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Rv(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:l,patchFlag:a}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?Cd(r,o,c):!!o;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(o[d]!==r[d]&&!ma(c,d))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?Cd(r,o,c):!0:!!o;return!1}function Cd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!ma(n,s))return!0}return!1}function Dv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const ng=t=>t.__isSuspense;function Iv(t,e){e&&e.pendingBranch?Ce(t)?e.effects.push(...t):e.effects.push(t):Fx(t)}const ft=Symbol.for("v-fgt"),ga=Symbol.for("v-txt"),Et=Symbol.for("v-cmt"),Bo=Symbol.for("v-stc"),ms=[];let Gt=null;function ce(t=!1){ms.push(Gt=t?null:[])}function $v(){ms.pop(),Gt=ms[ms.length-1]||null}let Os=1;function Td(t,e=!1){Os+=t,t<0&&Gt&&e&&(Gt.hasOnce=!0)}function rg(t){return t.dynamicChildren=Os>0?Gt||Si:null,$v(),Os>0&&Gt&&Gt.push(t),t}function Re(t,e,n,r,i,s){return rg(te(t,e,n,r,i,s,!0))}function Ue(t,e,n,r,i){return rg(ye(t,e,n,r,i,!0))}function Rs(t){return t?t.__v_isVNode===!0:!1}function Br(t,e){return t.type===e.type&&t.key===e.key}const ig=({key:t})=>t??null,Fo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||Nt(t)||Ae(t)?{i:wt,r:t,k:e,f:!!n}:t:null);function te(t,e=null,n=null,r=0,i=null,s=t===ft?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ig(e),ref:e&&Fo(e),scopeId:Nm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:wt};return l?(tf(a,n),s&128&&t.normalize(a)):n&&(a.shapeFlag|=et(n)?8:16),Os>0&&!o&&Gt&&(a.patchFlag>0||s&6)&&a.patchFlag!==32&&Gt.push(a),a}const ye=Pv;function Pv(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===iv)&&(t=Et),Rs(t)){const l=Er(t,e,!0);return n&&tf(l,n),Os>0&&!s&&Gt&&(l.shapeFlag&6?Gt[Gt.indexOf(t)]=l:Gt.push(l)),l.patchFlag=-2,l}if(Kv(t)&&(t=t.__vccOpts),e){e=Lv(e);let{class:l,style:a}=e;l&&!et(l)&&(e.class=Ct(l)),qe(a)&&(Gu(a)&&!Ce(a)&&(a=mt({},a)),e.style=ei(a))}const o=et(t)?1:ng(t)?128:Om(t)?64:qe(t)?4:Ae(t)?2:0;return te(t,e,n,r,i,o,s,!0)}function Lv(t){return t?Gu(t)||qm(t)?mt({},t):t:null}function Er(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:l,transition:a}=t,c=e?to(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ig(c),ref:e&&e.ref?n&&s?Ce(s)?s.concat(Fo(e)):[s,Fo(e)]:Fo(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ft?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&_s(u,a.clone(u)),u}function st(t=" ",e=0){return ye(ga,null,t,e)}function zv(t,e){const n=ye(Bo,null,t);return n.staticCount=e,n}function Ze(t="",e=!1){return e?(ce(),Ue(Et,null,t)):ye(Et,null,t)}function wn(t){return t==null||typeof t=="boolean"?ye(Et):Ce(t)?ye(ft,null,t.slice()):Rs(t)?ar(t):ye(ga,null,String(t))}function ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function tf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ce(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),tf(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!qm(e)?e._ctx=wt:i===3&&wt&&(wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:wt},n=32):(e=String(e),r&64?(n=16,e=[st(e)]):n=8);t.children=e,t.shapeFlag|=n}function to(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ct([e.class,r.class]));else if(i==="style")e.style=ei([e.style,r.style]);else if(ia(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ce(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function gn(t,e,n,r=null){dn(t,e,7,[n,r])}const Bv=Wm();let Fv=0;function Hv(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Bv,s={uid:Fv++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ax(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gm(r,i),emitsOptions:tg(r,i),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:r.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Nv.bind(null,s),t.ce&&t.ce(s),s}let Mt=null;const sg=()=>Mt||wt;let il,qc;{const t=la(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};il=e("__VUE_INSTANCE_SETTERS__",n=>Mt=n),qc=e("__VUE_SSR_SETTERS__",n=>Ds=n)}const no=t=>{const e=Mt;return il(t),t.scope.on(),()=>{t.scope.off(),il(e)}},Ed=()=>{Mt&&Mt.scope.off(),il(null)};function og(t){return t.vnode.shapeFlag&4}let Ds=!1;function Vv(t,e=!1,n=!1){e&&qc(e);const{props:r,children:i}=t.vnode,s=og(t);pv(t,r,s,e),bv(t,i,n||e);const o=s?jv(t,e):void 0;return e&&qc(!1),o}function jv(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,sv);const{setup:r}=n;if(r){Yn();const i=t.setupContext=r.length>1?Uv(t):null,s=no(t),o=Zs(r,t,0,[t.props,i]),l=em(o);if(Xn(),s(),(l||t.sp)&&!Mi(t)&&Bm(t),l){if(o.then(Ed,Ed),e)return o.then(a=>{Md(t,a)}).catch(a=>{ua(a,t,0)});t.asyncDep=o}else Md(t,o)}else lg(t)}function Md(t,e,n){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qe(e)&&(t.setupState=Cm(e)),lg(t)}function lg(t,e,n){const r=t.type;t.render||(t.render=r.render||Sn);{const i=no(t);Yn();try{ov(t)}finally{Xn(),i()}}}const Wv={get(t,e){return Tt(t,"get",""),t[e]}};function Uv(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Wv),slots:t.slots,emit:t.emit,expose:e}}function ya(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cm(wm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ps)return ps[n](t)},has(e,n){return n in e||n in ps}})):t.proxy}function Kv(t){return Ae(t)&&"__vccOpts"in t}const Tn=(t,e)=>$x(t,e,Ds);function ag(t,e,n){const r=arguments.length;return r===2?qe(e)&&!Ce(e)?Rs(e)?ye(t,null,[e]):ye(t,e):ye(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Rs(n)&&(n=[n]),ye(t,e,n))}const qv="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jc;const Ad=typeof window<"u"&&window.trustedTypes;if(Ad)try{Jc=Ad.createPolicy("vue",{createHTML:t=>t})}catch{}const cg=Jc?t=>Jc.createHTML(t):t=>t,Jv="http://www.w3.org/2000/svg",Gv="http://www.w3.org/1998/Math/MathML",Bn=typeof document<"u"?document:null,Nd=Bn&&Bn.createElement("template"),Yv={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Bn.createElementNS(Jv,t):e==="mathml"?Bn.createElementNS(Gv,t):n?Bn.createElement(t,{is:n}):Bn.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Bn.createTextNode(t),createComment:t=>Bn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Bn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Nd.innerHTML=cg(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Nd.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},nr="transition",qi="animation",Is=Symbol("_vtc"),ug={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Xv=mt({},Im,ug),Qv=t=>(t.displayName="Transition",t.props=Xv,t),Zv=Qv((t,{slots:e})=>ag(Kx,e1(t),e)),Ir=(t,e=[])=>{Ce(t)?t.forEach(n=>n(...e)):t&&t(...e)},_d=t=>t?Ce(t)?t.some(e=>e.length>1):t.length>1:!1;function e1(t){const e={};for(const U in t)U in ug||(e[U]=t[U]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=s,appearActiveClass:c=o,appearToClass:u=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,p=t1(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:w,onEnterCancelled:N,onLeave:v,onLeaveCancelled:E,onBeforeAppear:B=y,onAppear:$=w,onAppearCancelled:C=N}=e,_=(U,ae,k,L)=>{U._enterCancelled=L,$r(U,ae?u:l),$r(U,ae?c:o),k&&k()},j=(U,ae)=>{U._isLeaving=!1,$r(U,f),$r(U,h),$r(U,d),ae&&ae()},Y=U=>(ae,k)=>{const L=U?$:w,T=()=>_(ae,U,k);Ir(L,[ae,T]),Od(()=>{$r(ae,U?a:s),Rn(ae,U?u:l),_d(L)||Rd(ae,r,m,T)})};return mt(e,{onBeforeEnter(U){Ir(y,[U]),Rn(U,s),Rn(U,o)},onBeforeAppear(U){Ir(B,[U]),Rn(U,a),Rn(U,c)},onEnter:Y(!1),onAppear:Y(!0),onLeave(U,ae){U._isLeaving=!0;const k=()=>j(U,ae);Rn(U,f),U._enterCancelled?(Rn(U,d),$d()):($d(),Rn(U,d)),Od(()=>{U._isLeaving&&($r(U,f),Rn(U,h),_d(v)||Rd(U,r,g,k))}),Ir(v,[U,k])},onEnterCancelled(U){_(U,!1,void 0,!0),Ir(N,[U])},onAppearCancelled(U){_(U,!0,void 0,!0),Ir(C,[U])},onLeaveCancelled(U){j(U),Ir(E,[U])}})}function t1(t){if(t==null)return null;if(qe(t))return[qa(t.enter),qa(t.leave)];{const e=qa(t);return[e,e]}}function qa(t){return tx(t)}function Rn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Is]||(t[Is]=new Set)).add(e)}function $r(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Is];n&&(n.delete(e),n.size||(t[Is]=void 0))}function Od(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let n1=0;function Rd(t,e,n,r){const i=t._endId=++n1,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:l,propCount:a}=r1(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,d),s()},d=h=>{h.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(c,d)}function r1(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${nr}Delay`),s=r(`${nr}Duration`),o=Dd(i,s),l=r(`${qi}Delay`),a=r(`${qi}Duration`),c=Dd(l,a);let u=null,f=0,d=0;e===nr?o>0&&(u=nr,f=o,d=s.length):e===qi?c>0&&(u=qi,f=c,d=a.length):(f=Math.max(o,c),u=f>0?o>c?nr:qi:null,d=u?u===nr?s.length:a.length:0);const h=u===nr&&/\b(transform|all)(,|$)/.test(r(`${nr}Property`).toString());return{type:u,timeout:f,propCount:d,hasTransform:h}}function Dd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Id(n)+Id(t[r])))}function Id(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function $d(){return document.body.offsetHeight}function i1(t,e,n){const r=t[Is];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Pd=Symbol("_vod"),s1=Symbol("_vsh"),o1=Symbol(""),l1=/(^|;)\s*display\s*:/;function a1(t,e,n){const r=t.style,i=et(n);let s=!1;if(n&&!i){if(e)if(et(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Ho(r,l,"")}else for(const o in e)n[o]==null&&Ho(r,o,"");for(const o in n)o==="display"&&(s=!0),Ho(r,o,n[o])}else if(i){if(e!==n){const o=r[o1];o&&(n+=";"+o),r.cssText=n,s=l1.test(n)}}else e&&t.removeAttribute("style");Pd in t&&(t[Pd]=s?r.display:"",t[s1]&&(r.display="none"))}const Ld=/\s*!important$/;function Ho(t,e,n){if(Ce(n))n.forEach(r=>Ho(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=c1(t,e);Ld.test(n)?t.setProperty(Nr(r),n.replace(Ld,""),"important"):t[r]=n}}const zd=["Webkit","Moz","ms"],Ja={};function c1(t,e){const n=Ja[e];if(n)return n;let r=Cr(e);if(r!=="filter"&&r in t)return Ja[e]=r;r=rm(r);for(let i=0;i<zd.length;i++){const s=zd[i]+r;if(s in t)return Ja[e]=s}return e}const Bd="http://www.w3.org/1999/xlink";function Fd(t,e,n,r,i,s=lx(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Bd,e.slice(6,e.length)):t.setAttributeNS(Bd,e,n):n==null||s&&!im(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Zn(n)?String(n):n)}function Hd(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?cg(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=im(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function yi(t,e,n,r){t.addEventListener(e,n,r)}function u1(t,e,n,r){t.removeEventListener(e,n,r)}const Vd=Symbol("_vei");function f1(t,e,n,r,i=null){const s=t[Vd]||(t[Vd]={}),o=s[e];if(r&&o)o.value=r;else{const[l,a]=d1(e);if(r){const c=s[e]=m1(r,i);yi(t,l,c,a)}else o&&(u1(t,l,o,a),s[e]=void 0)}}const jd=/(?:Once|Passive|Capture)$/;function d1(t){let e;if(jd.test(t)){e={};let r;for(;r=t.match(jd);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Nr(t.slice(2)),e]}let Ga=0;const h1=Promise.resolve(),p1=()=>Ga||(h1.then(()=>Ga=0),Ga=Date.now());function m1(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;dn(g1(r,n.value),e,5,[r])};return n.value=t,n.attached=p1(),n}function g1(t,e){if(Ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Wd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,y1=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?i1(t,r,o):e==="style"?a1(t,n,r):ia(e)?Fu(e)||f1(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):b1(t,e,r,o))?(Hd(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Fd(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(r))?Hd(t,Cr(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Fd(t,e,r,o))};function b1(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wd(e)&&Ae(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Wd(e)&&et(n)?!1:e in t}const Ud=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ce(e)?n=>Po(e,n):e};function x1(t){t.target.composing=!0}function Kd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ya=Symbol("_assign"),v1={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Ya]=Ud(i);const s=r||i.props&&i.props.type==="number";yi(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),s&&(l=Pc(l)),t[Ya](l)}),n&&yi(t,"change",()=>{t.value=t.value.trim()}),e||(yi(t,"compositionstart",x1),yi(t,"compositionend",Kd),yi(t,"change",Kd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Ya]=Ud(o),t.composing)return;const l=(s||t.type==="number")&&!/^0\d/.test(t.value)?Pc(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===a)||(t.value=a))}},k1=["ctrl","shift","alt","meta"],w1={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>k1.some(n=>t[`${n}Key`]&&!e.includes(n))},fg=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const l=w1[e[o]];if(l&&l(i,e))return}return t(i,...s)})},S1={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qd=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Nr(i.key);if(e.some(o=>o===s||S1[o]===s))return t(i)})},C1=mt({patchProp:y1},Yv);let Jd;function T1(){return Jd||(Jd=vv(C1))}const E1=(...t)=>{const e=T1().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=A1(r);if(!i)return;const s=e._component;!Ae(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,M1(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function M1(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function A1(t){return et(t)?document.querySelector(t):t}class N1 extends Map{constructor(e,n=R1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Gd(this,e))}has(e){return super.has(Gd(this,e))}set(e,n){return super.set(_1(this,e),n)}delete(e){return super.delete(O1(this,e))}}function Gd({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function _1({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function O1({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function R1(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Yd(t){return t}function Xd(t,...e){return D1(t,Yd,Yd,e)}function D1(t,e,n,r){return function i(s,o){if(o>=r.length)return n(s);const l=new N1,a=r[o++];let c=-1;for(const u of s){const f=a(u,++c,s),d=l.get(f);d?d.push(u):l.set(f,[u])}for(const[u,f]of l)l.set(u,i(f,o));return e(l)}(t,0)}function Qd(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Zd(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}var I1={value:()=>{}};function ba(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vo(n)}function Vo(t){this._=t}function $1(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vo.prototype=ba.prototype={constructor:Vo,on:function(t,e){var n=this._,r=$1(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=P1(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=eh(n[i],t.name,e);else if(e==null)for(i in n)n[i]=eh(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Vo(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function P1(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function eh(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=I1,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Gc="http://www.w3.org/1999/xhtml";const th={svg:"http://www.w3.org/2000/svg",xhtml:Gc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xa(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),th.hasOwnProperty(e)?{space:th[e],local:t}:t}function L1(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Gc&&e.documentElement.namespaceURI===Gc?e.createElement(t):e.createElementNS(n,t)}}function z1(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function dg(t){var e=xa(t);return(e.local?z1:L1)(e)}function B1(){}function nf(t){return t==null?B1:function(){return this.querySelector(t)}}function F1(t){typeof t!="function"&&(t=nf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),a,c,u=0;u<o;++u)(a=s[u])&&(c=t.call(a,a.__data__,u,s))&&("__data__"in a&&(c.__data__=a.__data__),l[u]=c);return new Xt(r,this._parents)}function H1(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function V1(){return[]}function hg(t){return t==null?V1:function(){return this.querySelectorAll(t)}}function j1(t){return function(){return H1(t.apply(this,arguments))}}function W1(t){typeof t=="function"?t=j1(t):t=hg(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,a,c=0;c<l;++c)(a=o[c])&&(r.push(t.call(a,a.__data__,c,o)),i.push(a));return new Xt(r,i)}function pg(t){return function(){return this.matches(t)}}function mg(t){return function(e){return e.matches(t)}}var U1=Array.prototype.find;function K1(t){return function(){return U1.call(this.children,t)}}function q1(){return this.firstElementChild}function J1(t){return this.select(t==null?q1:K1(typeof t=="function"?t:mg(t)))}var G1=Array.prototype.filter;function Y1(){return Array.from(this.children)}function X1(t){return function(){return G1.call(this.children,t)}}function Q1(t){return this.selectAll(t==null?Y1:X1(typeof t=="function"?t:mg(t)))}function Z1(t){typeof t!="function"&&(t=pg(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],a,c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new Xt(r,this._parents)}function gg(t){return new Array(t.length)}function ek(){return new Xt(this._enter||this._groups.map(gg),this._parents)}function sl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}sl.prototype={constructor:sl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tk(t){return function(){return t}}function nk(t,e,n,r,i,s){for(var o=0,l,a=e.length,c=s.length;o<c;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new sl(t,s[o]);for(;o<a;++o)(l=e[o])&&(i[o]=l)}function rk(t,e,n,r,i,s,o){var l,a,c=new Map,u=e.length,f=s.length,d=new Array(u),h;for(l=0;l<u;++l)(a=e[l])&&(d[l]=h=o.call(a,a.__data__,l,e)+"",c.has(h)?i[l]=a:c.set(h,a));for(l=0;l<f;++l)h=o.call(t,s[l],l,s)+"",(a=c.get(h))?(r[l]=a,a.__data__=s[l],c.delete(h)):n[l]=new sl(t,s[l]);for(l=0;l<u;++l)(a=e[l])&&c.get(d[l])===a&&(i[l]=a)}function ik(t){return t.__data__}function sk(t,e){if(!arguments.length)return Array.from(this,ik);var n=e?rk:nk,r=this._parents,i=this._groups;typeof t!="function"&&(t=tk(t));for(var s=i.length,o=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=ok(t.call(u,u&&u.__data__,c,r)),p=h.length,m=l[c]=new Array(p),g=o[c]=new Array(p),y=a[c]=new Array(d);n(u,f,m,g,y,h,e);for(var w=0,N=0,v,E;w<p;++w)if(v=m[w]){for(w>=N&&(N=w+1);!(E=g[N])&&++N<p;);v._next=E||null}}return o=new Xt(o,r),o._enter=l,o._exit=a,o}function ok(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lk(){return new Xt(this._exit||this._groups.map(gg),this._parents)}function ak(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function ck(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),a=0;a<o;++a)for(var c=n[a],u=r[a],f=c.length,d=l[a]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;a<i;++a)l[a]=n[a];return new Xt(l,this._parents)}function uk(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function fk(t){t||(t=dk);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,a=i[s]=new Array(l),c,u=0;u<l;++u)(c=o[u])&&(a[u]=c);a.sort(e)}return new Xt(i,this._parents).order()}function dk(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hk(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function pk(){return Array.from(this)}function mk(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function gk(){let t=0;for(const e of this)++t;return t}function yk(){return!this.node()}function bk(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function xk(t){return function(){this.removeAttribute(t)}}function vk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kk(t,e){return function(){this.setAttribute(t,e)}}function wk(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Sk(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ck(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tk(t,e){var n=xa(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?vk:xk:typeof e=="function"?n.local?Ck:Sk:n.local?wk:kk)(n,e))}function yg(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ek(t){return function(){this.style.removeProperty(t)}}function Mk(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ak(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Nk(t,e,n){return arguments.length>1?this.each((e==null?Ek:typeof e=="function"?Ak:Mk)(t,e,n??"")):Di(this.node(),t)}function Di(t,e){return t.style.getPropertyValue(e)||yg(t).getComputedStyle(t,null).getPropertyValue(e)}function _k(t){return function(){delete this[t]}}function Ok(t,e){return function(){this[t]=e}}function Rk(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Dk(t,e){return arguments.length>1?this.each((e==null?_k:typeof e=="function"?Rk:Ok)(t,e)):this.node()[t]}function bg(t){return t.trim().split(/^|\s+/)}function rf(t){return t.classList||new xg(t)}function xg(t){this._node=t,this._names=bg(t.getAttribute("class")||"")}xg.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vg(t,e){for(var n=rf(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function kg(t,e){for(var n=rf(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ik(t){return function(){vg(this,t)}}function $k(t){return function(){kg(this,t)}}function Pk(t,e){return function(){(e.apply(this,arguments)?vg:kg)(this,t)}}function Lk(t,e){var n=bg(t+"");if(arguments.length<2){for(var r=rf(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Pk:e?Ik:$k)(n,e))}function zk(){this.textContent=""}function Bk(t){return function(){this.textContent=t}}function Fk(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Hk(t){return arguments.length?this.each(t==null?zk:(typeof t=="function"?Fk:Bk)(t)):this.node().textContent}function Vk(){this.innerHTML=""}function jk(t){return function(){this.innerHTML=t}}function Wk(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Uk(t){return arguments.length?this.each(t==null?Vk:(typeof t=="function"?Wk:jk)(t)):this.node().innerHTML}function Kk(){this.nextSibling&&this.parentNode.appendChild(this)}function qk(){return this.each(Kk)}function Jk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gk(){return this.each(Jk)}function Yk(t){var e=typeof t=="function"?t:dg(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Xk(){return null}function Qk(t,e){var n=typeof t=="function"?t:dg(t),r=e==null?Xk:typeof e=="function"?e:nf(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Zk(){var t=this.parentNode;t&&t.removeChild(this)}function ew(){return this.each(Zk)}function tw(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nw(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rw(t){return this.select(t?nw:tw)}function iw(t){return arguments.length?this.property("__data__",t):this.node().__data__}function sw(t){return function(e){t.call(this,e,this.__data__)}}function ow(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function lw(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function aw(t,e,n){return function(){var r=this.__on,i,s=sw(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function cw(t,e,n){var r=ow(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,u;a<c;++a)for(i=0,u=l[a];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?aw:lw,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function wg(t,e,n){var r=yg(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function uw(t,e){return function(){return wg(this,t,e)}}function fw(t,e){return function(){return wg(this,t,e.apply(this,arguments))}}function dw(t,e){return this.each((typeof e=="function"?fw:uw)(t,e))}function*hw(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Sg=[null];function Xt(t,e){this._groups=t,this._parents=e}function ro(){return new Xt([[document.documentElement]],Sg)}function pw(){return this}Xt.prototype=ro.prototype={constructor:Xt,select:F1,selectAll:W1,selectChild:J1,selectChildren:Q1,filter:Z1,data:sk,enter:ek,exit:lk,join:ak,merge:ck,selection:pw,order:uk,sort:fk,call:hk,nodes:pk,node:mk,size:gk,empty:yk,each:bk,attr:Tk,style:Nk,property:Dk,classed:Lk,text:Hk,html:Uk,raise:qk,lower:Gk,append:Yk,insert:Qk,remove:ew,clone:rw,datum:iw,on:cw,dispatch:dw,[Symbol.iterator]:hw};function Xe(t){return typeof t=="string"?new Xt([[document.querySelector(t)]],[document.documentElement]):new Xt([[t]],Sg)}function mw(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Fn(t,e){if(t=mw(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const gw={passive:!1},$s={capture:!0,passive:!1};function Xa(t){t.stopImmediatePropagation()}function Ni(t){t.preventDefault(),t.stopImmediatePropagation()}function Cg(t){var e=t.document.documentElement,n=Xe(t).on("dragstart.drag",Ni,$s);"onselectstart"in e?n.on("selectstart.drag",Ni,$s):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Tg(t,e){var n=t.document.documentElement,r=Xe(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ni,$s),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const yo=t=>()=>t;function Yc(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Yc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function yw(t){return!t.ctrlKey&&!t.button}function bw(){return this.parentNode}function xw(t,e){return e??{x:t.x,y:t.y}}function vw(){return navigator.maxTouchPoints||"ontouchstart"in this}function kw(){var t=yw,e=bw,n=xw,r=vw,i={},s=ba("start","drag","end"),o=0,l,a,c,u,f=0;function d(v){v.on("mousedown.drag",h).filter(r).on("touchstart.drag",g).on("touchmove.drag",y,gw).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,E){if(!(u||!t.call(this,v,E))){var B=N(this,e.call(this,v,E),v,E,"mouse");B&&(Xe(v.view).on("mousemove.drag",p,$s).on("mouseup.drag",m,$s),Cg(v.view),Xa(v),c=!1,l=v.clientX,a=v.clientY,B("start",v))}}function p(v){if(Ni(v),!c){var E=v.clientX-l,B=v.clientY-a;c=E*E+B*B>f}i.mouse("drag",v)}function m(v){Xe(v.view).on("mousemove.drag mouseup.drag",null),Tg(v.view,c),Ni(v),i.mouse("end",v)}function g(v,E){if(t.call(this,v,E)){var B=v.changedTouches,$=e.call(this,v,E),C=B.length,_,j;for(_=0;_<C;++_)(j=N(this,$,v,E,B[_].identifier,B[_]))&&(Xa(v),j("start",v,B[_]))}}function y(v){var E=v.changedTouches,B=E.length,$,C;for($=0;$<B;++$)(C=i[E[$].identifier])&&(Ni(v),C("drag",v,E[$]))}function w(v){var E=v.changedTouches,B=E.length,$,C;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),$=0;$<B;++$)(C=i[E[$].identifier])&&(Xa(v),C("end",v,E[$]))}function N(v,E,B,$,C,_){var j=s.copy(),Y=Fn(_||B,E),U,ae,k;if((k=n.call(v,new Yc("beforestart",{sourceEvent:B,target:d,identifier:C,active:o,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:j}),$))!=null)return U=k.x-Y[0]||0,ae=k.y-Y[1]||0,function L(T,z,I){var de=Y,ge;switch(T){case"start":i[C]=L,ge=o++;break;case"end":delete i[C],--o;case"drag":Y=Fn(I||z,E),ge=o;break}j.call(T,v,new Yc(T,{sourceEvent:z,subject:k,target:d,identifier:C,active:ge,x:Y[0]+U,y:Y[1]+ae,dx:Y[0]-de[0],dy:Y[1]-de[1],dispatch:j}),$)}}return d.filter=function(v){return arguments.length?(t=typeof v=="function"?v:yo(!!v),d):t},d.container=function(v){return arguments.length?(e=typeof v=="function"?v:yo(v),d):e},d.subject=function(v){return arguments.length?(n=typeof v=="function"?v:yo(v),d):n},d.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:yo(!!v),d):r},d.on=function(){var v=s.on.apply(s,arguments);return v===s?d:v},d.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,d):Math.sqrt(f)},d}function sf(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Eg(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function io(){}var Ps=.7,ol=1/Ps,_i="\\s*([+-]?\\d+)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ww=/^#([0-9a-f]{3,8})$/,Sw=new RegExp(`^rgb\\(${_i},${_i},${_i}\\)$`),Cw=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),Tw=new RegExp(`^rgba\\(${_i},${_i},${_i},${Ls}\\)$`),Ew=new RegExp(`^rgba\\(${En},${En},${En},${Ls}\\)$`),Mw=new RegExp(`^hsl\\(${Ls},${En},${En}\\)$`),Aw=new RegExp(`^hsla\\(${Ls},${En},${En},${Ls}\\)$`),nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sf(io,zs,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rh,formatHex:rh,formatHex8:Nw,formatHsl:_w,formatRgb:ih,toString:ih});function rh(){return this.rgb().formatHex()}function Nw(){return this.rgb().formatHex8()}function _w(){return Mg(this).formatHsl()}function ih(){return this.rgb().formatRgb()}function zs(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ww.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sh(e):n===3?new Kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?bo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?bo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Sw.exec(t))?new Kt(e[1],e[2],e[3],1):(e=Cw.exec(t))?new Kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tw.exec(t))?bo(e[1],e[2],e[3],e[4]):(e=Ew.exec(t))?bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Mw.exec(t))?ah(e[1],e[2]/100,e[3]/100,1):(e=Aw.exec(t))?ah(e[1],e[2]/100,e[3]/100,e[4]):nh.hasOwnProperty(t)?sh(nh[t]):t==="transparent"?new Kt(NaN,NaN,NaN,0):null}function sh(t){return new Kt(t>>16&255,t>>8&255,t&255,1)}function bo(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kt(t,e,n,r)}function Ow(t){return t instanceof io||(t=zs(t)),t?(t=t.rgb(),new Kt(t.r,t.g,t.b,t.opacity)):new Kt}function Xc(t,e,n,r){return arguments.length===1?Ow(t):new Kt(t,e,n,r??1)}function Kt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}sf(Kt,Xc,Eg(io,{brighter(t){return t=t==null?ol:Math.pow(ol,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ps:Math.pow(Ps,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kt(Jr(this.r),Jr(this.g),Jr(this.b),ll(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oh,formatHex:oh,formatHex8:Rw,formatRgb:lh,toString:lh}));function oh(){return`#${Hr(this.r)}${Hr(this.g)}${Hr(this.b)}`}function Rw(){return`#${Hr(this.r)}${Hr(this.g)}${Hr(this.b)}${Hr((isNaN(this.opacity)?1:this.opacity)*255)}`}function lh(){const t=ll(this.opacity);return`${t===1?"rgb(":"rgba("}${Jr(this.r)}, ${Jr(this.g)}, ${Jr(this.b)}${t===1?")":`, ${t})`}`}function ll(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hr(t){return t=Jr(t),(t<16?"0":"")+t.toString(16)}function ah(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new an(t,e,n,r)}function Mg(t){if(t instanceof an)return new an(t.h,t.s,t.l,t.opacity);if(t instanceof io||(t=zs(t)),!t)return new an;if(t instanceof an)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,a=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=a<.5?s+i:2-s-i,o*=60):l=a>0&&a<1?0:o,new an(o,l,a,t.opacity)}function Dw(t,e,n,r){return arguments.length===1?Mg(t):new an(t,e,n,r??1)}function an(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}sf(an,Dw,Eg(io,{brighter(t){return t=t==null?ol:Math.pow(ol,t),new an(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ps:Math.pow(Ps,t),new an(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Kt(Qa(t>=240?t-240:t+120,i,r),Qa(t,i,r),Qa(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new an(ch(this.h),xo(this.s),xo(this.l),ll(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ll(this.opacity);return`${t===1?"hsl(":"hsla("}${ch(this.h)}, ${xo(this.s)*100}%, ${xo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ch(t){return t=(t||0)%360,t<0?t+360:t}function xo(t){return Math.max(0,Math.min(1,t||0))}function Qa(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ag=t=>()=>t;function Iw(t,e){return function(n){return t+n*e}}function $w(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Pw(t){return(t=+t)==1?Ng:function(e,n){return n-e?$w(e,n,t):Ag(isNaN(e)?n:e)}}function Ng(t,e){var n=e-t;return n?Iw(t,n):Ag(isNaN(t)?e:t)}const uh=function t(e){var n=Pw(e);function r(i,s){var o=n((i=Xc(i)).r,(s=Xc(s)).r),l=n(i.g,s.g),a=n(i.b,s.b),c=Ng(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=a(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function cr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Qc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Za=new RegExp(Qc.source,"g");function Lw(t){return function(){return t}}function zw(t){return function(e){return t(e)+""}}function Bw(t,e){var n=Qc.lastIndex=Za.lastIndex=0,r,i,s,o=-1,l=[],a=[];for(t=t+"",e=e+"";(r=Qc.exec(t))&&(i=Za.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,a.push({i:o,x:cr(r,i)})),n=Za.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?a[0]?zw(a[0].x):Lw(e):(e=a.length,function(c){for(var u=0,f;u<e;++u)l[(f=a[u]).i]=f.x(c);return l.join("")})}var fh=180/Math.PI,Zc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _g(t,e,n,r,i,s){var o,l,a;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(a=t*n+e*r)&&(n-=t*a,r-=e*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),t*r<e*n&&(t=-t,e=-e,a=-a,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*fh,skewX:Math.atan(a)*fh,scaleX:o,scaleY:l}}var vo;function Fw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zc:_g(e.a,e.b,e.c,e.d,e.e,e.f)}function Hw(t){return t==null||(vo||(vo=document.createElementNS("http://www.w3.org/2000/svg","g")),vo.setAttribute("transform",t),!(t=vo.transform.baseVal.consolidate()))?Zc:(t=t.matrix,_g(t.a,t.b,t.c,t.d,t.e,t.f))}function Og(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var m=h.push("translate(",null,e,null,n);p.push({i:m-4,x:cr(c,f)},{i:m-2,x:cr(u,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:cr(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function l(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:cr(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function a(c,u,f,d,h,p){if(c!==f||u!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:cr(c,f)},{i:m-2,x:cr(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),l(c.skewX,u.skewX,f,d),a(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Vw=Og(Fw,"px, ","px)","deg)"),jw=Og(Hw,", ",")",")"),Ww=1e-12;function dh(t){return((t=Math.exp(t))+1/t)/2}function Uw(t){return((t=Math.exp(t))-1/t)/2}function Kw(t){return((t=Math.exp(2*t))-1)/(t+1)}const qw=function t(e,n,r){function i(s,o){var l=s[0],a=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-l,p=f-a,m=h*h+p*p,g,y;if(m<Ww)y=Math.log(d/c)/e,g=function($){return[l+$*h,a+$*p,c*Math.exp(e*$*y)]};else{var w=Math.sqrt(m),N=(d*d-c*c+r*m)/(2*c*n*w),v=(d*d-c*c-r*m)/(2*d*n*w),E=Math.log(Math.sqrt(N*N+1)-N),B=Math.log(Math.sqrt(v*v+1)-v);y=(B-E)/e,g=function($){var C=$*y,_=dh(E),j=c/(n*w)*(_*Kw(e*C+E)-Uw(E));return[l+j*h,a+j*p,c*_/dh(e*C+E)]}}return g.duration=y*1e3*e/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,a=l*l;return t(o,l,a)},i}(Math.SQRT2,2,4);var Ii=0,ns=0,Ji=0,Rg=1e3,al,rs,cl=0,ti=0,va=0,Bs=typeof performance=="object"&&performance.now?performance:Date,Dg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function of(){return ti||(Dg(Jw),ti=Bs.now()+va)}function Jw(){ti=0}function ul(){this._call=this._time=this._next=null}ul.prototype=Ig.prototype={constructor:ul,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?of():+n)+(e==null?0:+e),!this._next&&rs!==this&&(rs?rs._next=this:al=this,rs=this),this._call=t,this._time=n,eu()},stop:function(){this._call&&(this._call=null,this._time=1/0,eu())}};function Ig(t,e,n){var r=new ul;return r.restart(t,e,n),r}function Gw(){of(),++Ii;for(var t=al,e;t;)(e=ti-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ii}function hh(){ti=(cl=Bs.now())+va,Ii=ns=0;try{Gw()}finally{Ii=0,Xw(),ti=0}}function Yw(){var t=Bs.now(),e=t-cl;e>Rg&&(va-=e,cl=t)}function Xw(){for(var t,e=al,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:al=n);rs=t,eu(r)}function eu(t){if(!Ii){ns&&(ns=clearTimeout(ns));var e=t-ti;e>24?(t<1/0&&(ns=setTimeout(hh,t-Bs.now()-va)),Ji&&(Ji=clearInterval(Ji))):(Ji||(cl=Bs.now(),Ji=setInterval(Yw,Rg)),Ii=1,Dg(hh))}}function ph(t,e,n){var r=new ul;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Qw=ba("start","end","cancel","interrupt"),Zw=[],$g=0,mh=1,tu=2,jo=3,gh=4,nu=5,Wo=6;function ka(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;eS(t,n,{name:e,index:r,group:i,on:Qw,tween:Zw,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$g})}function lf(t,e){var n=pn(t,e);if(n.state>$g)throw new Error("too late; already scheduled");return n}function Nn(t,e){var n=pn(t,e);if(n.state>jo)throw new Error("too late; already running");return n}function pn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function eS(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ig(s,0,n.time);function s(c){n.state=mh,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==mh)return a();for(u in r)if(h=r[u],h.name===n.name){if(h.state===jo)return ph(o);h.state===gh?(h.state=Wo,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=Wo,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(ph(function(){n.state===jo&&(n.state=gh,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=tu,n.on.call("start",t,t.__data__,n.index,n.group),n.state===tu){for(n.state=jo,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function l(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=nu,1),f=-1,d=i.length;++f<d;)i[f].call(t,u);n.state===nu&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Wo,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Uo(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>tu&&r.state<nu,r.state=Wo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function tS(t){return this.each(function(){Uo(this,t)})}function nS(t,e){var n,r;return function(){var i=Nn(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function rS(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Nn(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},a=0,c=i.length;a<c;++a)if(i[a].name===e){i[a]=l;break}a===c&&i.push(l)}s.tween=i}}function iS(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=pn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?nS:rS)(n,t,e))}function af(t,e,n){var r=t._id;return t.each(function(){var i=Nn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return pn(i,r).value[e]}}function Pg(t,e){var n;return(typeof e=="number"?cr:e instanceof zs?uh:(n=zs(e))?(e=n,uh):Bw)(t,e)}function sS(t){return function(){this.removeAttribute(t)}}function oS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lS(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function aS(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function cS(t,e,n){var r,i,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),a=l+"",o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,l)))}}function uS(t,e,n){var r,i,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),a=l+"",o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,l)))}}function fS(t,e){var n=xa(t),r=n==="transform"?jw:Pg;return this.attrTween(t,typeof e=="function"?(n.local?uS:cS)(n,r,af(this,"attr."+t,e)):e==null?(n.local?oS:sS)(n):(n.local?aS:lS)(n,r,e))}function dS(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function hS(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function pS(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&hS(t,s)),n}return i._value=e,i}function mS(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&dS(t,s)),n}return i._value=e,i}function gS(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=xa(t);return this.tween(n,(r.local?pS:mS)(r,e))}function yS(t,e){return function(){lf(this,t).delay=+e.apply(this,arguments)}}function bS(t,e){return e=+e,function(){lf(this,t).delay=e}}function xS(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yS:bS)(e,t)):pn(this.node(),e).delay}function vS(t,e){return function(){Nn(this,t).duration=+e.apply(this,arguments)}}function kS(t,e){return e=+e,function(){Nn(this,t).duration=e}}function wS(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?vS:kS)(e,t)):pn(this.node(),e).duration}function SS(t,e){if(typeof e!="function")throw new Error;return function(){Nn(this,t).ease=e}}function CS(t){var e=this._id;return arguments.length?this.each(SS(e,t)):pn(this.node(),e).ease}function TS(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Nn(this,t).ease=n}}function ES(t){if(typeof t!="function")throw new Error;return this.each(TS(this._id,t))}function MS(t){typeof t!="function"&&(t=pg(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],a,c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new Qn(r,this._parents,this._name,this._id)}function AS(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var a=e[l],c=n[l],u=a.length,f=o[l]=new Array(u),d,h=0;h<u;++h)(d=a[h]||c[h])&&(f[h]=d);for(;l<r;++l)o[l]=e[l];return new Qn(o,this._parents,this._name,this._id)}function NS(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _S(t,e,n){var r,i,s=NS(e)?lf:Nn;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function OS(t,e){var n=this._id;return arguments.length<2?pn(this.node(),n).on.on(t):this.each(_S(n,t,e))}function RS(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function DS(){return this.on("end.remove",RS(this._id))}function IS(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nf(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],a=l.length,c=s[o]=new Array(a),u,f,d=0;d<a;++d)(u=l[d])&&(f=t.call(u,u.__data__,d,l))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,ka(c[d],e,n,d,c,pn(u,n)));return new Qn(s,this._parents,e,n)}function $S(t){var e=this._name,n=this._id;typeof t!="function"&&(t=hg(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var a=r[l],c=a.length,u,f=0;f<c;++f)if(u=a[f]){for(var d=t.call(u,u.__data__,f,a),h,p=pn(u,n),m=0,g=d.length;m<g;++m)(h=d[m])&&ka(h,e,n,m,d,p);s.push(d),o.push(u)}return new Qn(s,o,e,n)}var PS=ro.prototype.constructor;function LS(){return new PS(this._groups,this._parents)}function zS(t,e){var n,r,i;return function(){var s=Di(this,t),o=(this.style.removeProperty(t),Di(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function Lg(t){return function(){this.style.removeProperty(t)}}function BS(t,e,n){var r,i=n+"",s;return function(){var o=Di(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function FS(t,e,n){var r,i,s;return function(){var o=Di(this,t),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(t),Di(this,t))),o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,l))}}function HS(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var a=Nn(this,t),c=a.on,u=a.value[s]==null?l||(l=Lg(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),a.on=r}}function VS(t,e,n){var r=(t+="")=="transform"?Vw:Pg;return e==null?this.styleTween(t,zS(t,r)).on("end.style."+t,Lg(t)):typeof e=="function"?this.styleTween(t,FS(t,r,af(this,"style."+t,e))).each(HS(this._id,t)):this.styleTween(t,BS(t,r,e),n).on("end.style."+t,null)}function jS(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function WS(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&jS(t,o,n)),r}return s._value=e,s}function US(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,WS(t,e,n??""))}function KS(t){return function(){this.textContent=t}}function qS(t){return function(){var e=t(this);this.textContent=e??""}}function JS(t){return this.tween("text",typeof t=="function"?qS(af(this,"text",t)):KS(t==null?"":t+""))}function GS(t){return function(e){this.textContent=t.call(this,e)}}function YS(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&GS(i)),e}return r._value=t,r}function XS(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,YS(t))}function QS(){for(var t=this._name,e=this._id,n=zg(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,a,c=0;c<l;++c)if(a=o[c]){var u=pn(a,e);ka(a,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Qn(r,this._parents,t,n)}function ZS(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},a={value:function(){--i===0&&s()}};n.each(function(){var c=Nn(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),c.on=e}),i===0&&s()})}var eC=0;function Qn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function zg(){return++eC}var Dn=ro.prototype;Qn.prototype={constructor:Qn,select:IS,selectAll:$S,selectChild:Dn.selectChild,selectChildren:Dn.selectChildren,filter:MS,merge:AS,selection:LS,transition:QS,call:Dn.call,nodes:Dn.nodes,node:Dn.node,size:Dn.size,empty:Dn.empty,each:Dn.each,on:OS,attr:fS,attrTween:gS,style:VS,styleTween:US,text:JS,textTween:XS,remove:DS,tween:iS,delay:xS,duration:wS,ease:CS,easeVarying:ES,end:ZS,[Symbol.iterator]:Dn[Symbol.iterator]};function tC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var nC={time:null,delay:0,duration:250,ease:tC};function rC(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function iC(t){var e,n;t instanceof Qn?(e=t._id,t=t._name):(e=zg(),(n=nC).time=of(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,a,c=0;c<l;++c)(a=o[c])&&ka(a,t,e,c,o,n||rC(a,e));return new Qn(r,this._parents,t,e)}ro.prototype.interrupt=tS;ro.prototype.transition=iC;function sC(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function oC(){return this.eachAfter(sC)}function lC(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function aC(t,e){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function cC(t,e){for(var n=this,r=[n],i=[],s,o,l,a=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,l=s.length;o<l;++o)r.push(s[o]);for(;n=i.pop();)t.call(e,n,++a,this);return this}function uC(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function fC(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function dC(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function hC(t){for(var e=this,n=pC(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function pC(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function mC(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function gC(){return Array.from(this)}function yC(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function bC(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*xC(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function cf(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=wC)):e===void 0&&(e=kC);for(var n=new Fs(t),r,i=[n],s,o,l,a;r=i.pop();)if((o=e(r.data))&&(a=(o=Array.from(o)).length))for(r.children=o,l=a-1;l>=0;--l)i.push(s=o[l]=new Fs(o[l])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(CC)}function vC(){return cf(this).eachBefore(SC)}function kC(t){return t.children}function wC(t){return Array.isArray(t)?t[1]:null}function SC(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function CC(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fs(t){this.data=t,this.depth=this.height=0,this.parent=null}Fs.prototype=cf.prototype={constructor:Fs,count:oC,each:lC,eachAfter:cC,eachBefore:aC,find:uC,sum:fC,sort:dC,path:hC,ancestors:mC,descendants:gC,leaves:yC,links:bC,copy:vC,[Symbol.iterator]:xC};function TC(t,e){return t.parent===e.parent?1:2}function ec(t){var e=t.children;return e?e[0]:t.t}function tc(t){var e=t.children;return e?e[e.length-1]:t.t}function EC(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function MC(t){for(var e=0,n=0,r=t.children,i=r.length,s;--i>=0;)s=r[i],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function AC(t,e,n){return t.a.parent===e.parent?t.a:n}function Ko(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ko.prototype=Object.create(Fs.prototype);function NC(t){for(var e=new Ko(t,0),n,r=[e],i,s,o,l;n=r.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),o=l-1;o>=0;--o)r.push(i=n.children[o]=new Ko(s[o],o)),i.parent=n;return(e.parent=new Ko(null,0)).children=[e],e}function _C(){var t=TC,e=1,n=1,r=null;function i(c){var u=NC(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(a);else{var f=c,d=c,h=c;c.eachBefore(function(w){w.x<f.x&&(f=w),w.x>d.x&&(d=w),w.depth>h.depth&&(h=w)});var p=f===d?1:t(f,d)/2,m=p-f.x,g=e/(d.x+p+m),y=n/(h.depth||1);c.eachBefore(function(w){w.x=(w.x+m)*g,w.y=w.depth*y})}return c}function s(c){var u=c.children,f=c.parent.children,d=c.i?f[c.i-1]:null;if(u){MC(c);var h=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+t(c._,d._),c.m=c.z-h):c.z=h}else d&&(c.z=d.z+t(c._,d._));c.parent.A=l(c,d,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,u,f){if(u){for(var d=c,h=c,p=u,m=d.parent.children[0],g=d.m,y=h.m,w=p.m,N=m.m,v;p=tc(p),d=ec(d),p&&d;)m=ec(m),h=tc(h),h.a=c,v=p.z+w-d.z-g+t(p._,d._),v>0&&(EC(AC(p,c,f),c,v),g+=v,y+=v),w+=p.m,g+=d.m,N+=m.m,y+=h.m;p&&!tc(h)&&(h.t=p,h.m+=w-y),d&&!ec(m)&&(m.t=d,m.m+=g-N,f=c)}return f}function a(c){c.x*=e,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],i):r?null:[e,n]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],i):r?[e,n]:null},i}const ko=t=>()=>t;function OC(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Wn(t,e,n){this.k=t,this.x=e,this.y=n}Wn.prototype={constructor:Wn,scale:function(t){return t===1?this:new Wn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Wn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hs=new Wn(1,0,0);Bg.prototype=Wn.prototype;function Bg(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Hs;return t.__zoom}function nc(t){t.stopImmediatePropagation()}function Gi(t){t.preventDefault(),t.stopImmediatePropagation()}function RC(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function DC(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function yh(){return this.__zoom||Hs}function IC(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function $C(){return navigator.maxTouchPoints||"ontouchstart"in this}function PC(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function LC(){var t=RC,e=DC,n=PC,r=IC,i=$C,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,a=qw,c=ba("start","zoom","end"),u,f,d,h=500,p=150,m=0,g=10;function y(k){k.property("__zoom",yh).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",j).filter(i).on("touchstart.zoom",Y).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(k,L,T,z){var I=k.selection?k.selection():k;I.property("__zoom",yh),k!==I?E(k,L,T,z):I.interrupt().each(function(){B(this,arguments).event(z).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},y.scaleBy=function(k,L,T,z){y.scaleTo(k,function(){var I=this.__zoom.k,de=typeof L=="function"?L.apply(this,arguments):L;return I*de},T,z)},y.scaleTo=function(k,L,T,z){y.transform(k,function(){var I=e.apply(this,arguments),de=this.__zoom,ge=T==null?v(I):typeof T=="function"?T.apply(this,arguments):T,Se=de.invert(ge),ke=typeof L=="function"?L.apply(this,arguments):L;return n(N(w(de,ke),ge,Se),I,o)},T,z)},y.translateBy=function(k,L,T,z){y.transform(k,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof T=="function"?T.apply(this,arguments):T),e.apply(this,arguments),o)},null,z)},y.translateTo=function(k,L,T,z,I){y.transform(k,function(){var de=e.apply(this,arguments),ge=this.__zoom,Se=z==null?v(de):typeof z=="function"?z.apply(this,arguments):z;return n(Hs.translate(Se[0],Se[1]).scale(ge.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof T=="function"?-T.apply(this,arguments):-T),de,o)},z,I)};function w(k,L){return L=Math.max(s[0],Math.min(s[1],L)),L===k.k?k:new Wn(L,k.x,k.y)}function N(k,L,T){var z=L[0]-T[0]*k.k,I=L[1]-T[1]*k.k;return z===k.x&&I===k.y?k:new Wn(k.k,z,I)}function v(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function E(k,L,T,z){k.on("start.zoom",function(){B(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(z).end()}).tween("zoom",function(){var I=this,de=arguments,ge=B(I,de).event(z),Se=e.apply(I,de),ke=T==null?v(Se):typeof T=="function"?T.apply(I,de):T,Oe=Math.max(Se[1][0]-Se[0][0],Se[1][1]-Se[0][1]),Me=I.__zoom,q=typeof L=="function"?L.apply(I,de):L,oe=a(Me.invert(ke).concat(Oe/Me.k),q.invert(ke).concat(Oe/q.k));return function(X){if(X===1)X=q;else{var se=oe(X),R=Oe/se[2];X=new Wn(R,ke[0]-se[0]*R,ke[1]-se[1]*R)}ge.zoom(null,X)}})}function B(k,L,T){return!T&&k.__zooming||new $(k,L)}function $(k,L){this.that=k,this.args=L,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,L),this.taps=0}$.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,L){return this.mouse&&k!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var L=Xe(this.that).datum();c.call(k,this.that,new OC(k,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:c}),L)}};function C(k,...L){if(!t.apply(this,arguments))return;var T=B(this,L).event(k),z=this.__zoom,I=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,r.apply(this,arguments)))),de=Fn(k);if(T.wheel)(T.mouse[0][0]!==de[0]||T.mouse[0][1]!==de[1])&&(T.mouse[1]=z.invert(T.mouse[0]=de)),clearTimeout(T.wheel);else{if(z.k===I)return;T.mouse=[de,z.invert(de)],Uo(this),T.start()}Gi(k),T.wheel=setTimeout(ge,p),T.zoom("mouse",n(N(w(z,I),T.mouse[0],T.mouse[1]),T.extent,o));function ge(){T.wheel=null,T.end()}}function _(k,...L){if(d||!t.apply(this,arguments))return;var T=k.currentTarget,z=B(this,L,!0).event(k),I=Xe(k.view).on("mousemove.zoom",ke,!0).on("mouseup.zoom",Oe,!0),de=Fn(k,T),ge=k.clientX,Se=k.clientY;Cg(k.view),nc(k),z.mouse=[de,this.__zoom.invert(de)],Uo(this),z.start();function ke(Me){if(Gi(Me),!z.moved){var q=Me.clientX-ge,oe=Me.clientY-Se;z.moved=q*q+oe*oe>m}z.event(Me).zoom("mouse",n(N(z.that.__zoom,z.mouse[0]=Fn(Me,T),z.mouse[1]),z.extent,o))}function Oe(Me){I.on("mousemove.zoom mouseup.zoom",null),Tg(Me.view,z.moved),Gi(Me),z.event(Me).end()}}function j(k,...L){if(t.apply(this,arguments)){var T=this.__zoom,z=Fn(k.changedTouches?k.changedTouches[0]:k,this),I=T.invert(z),de=T.k*(k.shiftKey?.5:2),ge=n(N(w(T,de),z,I),e.apply(this,L),o);Gi(k),l>0?Xe(this).transition().duration(l).call(E,ge,z,k):Xe(this).call(y.transform,ge,z,k)}}function Y(k,...L){if(t.apply(this,arguments)){var T=k.touches,z=T.length,I=B(this,L,k.changedTouches.length===z).event(k),de,ge,Se,ke;for(nc(k),ge=0;ge<z;++ge)Se=T[ge],ke=Fn(Se,this),ke=[ke,this.__zoom.invert(ke),Se.identifier],I.touch0?!I.touch1&&I.touch0[2]!==ke[2]&&(I.touch1=ke,I.taps=0):(I.touch0=ke,de=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),de&&(I.taps<2&&(f=ke[0],u=setTimeout(function(){u=null},h)),Uo(this),I.start())}}function U(k,...L){if(this.__zooming){var T=B(this,L).event(k),z=k.changedTouches,I=z.length,de,ge,Se,ke;for(Gi(k),de=0;de<I;++de)ge=z[de],Se=Fn(ge,this),T.touch0&&T.touch0[2]===ge.identifier?T.touch0[0]=Se:T.touch1&&T.touch1[2]===ge.identifier&&(T.touch1[0]=Se);if(ge=T.that.__zoom,T.touch1){var Oe=T.touch0[0],Me=T.touch0[1],q=T.touch1[0],oe=T.touch1[1],X=(X=q[0]-Oe[0])*X+(X=q[1]-Oe[1])*X,se=(se=oe[0]-Me[0])*se+(se=oe[1]-Me[1])*se;ge=w(ge,Math.sqrt(X/se)),Se=[(Oe[0]+q[0])/2,(Oe[1]+q[1])/2],ke=[(Me[0]+oe[0])/2,(Me[1]+oe[1])/2]}else if(T.touch0)Se=T.touch0[0],ke=T.touch0[1];else return;T.zoom("touch",n(N(ge,Se,ke),T.extent,o))}}function ae(k,...L){if(this.__zooming){var T=B(this,L).event(k),z=k.changedTouches,I=z.length,de,ge;for(nc(k),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),de=0;de<I;++de)ge=z[de],T.touch0&&T.touch0[2]===ge.identifier?delete T.touch0:T.touch1&&T.touch1[2]===ge.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(ge=Fn(ge,this),Math.hypot(f[0]-ge[0],f[1]-ge[1])<g)){var Se=Xe(this).on("dblclick.zoom");Se&&Se.apply(this,arguments)}}}return y.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:ko(+k),y):r},y.filter=function(k){return arguments.length?(t=typeof k=="function"?k:ko(!!k),y):t},y.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:ko(!!k),y):i},y.extent=function(k){return arguments.length?(e=typeof k=="function"?k:ko([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),y):e},y.scaleExtent=function(k){return arguments.length?(s[0]=+k[0],s[1]=+k[1],y):[s[0],s[1]]},y.translateExtent=function(k){return arguments.length?(o[0][0]=+k[0][0],o[1][0]=+k[1][0],o[0][1]=+k[0][1],o[1][1]=+k[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(k){return arguments.length?(n=k,y):n},y.duration=function(k){return arguments.length?(l=+k,y):l},y.interpolate=function(k){return arguments.length?(a=k,y):a},y.on=function(){var k=c.on.apply(c,arguments);return k===c?y:k},y.clickDistance=function(k){return arguments.length?(m=(k=+k)*k,y):Math.sqrt(m)},y.tapDistance=function(k){return arguments.length?(g=+k,y):g},y}function Fg(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Fg(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hg(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Fg(t))&&(r&&(r+=" "),r+=e);return r}const uf="-",zC=t=>{const e=FC(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(uf);return l[0]===""&&l.length!==1&&l.shift(),Vg(l,e)||BC(o)},getConflictingClassGroupIds:(o,l)=>{const a=n[o]||[];return l&&r[o]?[...a,...r[o]]:a}}},Vg=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Vg(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(uf);return e.validators.find(({validator:o})=>o(s))?.classGroupId},bh=/^\[(.+)\]$/,BC=t=>{if(bh.test(t)){const e=bh.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},FC=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)ru(n[i],r,i,e);return r},ru=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:xh(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(HC(i)){ru(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{ru(o,xh(e,s),n,r)})})},xh=(t,e)=>{let n=t;return e.split(uf).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},HC=t=>t.isThemeGetter,VC=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},iu="!",su=":",jC=su.length,WC=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,l=0,a=0,c;for(let p=0;p<i.length;p++){let m=i[p];if(o===0&&l===0){if(m===su){s.push(i.slice(a,p)),a=p+jC;continue}if(m==="/"){c=p;continue}}m==="["?o++:m==="]"?o--:m==="("?l++:m===")"&&l--}const u=s.length===0?i:i.substring(a),f=UC(u),d=f!==u,h=c&&c>a?c-a:void 0;return{modifiers:s,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}};if(e){const i=e+su,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},UC=t=>t.endsWith(iu)?t.substring(0,t.length-1):t.startsWith(iu)?t.substring(1):t,KC=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},qC=t=>({cache:VC(t.cacheSize),parseClassName:WC(t),sortModifiers:KC(t),...zC(t)}),JC=/\s+/,GC=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],l=t.trim().split(JC);let a="";for(let c=l.length-1;c>=0;c-=1){const u=l[c],{isExternal:f,modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(f){a=u+(a.length>0?" "+a:a);continue}let g=!!m,y=r(g?p.substring(0,m):p);if(!y){if(!g){a=u+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=u+(a.length>0?" "+a:a);continue}g=!1}const w=s(d).join(":"),N=h?w+iu:w,v=N+y;if(o.includes(v))continue;o.push(v);const E=i(y,g);for(let B=0;B<E.length;++B){const $=E[B];o.push(N+$)}a=u+(a.length>0?" "+a:a)}return a};function YC(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jg(e))&&(r&&(r+=" "),r+=n);return r}const jg=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jg(t[r]))&&(n&&(n+=" "),n+=e);return n};function XC(t,...e){let n,r,i,s=o;function o(a){const c=e.reduce((u,f)=>f(u),t());return n=qC(c),r=n.cache.get,i=n.cache.set,s=l,l(a)}function l(a){const c=r(a);if(c)return c;const u=GC(a,n);return i(a,u),u}return function(){return s(YC.apply(null,arguments))}}const ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Wg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ug=/^\((?:(\w[\w-]*):)?(.+)\)$/i,QC=/^\d+\/\d+$/,ZC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,nT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hi=t=>QC.test(t),$e=t=>!!t&&!Number.isNaN(Number(t)),rr=t=>!!t&&Number.isInteger(Number(t)),rc=t=>t.endsWith("%")&&$e(t.slice(0,-1)),In=t=>ZC.test(t),iT=()=>!0,sT=t=>eT.test(t)&&!tT.test(t),Kg=()=>!1,oT=t=>nT.test(t),lT=t=>rT.test(t),aT=t=>!ue(t)&&!fe(t),cT=t=>ji(t,Gg,Kg),ue=t=>Wg.test(t),Pr=t=>ji(t,Yg,sT),ic=t=>ji(t,pT,$e),vh=t=>ji(t,qg,Kg),uT=t=>ji(t,Jg,lT),wo=t=>ji(t,Xg,oT),fe=t=>Ug.test(t),Yi=t=>Wi(t,Yg),fT=t=>Wi(t,mT),kh=t=>Wi(t,qg),dT=t=>Wi(t,Gg),hT=t=>Wi(t,Jg),So=t=>Wi(t,Xg,!0),ji=(t,e,n)=>{const r=Wg.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Wi=(t,e,n=!1)=>{const r=Ug.exec(t);return r?r[1]?e(r[1]):n:!1},qg=t=>t==="position"||t==="percentage",Jg=t=>t==="image"||t==="url",Gg=t=>t==="length"||t==="size"||t==="bg-size",Yg=t=>t==="length",pT=t=>t==="number",mT=t=>t==="family-name",Xg=t=>t==="shadow",gT=()=>{const t=ut("color"),e=ut("font"),n=ut("text"),r=ut("font-weight"),i=ut("tracking"),s=ut("leading"),o=ut("breakpoint"),l=ut("container"),a=ut("spacing"),c=ut("radius"),u=ut("shadow"),f=ut("inset-shadow"),d=ut("text-shadow"),h=ut("drop-shadow"),p=ut("blur"),m=ut("perspective"),g=ut("aspect"),y=ut("ease"),w=ut("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...v(),fe,ue],B=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],C=()=>[fe,ue,a],_=()=>[hi,"full","auto",...C()],j=()=>[rr,"none","subgrid",fe,ue],Y=()=>["auto",{span:["full",rr,fe,ue]},rr,fe,ue],U=()=>[rr,"auto",fe,ue],ae=()=>["auto","min","max","fr",fe,ue],k=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...C()],z=()=>[hi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],I=()=>[t,fe,ue],de=()=>[...v(),kh,vh,{position:[fe,ue]}],ge=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Se=()=>["auto","cover","contain",dT,cT,{size:[fe,ue]}],ke=()=>[rc,Yi,Pr],Oe=()=>["","none","full",c,fe,ue],Me=()=>["",$e,Yi,Pr],q=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>[$e,rc,kh,vh],se=()=>["","none",p,fe,ue],R=()=>["none",$e,fe,ue],he=()=>["none",$e,fe,ue],Ne=()=>[$e,fe,ue],b=()=>[hi,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[In],breakpoint:[In],color:[iT],container:[In],"drop-shadow":[In],ease:["in","out","in-out"],font:[aT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[In],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[In],shadow:[In],spacing:["px",$e],text:[In],"text-shadow":[In],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",hi,ue,fe,g]}],container:["container"],columns:[{columns:[$e,ue,fe,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[rr,"auto",fe,ue]}],basis:[{basis:[hi,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$e,hi,"auto","initial","none",ue]}],grow:[{grow:["",$e,fe,ue]}],shrink:[{shrink:["",$e,fe,ue]}],order:[{order:[rr,"first","last","none",fe,ue]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ae()}],"auto-rows":[{"auto-rows":ae()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...k(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...k()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":k()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[l,"screen",...z()]}],"min-w":[{"min-w":[l,"screen","none",...z()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,Yi,Pr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,fe,ic]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",rc,ue]}],"font-family":[{font:[fT,ue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,fe,ue]}],"line-clamp":[{"line-clamp":[$e,"none",fe,ic]}],leading:[{leading:[s,...C()]}],"list-image":[{"list-image":["none",fe,ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",fe,ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:[$e,"from-font","auto",fe,Pr]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[$e,"auto",fe,ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe,ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe,ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:ge()}],"bg-size":[{bg:Se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},rr,fe,ue],radial:["",fe,ue],conic:[rr,fe,ue]},hT,uT]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:ke()}],"gradient-via-pos":[{via:ke()}],"gradient-to-pos":[{to:ke()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:Oe()}],"rounded-s":[{"rounded-s":Oe()}],"rounded-e":[{"rounded-e":Oe()}],"rounded-t":[{"rounded-t":Oe()}],"rounded-r":[{"rounded-r":Oe()}],"rounded-b":[{"rounded-b":Oe()}],"rounded-l":[{"rounded-l":Oe()}],"rounded-ss":[{"rounded-ss":Oe()}],"rounded-se":[{"rounded-se":Oe()}],"rounded-ee":[{"rounded-ee":Oe()}],"rounded-es":[{"rounded-es":Oe()}],"rounded-tl":[{"rounded-tl":Oe()}],"rounded-tr":[{"rounded-tr":Oe()}],"rounded-br":[{"rounded-br":Oe()}],"rounded-bl":[{"rounded-bl":Oe()}],"border-w":[{border:Me()}],"border-w-x":[{"border-x":Me()}],"border-w-y":[{"border-y":Me()}],"border-w-s":[{"border-s":Me()}],"border-w-e":[{"border-e":Me()}],"border-w-t":[{"border-t":Me()}],"border-w-r":[{"border-r":Me()}],"border-w-b":[{"border-b":Me()}],"border-w-l":[{"border-l":Me()}],"divide-x":[{"divide-x":Me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...q(),"hidden","none"]}],"divide-style":[{divide:[...q(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$e,fe,ue]}],"outline-w":[{outline:["",$e,Yi,Pr]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",u,So,wo]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",f,So,wo]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:Me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[$e,Pr]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":Me()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",d,So,wo]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[$e,fe,ue]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$e]}],"mask-image-linear-from-pos":[{"mask-linear-from":X()}],"mask-image-linear-to-pos":[{"mask-linear-to":X()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":X()}],"mask-image-t-to-pos":[{"mask-t-to":X()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":X()}],"mask-image-r-to-pos":[{"mask-r-to":X()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":X()}],"mask-image-b-to-pos":[{"mask-b-to":X()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":X()}],"mask-image-l-to-pos":[{"mask-l-to":X()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":X()}],"mask-image-x-to-pos":[{"mask-x-to":X()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":X()}],"mask-image-y-to-pos":[{"mask-y-to":X()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[fe,ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":X()}],"mask-image-radial-to-pos":[{"mask-radial-to":X()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":v()}],"mask-image-conic-pos":[{"mask-conic":[$e]}],"mask-image-conic-from-pos":[{"mask-conic-from":X()}],"mask-image-conic-to-pos":[{"mask-conic-to":X()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:ge()}],"mask-size":[{mask:Se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",fe,ue]}],filter:[{filter:["","none",fe,ue]}],blur:[{blur:se()}],brightness:[{brightness:[$e,fe,ue]}],contrast:[{contrast:[$e,fe,ue]}],"drop-shadow":[{"drop-shadow":["","none",h,So,wo]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",$e,fe,ue]}],"hue-rotate":[{"hue-rotate":[$e,fe,ue]}],invert:[{invert:["",$e,fe,ue]}],saturate:[{saturate:[$e,fe,ue]}],sepia:[{sepia:["",$e,fe,ue]}],"backdrop-filter":[{"backdrop-filter":["","none",fe,ue]}],"backdrop-blur":[{"backdrop-blur":se()}],"backdrop-brightness":[{"backdrop-brightness":[$e,fe,ue]}],"backdrop-contrast":[{"backdrop-contrast":[$e,fe,ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$e,fe,ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$e,fe,ue]}],"backdrop-invert":[{"backdrop-invert":["",$e,fe,ue]}],"backdrop-opacity":[{"backdrop-opacity":[$e,fe,ue]}],"backdrop-saturate":[{"backdrop-saturate":[$e,fe,ue]}],"backdrop-sepia":[{"backdrop-sepia":["",$e,fe,ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",fe,ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$e,"initial",fe,ue]}],ease:[{ease:["linear","initial",y,fe,ue]}],delay:[{delay:[$e,fe,ue]}],animate:[{animate:["none",w,fe,ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,fe,ue]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:R()}],"rotate-x":[{"rotate-x":R()}],"rotate-y":[{"rotate-y":R()}],"rotate-z":[{"rotate-z":R()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[fe,ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:b()}],"translate-x":[{"translate-x":b()}],"translate-y":[{"translate-y":b()}],"translate-z":[{"translate-z":b()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe,ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe,ue]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[$e,Yi,Pr,ic]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},yT=XC(gT);function Qg(...t){return yT(Hg(t))}const wa={__name:"card",props:{className:{type:String,default:""}},setup(t){return(e,n)=>(ce(),Re("div",to({class:me(Qg)("rounded-lg border bg-card text-card-foreground shadow-sm",t.className)},e.$attrs),[_t(e.$slots,"default")],16))}},wh=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Sh=Hg,bT=(t,e)=>n=>{var r;if(e?.variants==null)return Sh(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n?.[c],f=s?.[c];if(u===null)return null;const d=wh(u)||wh(f);return i[c][d]}),l=n&&Object.entries(n).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),a=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:d,...h}=u;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...l}[m]):{...s,...l}[m]===g})?[...c,f,d]:c},[]);return Sh(t,o,a,n?.class,n?.className)},xT=["disabled"],He={__name:"button",props:{variant:{type:String,default:"default"},size:{type:String,default:"default"},disabled:{type:Boolean,default:!1},className:{type:String,default:""}},setup(t){const e=bT("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});return(n,r)=>(ce(),Re("button",to({class:me(Qg)(me(e)({variant:t.variant,size:t.size,className:t.className})),disabled:t.disabled},n.$attrs),[_t(n.$slots,"default")],16,xT))}},_n=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},vT={class:"absolute top-3 left-3 z-[100]"},kT={class:"flex items-center gap-1"},wT={class:"flex gap-1"},ST={class:"flex gap-1"},CT={class:"flex gap-1"},TT={key:0,class:"text-xs"},ET={key:0,class:"text-xs"},MT={key:0,class:"text-xs"},AT={key:0,class:"text-xs"},NT={class:"material-icons text-sm"},_T={key:0,class:"flex items-center ml-2 pl-2 border-l border-gray-200"},OT={key:0,class:"text-amber-500 ml-1"},RT={__name:"Toolbar",props:{currentFile:Object,isDirty:Boolean,isSaving:Boolean},emits:["new-file","open-files","save-file","reset-zoom","zoom-in","zoom-out","export-markdown","import-markdown","update-file-name","open-reader","export-image"],setup(t,{emit:e}){const n=t,r=e,i=we(!1),s=we(!1),o=we(!1),l=we(""),a=we(null);ai(()=>{const d=localStorage.getItem("toolbar-state");if(d){const{minimized:h,compact:p}=JSON.parse(d);i.value=h||!1,s.value=p||!1}}),Cn([i,s],()=>{localStorage.setItem("toolbar-state",JSON.stringify({minimized:i.value,compact:s.value}))});const c=async()=>{l.value=n.currentFile?.name||"Untitled",o.value=!0,await qr(),a.value?.select()},u=()=>{l.value.trim()&&l.value!==n.currentFile?.name&&r("update-file-name",l.value.trim()),o.value=!1},f=()=>{o.value=!1};return(d,h)=>(ce(),Re("div",vT,[i.value?(ce(),Ue(He,{key:0,onClick:h[0]||(h[0]=p=>i.value=!1),variant:"outline",size:"icon",class:"shadow-sm",title:"Expand toolbar"},{default:xe(()=>h[14]||(h[14]=[te("span",{class:"material-icons text-base"},"menu",-1)])),_:1,__:[14]})):(ce(),Ue(wa,{key:1,class:Ct(["transition-all duration-300 ease-in-out",s.value?"p-1":"p-2"])},{default:xe(()=>[te("div",kT,[ye(He,{onClick:h[1]||(h[1]=p=>i.value=!0),variant:"ghost",size:"icon",class:"h-7 w-7",title:"Minimize toolbar"},{default:xe(()=>h[15]||(h[15]=[te("span",{class:"material-icons text-sm"},"close",-1)])),_:1,__:[15]}),h[22]||(h[22]=te("div",{class:"h-6 w-px bg-gray-200 mx-1"},null,-1)),te("div",wT,[ye(He,{onClick:h[2]||(h[2]=p=>d.$emit("new-file")),variant:"ghost",size:"icon",class:"h-7 w-7",title:"New mindmap"},{default:xe(()=>h[16]||(h[16]=[te("span",{class:"material-icons text-sm"},"add",-1)])),_:1,__:[16]}),ye(He,{onClick:h[3]||(h[3]=p=>d.$emit("open-files")),variant:"ghost",size:"icon",class:"h-7 w-7",title:"Open saved files"},{default:xe(()=>h[17]||(h[17]=[te("span",{class:"material-icons text-sm"},"folder_open",-1)])),_:1,__:[17]}),ye(He,{onClick:h[4]||(h[4]=p=>d.$emit("save-file")),variant:"ghost",size:"icon",class:"h-7 w-7",title:"Save mindmap",disabled:t.isSaving},{default:xe(()=>h[18]||(h[18]=[te("span",{class:"material-icons text-sm"},"save",-1)])),_:1,__:[18]},8,["disabled"])]),h[23]||(h[23]=te("div",{class:"h-6 w-px bg-gray-200 mx-1"},null,-1)),te("div",ST,[ye(He,{onClick:h[5]||(h[5]=p=>d.$emit("reset-zoom")),variant:"ghost",size:"icon",class:"h-7 w-7",title:"Reset zoom"},{default:xe(()=>h[19]||(h[19]=[te("span",{class:"material-icons text-sm"},"fit_screen",-1)])),_:1,__:[19]}),ye(He,{onClick:h[6]||(h[6]=p=>d.$emit("zoom-in")),variant:"ghost",size:"icon",class:"h-7 w-7",title:"Zoom in"},{default:xe(()=>h[20]||(h[20]=[te("span",{class:"material-icons text-sm"},"zoom_in",-1)])),_:1,__:[20]}),ye(He,{onClick:h[7]||(h[7]=p=>d.$emit("zoom-out")),variant:"ghost",size:"icon",class:"h-7 w-7",title:"Zoom out"},{default:xe(()=>h[21]||(h[21]=[te("span",{class:"material-icons text-sm"},"zoom_out",-1)])),_:1,__:[21]})]),h[24]||(h[24]=te("div",{class:"h-6 w-px bg-gray-200 mx-1"},null,-1)),te("div",CT,[ye(He,{onClick:h[8]||(h[8]=p=>d.$emit("import-markdown")),variant:"ghost",size:s.value?"icon":"sm",class:Ct(s.value?"h-7 w-7":"h-7 px-2"),title:"Import from Markdown"},{default:xe(()=>[te("span",{class:Ct(["material-icons",s.value?"text-sm":"text-sm mr-1"])},"upload",2),s.value?Ze("",!0):(ce(),Re("span",TT,"Import MD"))]),_:1},8,["size","class"]),ye(He,{onClick:h[9]||(h[9]=p=>d.$emit("export-markdown")),variant:"ghost",size:s.value?"icon":"sm",class:Ct(s.value?"h-7 w-7":"h-7 px-2"),title:"Export as Markdown"},{default:xe(()=>[te("span",{class:Ct(["material-icons",s.value?"text-sm":"text-sm mr-1"])},"download",2),s.value?Ze("",!0):(ce(),Re("span",ET,"Export MD"))]),_:1},8,["size","class"]),ye(He,{onClick:h[10]||(h[10]=p=>d.$emit("export-image")),variant:"ghost",size:s.value?"icon":"sm",class:Ct(s.value?"h-7 w-7":"h-7 px-2"),title:"Export as Image"},{default:xe(()=>[te("span",{class:Ct(["material-icons",s.value?"text-sm":"text-sm mr-1"])},"image",2),s.value?Ze("",!0):(ce(),Re("span",MT,"Export SVG"))]),_:1},8,["size","class"]),ye(He,{onClick:h[11]||(h[11]=p=>d.$emit("open-reader")),variant:"ghost",size:s.value?"icon":"sm",class:Ct(s.value?"h-7 w-7":"h-7 px-2"),title:"Reader Mode"},{default:xe(()=>[te("span",{class:Ct(["material-icons",s.value?"text-sm":"text-sm mr-1"])},"chrome_reader_mode",2),s.value?Ze("",!0):(ce(),Re("span",AT,"Reader"))]),_:1},8,["size","class"])]),ye(He,{onClick:h[12]||(h[12]=p=>s.value=!s.value),variant:"ghost",size:"icon",class:"h-7 w-7 ml-1",title:s.value?"Expand toolbar":"Compact toolbar"},{default:xe(()=>[te("span",NT,Wt(s.value?"unfold_more":"unfold_less"),1)]),_:1},8,["title"]),t.currentFile||t.isDirty?(ce(),Re("div",_T,[o.value?Hx((ce(),Re("input",{key:0,"onUpdate:modelValue":h[13]||(h[13]=p=>l.value=p),onKeyup:[qd(u,["enter"]),qd(f,["esc"])],onBlur:u,class:"text-xs px-1 py-0 border-b border-gray-300 outline-none focus:border-blue-500 bg-transparent w-24",ref_key:"nameInput",ref:a},null,544)),[[v1,l.value]]):(ce(),Re("button",{key:1,onClick:c,class:"text-xs text-gray-600 hover:text-gray-800 cursor-text flex items-center"},[st(Wt(t.currentFile?.name||"Untitled")+" ",1),t.isDirty?(ce(),Re("span",OT,"•")):Ze("",!0)]))])):Ze("",!0)])]),_:1},8,["class"]))]))}},DT=_n(RT,[["__scopeId","data-v-1dadd534"]]);function bt(t){this.content=t}bt.prototype={constructor:bt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new bt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new bt(n)},addToStart:function(t,e){return new bt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new bt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new bt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=bt.from(t),t.size?new bt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=bt.from(t),t.size?new bt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=bt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};bt.from=function(t){if(t instanceof bt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new bt(e)};function Zg(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Zg(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function ey(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=ey(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class W{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new W(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new W(r,i)}cutByIndex(e,n){return e==n?W.empty:e==0&&n==this.content.length?this:new W(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new W(i,s)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Zg(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return ey(this,e,n,r)}findIndex(e){if(e==0)return Co(0,e);if(e==this.size)return Co(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?Co(n+1,s):Co(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return W.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new W(n||e,r)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const sc={index:0,offset:0};function Co(t,e){return sc.index=t,sc.offset=e,sc}function fl(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!fl(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!fl(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let je=class ou{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&fl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ou.none;if(e instanceof ou)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};je.none=[];class dl extends Error{}class ie{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=ny(this.content,e+this.openStart,n);return r&&new ie(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ie(ty(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ie.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(W.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ie(e,r,i)}}ie.empty=new ie(W.empty,0,0);function ty(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(ty(s.content,e-i-1,n-i-1)))}function ny(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=ny(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function IT(t,e,n){if(n.openStart>t.depth)throw new dl("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new dl("Inconsistent open depths");return ry(t,e,n,0)}function ry(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=ry(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Yr(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=$T(n,t);return Yr(s,sy(t,o,l,e,r))}else return Yr(s,hl(t,e,r))}function iy(t,e){if(!e.type.compatibleContent(t.type))throw new dl("Cannot join "+e.type.name+" onto "+t.type.name)}function lu(t,e,n){let r=t.node(n);return iy(r,e.node(n)),r}function Gr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function gs(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Gr(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Gr(i.child(l),r);e&&e.depth==n&&e.textOffset&&Gr(e.nodeBefore,r)}function Yr(t,e){return t.type.checkContent(e),t.copy(e)}function sy(t,e,n,r,i){let s=t.depth>i&&lu(t,e,i+1),o=r.depth>i&&lu(n,r,i+1),l=[];return gs(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(iy(s,o),Gr(Yr(s,sy(t,e,n,r,i+1)),l)):(s&&Gr(Yr(s,hl(t,e,i+1)),l),gs(e,n,i,l),o&&Gr(Yr(o,hl(n,r,i+1)),l)),gs(r,null,i,l),new W(l)}function hl(t,e,n){let r=[];if(gs(null,t,n,r),t.depth>n){let i=lu(t,e,n+1);Gr(Yr(i,hl(t,e,n+1)),r)}return gs(e,null,n,r),new W(r)}function $T(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(W.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Vs{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return je.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new pl(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new Vs(n,r,s)}static resolveCached(e,n){let r=Ch.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Ch.set(e,r=new PT);let i=r.elts[r.i]=Vs.resolve(e,n);return r.i=(r.i+1)%LT,i}}class PT{constructor(){this.elts=[],this.i=0}}const LT=12,Ch=new WeakMap;class pl{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const zT=Object.create(null);let xr=class au{constructor(e,n,r,i=je.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&fl(this.attrs,n||e.defaultAttrs||zT)&&je.sameSet(this.marks,r||je.none)}copy(e=null){return e==this.content?this:new au(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new au(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ie.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new ie(c,i.depth-o,s.depth-o)}replace(e,n,r){return IT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Vs.resolveCached(this,e)}resolveNoCache(e){return Vs.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),oy(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=W.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=je.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!je.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=W.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};xr.prototype.text=void 0;class ml extends xr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):oy(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ml(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ml(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function oy(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ni{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new BT(e,n);if(r.next==null)return ni.empty;let i=ly(r);r.next&&r.err("Unexpected trailing text");let s=KT(UT(i));return qT(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return W.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=s(f,l.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ni.empty=new ni(!0);class BT{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ly(t){let e=[];do e.push(FT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function FT(t){let e=[];do e.push(HT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function HT(t){let e=WT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=VT(t,e);else break;return e}function Th(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function VT(t,e){let n=Th(t),r=n;return t.eat(",")&&(t.next!="}"?r=Th(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function jT(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function WT(t){if(t.eat("(")){let e=ly(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=jT(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function UT(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ay(t,e){return e-t}function Eh(t,e){let n=[];return r(e),n.sort(ay);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function KT(t){let e=Object.create(null);return n(Eh(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Eh(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ni(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(ay);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function qT(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function cy(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function uy(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function fy(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function dy(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new GT(t,r,e[r]);return n}let Mh=class hy{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=dy(e,r.attrs),this.defaultAttrs=cy(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ni.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:uy(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new xr(this,this.computeAttrs(e),W.from(n),je.setFrom(r))}createChecked(e=null,n,r){return n=W.from(n),this.checkContent(n),new xr(this,this.computeAttrs(e),n,je.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=W.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(W.empty,!0);return s?new xr(this,e,n.append(s),je.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){fy(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:je.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new hy(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function JT(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class GT{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?JT(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Sa{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=dy(e,i.attrs),this.excluded=null;let s=cy(this.attrs);this.instance=s?new je(this,s):null}create(e=null){return!e&&this.instance?this.instance:new je(this,uy(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Sa(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){fy(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class py{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=bt.from(e.nodes),n.marks=bt.from(e.marks||{}),this.nodes=Mh.compile(this.spec.nodes,this),this.marks=Sa.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ni.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Ah(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Ah(this,o.split(" "))}this.nodeFromJSON=i=>xr.fromJSON(this,i),this.markFromJSON=i=>je.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Mh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ml(r,r.defaultAttrs,e,je.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Ah(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function YT(t){return t.tag!=null}function XT(t){return t.style!=null}class vr{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(YT(i))this.tags.push(i);else if(XT(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new _h(this,n,!1);return r.addAll(e,je.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new _h(this,n,!0);return r.addAll(e,je.none,n.from,n.to),ie.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(eE(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Oh(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Oh(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new vr(e,vr.schemaRules(e)))}}const my={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},QT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},gy={ol:!0,ul:!0},js=1,cu=2,ys=4;function Nh(t,e,n){return e!=null?(e?js:0)|(e==="full"?cu:0):t&&t.whitespace=="pre"?js|cu:n&~ys}class To{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=je.none,this.match=s||(o&ys?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(W.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&js)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=W.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!my.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class _h{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=Nh(null,n.preserveWhitespace,0)|(r?ys:0);i?s=new To(i.type,i.attrs,je.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new To(null,null,je.none,!0,null,o):s=new To(e.schema.topNodeType,null,je.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&cu?"full":this.localPreserveWS||(i.options&js)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;gy.hasOwnProperty(o)&&this.parser.normalizeLists&&ZT(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:QT.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(my.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,s=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=je.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):Rh(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Nh(e,s,o.options);o.options&ys&&o.content.length==0&&(l|=ys);let a=je.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Rh(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new To(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=js)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function ZT(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&gy.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function eE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Oh(t){let e={};for(let n in t)e[n]=t[n];return e}function Rh(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class ci{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=oc(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=qo(oc(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&qo(oc(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return qo(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ci(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Dh(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Dh(e.marks)}}function Dh(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function oc(t){return t.document||window.document}const Ih=new WeakMap;function tE(t){let e=Ih.get(t);return e===void 0&&Ih.set(t,e=nE(t)),e}function nE(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function qo(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=tE(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let d=f.indexOf(" ");d>0?a.setAttributeNS(f.slice(0,d),f.slice(d+1),c[f]):f=="style"&&a.style?a.style.cssText=c[f]:a.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=qo(t,d,n,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const yy=65535,by=Math.pow(2,16);function rE(t,e){return t+e*by}function $h(t){return t&yy}function iE(t){return(t-(t&yy))/by}const xy=1,vy=2,Jo=4,ky=8;class uu{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&ky)>0}get deletedBefore(){return(this.delInfo&(xy|Jo))>0}get deletedAfter(){return(this.delInfo&(vy|Jo))>0}get deletedAcross(){return(this.delInfo&Jo)>0}}class Jt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Jt.empty)return Jt.empty}recover(e){let n=0,r=$h(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+iE(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],f=a+c;if(e<=f){let d=c?e==a?-1:e==f?1:n:n,h=a+i+(d<0?0:u);if(r)return h;let p=e==(n<0?a:f)?null:rE(l/3,e-a),m=e==a?vy:e==f?xy:Jo;return(n<0?e!=a:e!=f)&&(m|=ky),new uu(h,m,p)}i+=u-c}return r?e+i:new uu(e+i,0,null)}touches(e,n){let r=0,i=$h(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new Jt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Jt.empty:new Jt(e<0?[0,-e,0]:[0,0,e])}}Jt.empty=new Jt([]);class Ws{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ws(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ws;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new uu(e,i,null)}}const lc=Object.create(null);class Ot{getMap(){return Jt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=lc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in lc)throw new RangeError("Duplicate use of step JSON ID "+e);return lc[e]=n,n.prototype.jsonID=e,n}}class lt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new lt(e,null)}static fail(e){return new lt(null,e)}static fromReplace(e,n,r,i){try{return lt.ok(e.replace(n,r,i))}catch(s){if(s instanceof dl)return lt.fail(s.message);throw s}}}function ff(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(ff(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return W.fromArray(r)}class mr extends Ot{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ie(ff(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return lt.fromReplace(e,this.from,this.to,s)}invert(){return new un(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new mr(n.pos,r.pos,this.mark)}merge(e){return e instanceof mr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new mr(n.from,n.to,e.markFromJSON(n.mark))}}Ot.jsonID("addMark",mr);class un extends Ot{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ie(ff(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return lt.fromReplace(e,this.from,this.to,r)}invert(){return new mr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new un(n.pos,r.pos,this.mark)}merge(e){return e instanceof un&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new un(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new un(n.from,n.to,e.markFromJSON(n.mark))}}Ot.jsonID("removeMark",un);class gr extends Ot{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return lt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return lt.fromReplace(e,this.pos,this.pos+1,new ie(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new gr(this.pos,n.marks[i]);return new gr(this.pos,this.mark)}}return new ri(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gr(n.pos,e.markFromJSON(n.mark))}}Ot.jsonID("addNodeMark",gr);class ri extends Ot{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return lt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return lt.fromReplace(e,this.pos,this.pos+1,new ie(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ri(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ri(n.pos,e.markFromJSON(n.mark))}}Ot.jsonID("removeNodeMark",ri);class dt extends Ot{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&fu(e,this.from,this.to)?lt.fail("Structure replace would overwrite content"):lt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Jt([this.from,this.to-this.from,this.slice.size])}invert(e){return new dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new dt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ie.empty:new ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new dt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ie.empty:new ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new dt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new dt(n.from,n.to,ie.fromJSON(e,n.slice),!!n.structure)}}Ot.jsonID("replace",dt);class ht extends Ot{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(fu(e,this.from,this.gapFrom)||fu(e,this.gapTo,this.to)))return lt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return lt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?lt.fromReplace(e,this.from,this.to,r):lt.fail("Content does not fit in gap")}getMap(){return new Jt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ht(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new ht(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ht(n.from,n.to,n.gapFrom,n.gapTo,ie.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ot.jsonID("replaceAround",ht);function fu(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function sE(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),h=Math.min(c+a.nodeSize,n),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=h:i.push(o=new un(d,h,f[m])));l&&l.to==d?l.to=h:s.push(l=new mr(d,h,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function oE(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof Sa){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let f=a[u],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:f,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new un(o.from,o.to,o.style)))}function df(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,f=r.matchType(c.type);if(!f)o.push(new dt(l,u,ie.empty));else{r=f;for(let d=0;d<c.marks.length;d++)n.allowsMarkType(c.marks[d].type)||t.step(new un(l,u,c.marks[d]));if(i&&c.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(c.text);)p||(p=new ie(W.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new dt(l+d.index,l+d.index+d[0].length,p))}}l=u}if(!r.validEnd){let a=r.fillBefore(W.empty,!0);t.replace(l,l,new ie(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function lE(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ui(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!lE(i,s,o))break}return null}function aE(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=W.empty,f=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=W.from(r.node(p).copy(u)),f++):a--;let d=W.empty,h=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=W.from(i.node(p).copy(d)),h++):c++;t.step(new ht(a,c,o,l,new ie(u.append(d),f,h),u.size-f,!0))}function hf(t,e,n=null,r=t){let i=cE(t,e),s=i&&uE(r,e);return s?i.map(Ph).concat({type:e,attrs:n}).concat(s.map(Ph)):null}function Ph(t){return{type:t,attrs:null}}function cE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function uE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function fE(t,e,n){let r=W.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new ht(i,s,i,s,new ie(r,0,0),n.length,!0))}function dE(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&hE(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&Sy(t,o,l,s),df(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),f=u.map(l,1),d=u.map(l+o.nodeSize,1);return t.step(new ht(f,d,f+1,d-1,new ie(W.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&wy(t,o,l,s),!1}})}function wy(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Sy(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function hE(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function pE(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ht(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ie(W.from(o),0,0),1,!0))}function Jn(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function mE(t,e,n=1,r){let i=t.doc.resolve(e),s=W.empty,o=W.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=W.from(i.node(l).copy(s));let u=r&&r[c];o=W.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new dt(e,e,new ie(s.append(o),n,n),!0))}function _r(t,e){let n=t.resolve(e),r=n.index();return Cy(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function gE(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Cy(t,e){return!!(t&&e&&!t.isLeaf&&gE(t,e))}function Ca(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&Cy(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function yE(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",f=!!o.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Sy(t,u.node(),u.before(),l)}o.inlineContent&&df(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new dt(c,a.map(e+n,-1),ie.empty,!0)),r===!0){let u=t.doc.resolve(c);wy(t,u.node(),u.before(),t.steps.length)}return t}function bE(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Ty(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(a,a,f[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Ta(t,e,n=e,r=ie.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Ey(i,s,r)?new dt(e,n,r):new xE(i,s,r).fit()}function Ey(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class xE{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=W.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new ie(s,o,l);return e>-1?new ht(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new dt(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=ac(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,f=null;if(n==1&&(o?c.matchType(o.type)||(f=c.fillBefore(W.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:f};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ac(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ie(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ac(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new ie(is(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ie(is(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),g=f.matchType(m.type);if(!g)break;c++,(c>1||a==0||m.content.size)&&(f=g,u.push(My(m.mark(d.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?h:-1)))}let p=c==l.childCount;p||(h=-1),this.placed=ss(this.placed,n,W.from(u)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?ie.empty:new ie(is(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new ie(is(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!cc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=cc(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=cc(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ss(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ss(this.placed,this.depth,W.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(W.empty,!0);n.childCount&&(this.placed=ss(this.placed,this.frontier.length,n))}}function is(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(is(t.firstChild.content,e-1,n)))}function ss(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ss(t.lastChild.content,e-1,n)))}function ac(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function My(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,My(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),t.copy(r)}function cc(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!vE(n,s.content,o)?l:null}function vE(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function kE(t){return t.spec.defining||t.spec.definingForContent}function wE(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(Ey(i,s,r))return t.step(new dt(e,n,r));let o=Ny(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?l=d:i.before(d)==h&&o.splice(1,0,-d)}let a=o.indexOf(l),c=[],u=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d],p=kE(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(l)-1)))u=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+a)%o.length],y=!0;g<0&&(y=!1,g=-g);let w=i.node(g-1),N=i.index(g-1);if(w.canReplaceWith(N,N,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new ie(Ay(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=o[d];h<0||(e=i.before(h),n=s.after(h))}}function Ay(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Ay(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(W.empty,!0))}return t}function SE(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=bE(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ie(W.from(r),0,0))}function CE(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=Ny(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function Ny(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Oi extends Ot{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return lt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return lt.fromReplace(e,this.pos,this.pos+1,new ie(W.from(i),0,n.isLeaf?0:1))}getMap(){return Jt.empty}invert(e){return new Oi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Oi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Oi(n.pos,n.attr,n.value)}}Ot.jsonID("attr",Oi);class Us extends Ot{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return lt.ok(r)}getMap(){return Jt.empty}invert(e){return new Us(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Us(n.attr,n.value)}}Ot.jsonID("docAttr",Us);let $i=class extends Error{};$i=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};$i.prototype=Object.create(Error.prototype);$i.prototype.constructor=$i;$i.prototype.name="TransformError";class _y{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ws}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new $i(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ie.empty){let i=Ta(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ie(W.from(r),0,0))}delete(e,n){return this.replace(e,n,ie.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return wE(this,e,n,r),this}replaceRangeWith(e,n,r){return SE(this,e,n,r),this}deleteRange(e,n){return CE(this,e,n),this}lift(e,n){return aE(this,e,n),this}join(e,n=1){return yE(this,e,n),this}wrap(e,n){return fE(this,e,n),this}setBlockType(e,n=e,r,i=null){return dE(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return pE(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Oi(e,n,r)),this}setDocAttribute(e,n){return this.step(new Us(e,n)),this}addNodeMark(e,n){return this.step(new gr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof je)n.isInSet(r.marks)&&this.step(new ri(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ri(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return mE(this,e,n,r),this}addMark(e,n,r){return sE(this,e,n,r),this}removeMark(e,n,r){return oE(this,e,n,r),this}clearIncompatible(e,n,r){return df(this,e,n,r),this}}const uc=Object.create(null);class De{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new TE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ie.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?ie.empty:n),l==0&&Bh(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Bh(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ee(e):bi(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?bi(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):bi(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Yt(e.node(0))}static atStart(e){return bi(e,e,0,0,1)||new Yt(e)}static atEnd(e){return bi(e,e,e.content.size,e.childCount,-1)||new Yt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=uc[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in uc)throw new RangeError("Duplicate use of selection JSON ID "+e);return uc[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ee.between(this.$anchor,this.$head).getBookmark()}}De.prototype.visible=!0;class TE{constructor(e,n){this.$from=e,this.$to=n}}let Lh=!1;function zh(t){!Lh&&!t.parent.inlineContent&&(Lh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ee extends De{constructor(e,n=e){zh(e),zh(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return De.near(r);let i=e.resolve(n.map(this.anchor));return new Ee(i.parent.inlineContent?i:r,r)}replace(e,n=ie.empty){if(super.replace(e,n),n==ie.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ee&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ea(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ee(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=De.findFrom(n,r,!0)||De.findFrom(n,-r,!0);if(s)n=s.$head;else return De.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(De.findFrom(e,-r,!0)||De.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ee(e,n)}}De.jsonID("text",Ee);class Ea{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ea(e.map(this.anchor),e.map(this.head))}resolve(e){return Ee.between(e.resolve(this.anchor),e.resolve(this.head))}}class ve extends De{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?De.near(s):new ve(s)}content(){return new ie(W.from(this.node),0,0)}eq(e){return e instanceof ve&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new pf(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ve(e.resolve(n.anchor))}static create(e,n){return new ve(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ve.prototype.visible=!1;De.jsonID("node",ve);class pf{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ea(r,r):new pf(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ve.isSelectable(r)?new ve(n):De.near(n)}}class Yt extends De{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ie.empty){if(n==ie.empty){e.delete(0,e.doc.content.size);let r=De.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Yt(e)}map(e){return new Yt(e)}eq(e){return e instanceof Yt}getBookmark(){return EE}}De.jsonID("all",Yt);const EE={map(){return this},resolve(t){return new Yt(t)}};function bi(t,e,n,r,i,s=!1){if(e.inlineContent)return Ee.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&ve.isSelectable(l))return ve.create(t,n-(i<0?l.nodeSize:0))}else{let a=bi(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function Bh(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof dt||i instanceof ht))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(De.near(t.doc.resolve(o),n))}const Fh=1,Eo=2,Hh=4;class ME extends _y{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Fh)&~Eo,this.storedMarks=null,this}get selectionSet(){return(this.updated&Fh)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Eo,this}ensureMarks(e){return je.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Eo)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Eo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||je.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(De.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Hh,this}get scrolledIntoView(){return(this.updated&Hh)>0}}function Vh(t,e){return!e||!t?t:t.bind(e)}class ls{constructor(e,n,r){this.name=e,this.init=Vh(n.init,r),this.apply=Vh(n.apply,r)}}const AE=[new ls("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ls("selection",{init(t,e){return t.selection||De.atStart(e.doc)},apply(t){return t.selection}}),new ls("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ls("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class fc{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=AE.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ls(r.key,r.spec.state,r))})}}class wi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new wi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new ME(this)}static create(e){let n=new fc(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new wi(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new fc(this.schema,e.plugins),r=n.fields,i=new wi(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new fc(e.schema,e.plugins),s=new wi(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=xr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=De.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Oy(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Oy(i,e,{})),n[r]=i}return n}class tt{constructor(e){this.spec=e,this.props={},e.props&&Oy(e.props,this,this.props),this.key=e.key?e.key.key:Ry("plugin")}getState(e){return e[this.key]}}const dc=Object.create(null);function Ry(t){return t in dc?t+"$"+ ++dc[t]:(dc[t]=0,t+"$")}class gt{constructor(e="key"){this.key=Ry(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const vt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Pi=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let du=null;const Hn=function(t,e,n){let r=du||(du=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},NE=function(){du=null},ii=function(t,e,n,r){return n&&(jh(t,e,n,r,-1)||jh(t,e,n,r,1))},_E=/^(img|br|input|textarea|hr)$/i;function jh(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:sn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||so(t)||_E.test(t.nodeName)||t.contentEditable=="false")return!1;e=vt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?sn(t):0}else return!1}}function sn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function OE(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=sn(t)}else if(t.parentNode&&!so(t))e=vt(t),t=t.parentNode;else return null}}function RE(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!so(t))e=vt(t)+1,t=t.parentNode;else return null}}function DE(t,e,n){for(let r=e==0,i=e==sn(t);r||i;){if(t==n)return!0;let s=vt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==sn(t)}}function so(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ma=function(t){return t.focusNode&&ii(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Fr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function IE(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $E(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(sn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(sn(r.startContainer),r.startOffset)}}}const Mn=typeof navigator<"u"?navigator:null,Wh=typeof document<"u"?document:null,Or=Mn&&Mn.userAgent||"",hu=/Edge\/(\d+)/.exec(Or),Dy=/MSIE \d/.exec(Or),pu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Or),qt=!!(Dy||pu||hu),kr=Dy?document.documentMode:pu?+pu[1]:hu?+hu[1]:0,hn=!qt&&/gecko\/(\d+)/i.test(Or);hn&&+(/Firefox\/(\d+)/.exec(Or)||[0,0])[1];const mu=!qt&&/Chrome\/(\d+)/.exec(Or),At=!!mu,Iy=mu?+mu[1]:0,Bt=!qt&&!!Mn&&/Apple Computer/.test(Mn.vendor),Li=Bt&&(/Mobile\/\w+/.test(Or)||!!Mn&&Mn.maxTouchPoints>2),rn=Li||(Mn?/Mac/.test(Mn.platform):!1),PE=Mn?/Win/.test(Mn.platform):!1,Un=/Android \d/.test(Or),oo=!!Wh&&"webkitFontSmoothing"in Wh.documentElement.style,LE=oo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zE(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function $n(t,e){return typeof t=="number"?t:t[e]}function BE(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Uh(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Pi(o);continue}let l=o,a=l==s.body,c=a?zE(s):BE(l),u=0,f=0;if(e.top<c.top+$n(r,"top")?f=-(c.top-e.top+$n(i,"top")):e.bottom>c.bottom-$n(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+$n(i,"top")-c.top:e.bottom-c.bottom+$n(i,"bottom")),e.left<c.left+$n(r,"left")?u=-(c.left-e.left+$n(i,"left")):e.right>c.right-$n(r,"right")&&(u=e.right-c.right+$n(i,"right")),u||f)if(a)s.defaultView.scrollBy(u,f);else{let h=l.scrollLeft,p=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let m=l.scrollLeft-h,g=l.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let d=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:Pi(o)}}function FE(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:$y(t.dom)}}function $y(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Pi(r));return e}function HE({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Py(n,r==0?0:r-e)}function Py(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let pi=null;function VE(t){if(t.setActive)return t.setActive();if(pi)return t.focus(pi);let e=$y(t);t.focus(pi==null?{get preventScroll(){return pi={preventScroll:!0},!0}}:void 0),pi||(pi=!1,Py(e,0))}function Ly(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Hn(u).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?jE(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Ly(n,i)}function jE(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=sr(r,1);if(s.top!=s.bottom&&mf(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function mf(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function WE(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function UE(t,e,n){let{node:r,offset:i}=Ly(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function KE(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function zy(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(mf(e,c))return zy(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function qE(t,e){let n=t.dom.ownerDocument,r,i=0,s=$E(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!mf(e,c)||(o=zy(t.dom,e,c),!o))return null}if(Bt)for(let c=o;r&&c;c=Pi(c))c.draggable&&(r=void 0);if(o=WE(o,e),r){if(hn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;oo&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=KE(t,r,i,e))}l==null&&(l=UE(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Kh(t){return t.top<t.bottom||t.left<t.right}function sr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Kh(r))return r}return Array.prototype.find.call(n,Kh)||t.getBoundingClientRect()}const JE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function By(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=oo||hn;if(r.nodeType==3)if(o&&(JE.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=sr(Hn(r,i,i),n);if(hn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=sr(Hn(r,i-1,i-1),-1);if(c.top==a.top){let u=sr(Hn(r,i,i+1),-1);if(u.top!=a.top)return Xi(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,Xi(sr(Hn(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==sn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return hc(a.getBoundingClientRect(),!1)}if(s==null&&i<sn(r)){let a=r.childNodes[i];if(a.nodeType==1)return hc(a.getBoundingClientRect(),!0)}return hc(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==sn(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Hn(a,sn(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return Xi(sr(c,1),!1)}if(s==null&&i<sn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Hn(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return Xi(sr(c,-1),!0)}return Xi(sr(r.nodeType==3?Hn(r):r,-n),n>=0)}function Xi(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function hc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Fy(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function GE(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Fy(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=By(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Hn(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const YE=/[\u0590-\u08ac]/;function XE(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!YE.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:Fy(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(u,f),a&&(a!=u||c!=f)&&l.extend&&l.extend(a,c)}catch{}return d!=null&&(l.caretBidiLevel=d),g}):r.pos==r.start()||r.pos==r.end()}let qh=null,Jh=null,Gh=!1;function QE(t,e,n){return qh==e&&Jh==n?Gh:(qh=e,Jh=n,Gh=n=="up"||n=="down"?GE(t,e,n):XE(t,e,n))}const ln=0,Yh=1,Vr=2,An=3;class lo{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ln,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>vt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Vy){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Hy&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?vt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?vt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=vt(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=vt(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],g=p+m.size;if(s>p&&o<g)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=g}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((hn||Bt)&&e==n){let{node:h,offset:p}=l;if(h.nodeType==3){if(f=!!(p&&h.nodeValue[p-1]==`
`),f&&p==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:vt(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=h.childNodes[p-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(hn&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&Bt)&&ii(l.node,l.offset,u.anchorNode,u.anchorOffset)&&ii(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==n)&&!f){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Vr:Yh,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=An:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Vr:An}r=o}this.dirty=Vr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Vr:Yh;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Hy extends lo{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ln&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ZE extends lo{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class si extends lo{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=ci.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new si(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&An||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=An&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ln){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ln}}slice(e,n,r){let i=si.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=yu(s,n,o,r)),e>0&&(s=yu(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class wr extends lo{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=ci.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=Uy(u,r,n),c?a=new eM(e,n,r,i,u,f||null,d,c,s,o+1):n.isText?new Aa(e,n,r,i,u,d,s):new wr(e,n,r,i,u,f||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,n,r){return this.dirty==ln&&e.eq(this.node)&&gl(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new nM(this,o&&o.node,e);sM(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&a.syncToMarks(u==this.node.childCount?je.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,f,d)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,u,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,f,h,e)||a.updateNextNode(c,u,f,e,d,i)||a.addNode(c,u,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Vr)&&(o&&this.protectLocalComposition(e,o),jy(this.contentDOM,this.children,e),Li&&oM(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ee)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=lM(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new ZE(this,s,n,i);e.input.compositionNodes.push(o),this.children=yu(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==An||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ln}updateOuterDeco(e){if(gl(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Wy(this.dom,this.nodeDOM,gu(this.outerDeco,this.node,n),gu(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Xh(t,e,n,r,i){Uy(r,e,t);let s=new wr(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Aa extends wr{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==An||this.dirty!=ln&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ln||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ln,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Aa(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=An)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Vy extends lo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ln&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class eM extends wr{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==An)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function jy(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=Qh(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof si){let a=r?r.previousSibling:t.lastChild;jy(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=Qh(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const bs=function(t){t&&(this.nodeName=t)};bs.prototype=Object.create(null);const jr=[new bs];function gu(t,e,n){if(t.length==0)return jr;let r=n?jr[0]:new bs,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new bs(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new bs(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Wy(t,e,n,r){if(n==jr&&r==jr)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=jr[0]),i=a}tM(i,l||jr[0],o)}return i}function tM(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Uy(t,e,n){return Wy(t,t,jr,gu(e,n,t.nodeType!=1))}function gl(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Qh(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class nM{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=rM(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ln,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=si.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==An&&o.dom==o.contentDOM&&(o.dirty=Vr),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof wr){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,f,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=An&&gl(n,a.outerDeco));if(!d&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Vr,f.updateChildren(i,o+1),f.dirty=ln),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!gl(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=wr.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=wr.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Hy(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof si;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Aa)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Bt||At)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Vy(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function rM(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof si)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function iM(t,e){return t.type.side-e.type.side}function sM(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,f;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(f||(f=[u])).push(g):u=g)}if(u)if(f){f.sort(iM);for(let g=0;g<f.length;g++)n(f[g],c,!!a)}else n(u,c,!!a);let d,h;if(a)h=-1,d=a,a=null;else if(c<t.childCount)h=c,d=t.child(c++);else break;for(let g=0;g<l.length;g++)l[g].to<=s&&l.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<l.length;y++)l[y].to<g&&(g=l[y].to);g<p&&(a=d.cut(g-s),d=d.cut(0,g-s),p=g,h=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?l.filter(g=>!g.inline):l.slice();r(d,m,e.forChild(s,d),h),s=p}}function oM(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function lM(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function yu(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function gf(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(Ma(n)){for(a=o;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&ve.isSelectable(f)&&i.parent&&!(f.isInline&&DE(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new ve(o==d?l:r.resolve(d))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=o,d=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[a,o]=d==t.state.selection.anchor?[d,f]:[f,d],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let f=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=yf(t,u,l,f)}return c}function Ky(t){return t.editable?t.hasFocus():Jy(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Gn(t,e=!1){let n=t.state.selection;if(qy(t,n),!!Ky(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&At){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ii(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)cM(t);else{let{anchor:r,head:i}=n,s,o;Zh&&!(n instanceof Ee)&&(n.$from.parent.inlineContent||(s=ep(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=ep(t,n.to))),t.docView.setSelection(r,i,t,e),Zh&&(s&&tp(s),o&&tp(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&aM(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Zh=Bt||At&&Iy<63;function ep(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Bt&&i&&i.contentEditable=="false")return pc(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return pc(i);if(s)return pc(s)}}function pc(t){return t.contentEditable="true",Bt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function tp(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function aM(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Ky(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function cM(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,vt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&qt&&kr<=11&&(r.disabled=!0,r.disabled=!1)}function qy(t,e){if(e instanceof ve){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(np(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else np(t)}function np(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function yf(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ee.between(e,n,r)}function rp(t){return t.editable&&!t.hasFocus()?!1:Jy(t)}function Jy(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function uM(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ii(e.node,e.offset,n.anchorNode,n.anchorOffset)}function bu(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&De.findFrom(s,e)}function ur(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ip(t,e,n){let r=t.state.selection;if(r instanceof Ee)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ur(t,new Ee(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=bu(t.state,e);return i&&i instanceof ve?ur(t,i):!1}else if(!(rn&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?ve.isSelectable(s)?ur(t,new ve(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):oo?ur(t,new Ee(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ve&&r.node.isInline)return ur(t,new Ee(e>0?r.$to:r.$from));{let i=bu(t.state,e);return i?ur(t,i):!1}}}function yl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function mi(t,e){return e<0?fM(t):dM(t)}function fM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(hn&&n.nodeType==1&&r<yl(n)&&xs(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(xs(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Gy(n))break;{let l=n.previousSibling;for(;l&&xs(l,-1);)i=n.parentNode,s=vt(l),l=l.previousSibling;if(l)n=l,r=yl(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?xu(t,n,r):i&&xu(t,i,s)}function dM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=yl(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(xs(l,1))s=n,o=++r;else break}else{if(Gy(n))break;{let l=n.nextSibling;for(;l&&xs(l,1);)s=l.parentNode,o=vt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=yl(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&xu(t,s,o)}function Gy(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function hM(t,e){for(;t&&e==t.childNodes.length&&!so(t);)e=vt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function pM(t,e){for(;t&&!e&&!so(t);)e=vt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function xu(t,e,n){if(e.nodeType!=3){let s,o;(o=hM(e,n))?(e=o,n=0):(s=pM(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ma(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Gn(t)},50)}function sp(t,e){let n=t.state.doc.resolve(e);if(!(At||PE)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function op(t,e,n){let r=t.state.selection;if(r instanceof Ee&&!r.empty||n.indexOf("s")>-1||rn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=bu(t.state,e);if(o&&o instanceof ve)return ur(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Yt?De.near(o,e):De.findFrom(o,e);return l?ur(t,l):!1}return!1}function lp(t,e){if(!(t.state.selection instanceof Ee))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function ap(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function mM(t){if(!Bt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ap(t,r,"true"),setTimeout(()=>ap(t,r,"false"),20)}return!1}function gM(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function yM(t,e){let n=e.keyCode,r=gM(e);if(n==8||rn&&n==72&&r=="c")return lp(t,-1)||mi(t,-1);if(n==46&&!e.shiftKey||rn&&n==68&&r=="c")return lp(t,1)||mi(t,1);if(n==13||n==27)return!0;if(n==37||rn&&n==66&&r=="c"){let i=n==37?sp(t,t.state.selection.from)=="ltr"?-1:1:-1;return ip(t,i,r)||mi(t,i)}else if(n==39||rn&&n==70&&r=="c"){let i=n==39?sp(t,t.state.selection.from)=="ltr"?1:-1:1;return ip(t,i,r)||mi(t,i)}else{if(n==38||rn&&n==80&&r=="c")return op(t,-1,r)||mi(t,-1);if(n==40||rn&&n==78&&r=="c")return mM(t)||op(t,1,r)||mi(t,1);if(r==(rn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function bf(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||ci.fromSchema(t.state.schema),l=t0(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=e0[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=l.createElement(u[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function Yy(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new ie(W.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ie.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)l=f;else{let d=i.marks(),{schema:h}=t.state,p=ci.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),o=kM(n),oo&&wM(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||vr.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!bM.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)l=SM(cp(l,+u[1],+u[2]),u[4]);else if(l=ie.maxOpen(xM(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;d<l.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);l=cp(l,f,d)}return t.someProp("transformPasted",f=>{l=f(l,t)}),l}const bM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xM(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&Qy(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Zy(o[o.length-1],s.length));let u=Xy(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return W.from(o)}return t}function Xy(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,W.from(t));return t}function Qy(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Qy(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(W.from(Xy(n,t,i+1))))}}function Zy(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Zy(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(W.empty,!0);return t.copy(n.append(r))}function vu(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=vu(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(W.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function cp(t,e,n){return e<t.openStart&&(t=new ie(vu(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ie(vu(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const e0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let up=null;function t0(){return up||(up=document.implementation.createHTMLDocument("title"))}let mc=null;function vM(t){let e=window.trustedTypes;return e?(mc||(mc=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),mc.createHTML(t)):t}function kM(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=t0().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&e0[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=vM(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function wM(t){let e=t.querySelectorAll(At?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function SM(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=W.from(a.create(r[l+1],i)),s++,o++}return new ie(i,s,o)}const Ft={},Ht={},CM={touchstart:!0,touchmove:!0};class TM{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function EM(t){for(let e in Ft){let n=Ft[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{AM(t,r)&&!xf(t,r)&&(t.editable||!(r.type in Ht))&&n(t,r)},CM[e]?{passive:!0}:void 0)}Bt&&t.dom.addEventListener("input",()=>null),ku(t)}function yr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function MM(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ku(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>xf(t,r))})}function xf(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function AM(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function NM(t,e){!xf(t,e)&&Ft[e.type]&&(t.editable||!(e.type in Ht))&&Ft[e.type](t,e)}Ht.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!r0(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Un&&At&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Li&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Fr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||yM(t,n)?n.preventDefault():yr(t,"key")};Ht.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ht.keypress=(t,e)=>{let n=e;if(r0(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||rn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ee)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function Na(t){return{left:t.clientX,top:t.clientY}}function _M(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function vf(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Ri(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function OM(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ve.isSelectable(r)?(Ri(t,new ve(n)),!0):!1}function RM(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ve&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(ve.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Ri(t,ve.create(t.state.doc,i)),!0):!1}function DM(t,e,n,r,i){return vf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?RM(t,n):OM(t,n))}function IM(t,e,n,r){return vf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function $M(t,e,n,r){return vf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||PM(t,n,r)}function PM(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ri(t,Ee.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Ri(t,Ee.create(r,l+1,l+1+o.content.size));else if(ve.isSelectable(o))Ri(t,ve.create(r,l));else continue;return!0}}function kf(t){return bl(t)}const n0=rn?"metaKey":"ctrlKey";Ft.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=kf(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&_M(n,t.input.lastClick)&&!n[n0]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(Na(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new LM(t,o,n,!!r)):(s=="doubleClick"?IM:$M)(t,o.pos,o.inside,n)?n.preventDefault():yr(t,"pointer"))};class LM{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[n0],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof ve&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&hn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),yr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Na(e))),this.updateAllowDefault(e),this.allowDefault||!n?yr(this.view,"pointer"):DM(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Bt&&this.mightDrag&&!this.mightDrag.node.isAtom||At&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ri(this.view,De.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):yr(this.view,"pointer")}move(e){this.updateAllowDefault(e),yr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ft.touchstart=t=>{t.input.lastTouch=Date.now(),kf(t),yr(t,"pointer")};Ft.touchmove=t=>{t.input.lastTouch=Date.now(),yr(t,"pointer")};Ft.contextmenu=t=>kf(t);function r0(t,e){return t.composing?!0:Bt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const zM=Un?5e3:-1;Ht.compositionstart=Ht.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ee&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),bl(t,!0),t.markCursor=null;else if(bl(t,!e.selection.empty),hn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}i0(t,zM)};Ht.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,i0(t,20))};function i0(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>bl(t),e))}function s0(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=FM());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function BM(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=OE(e.focusNode,e.focusOffset),r=RE(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function FM(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function bl(t,e=!1){if(!(Un&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),s0(t),e||t.docView&&t.docView.dirty){let n=gf(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function HM(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ks=qt&&kr<15||Li&&LE<604;Ft.copy=Ht.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Ks?null:n.clipboardData,o=r.content(),{dom:l,text:a}=bf(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):HM(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function VM(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function jM(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?qs(t,r.value,null,i,e):qs(t,r.textContent,r.innerHTML,i,e)},50)}function qs(t,e,n,r,i){let s=Yy(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||ie.empty)))return!0;if(!s)return!1;let o=VM(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function o0(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ht.paste=(t,e)=>{let n=e;if(t.composing&&!Un)return;let r=Ks?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&qs(t,o0(r),r.getData("text/html"),i,n)?n.preventDefault():jM(t,n)};class l0{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const WM=rn?"altKey":"ctrlKey";function a0(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[WM]}Ft.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Na(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ve?i.to-1:i.to))){if(r&&r.mightDrag)o=ve.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=ve.create(t.state.doc,f.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=bf(t,l);(!n.dataTransfer.files.length||!At||Iy>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ks?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ks||n.dataTransfer.setData("text/plain",c),t.dragging=new l0(u,a0(t,n),o)};Ft.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ht.dragover=Ht.dragenter=(t,e)=>e.preventDefault();Ht.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Na(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=Yy(t,o0(n.dataTransfer),Ks?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&a0(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||ie.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?Ty(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=t.state.tr;if(l){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(a),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(f?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let h=c.doc.resolve(u);if(f&&ve.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new ve(h));else{let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,w)=>p=w),c.setSelection(yf(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Ft.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Gn(t)},20))};Ft.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ft.beforeinput=(t,e)=>{if(At&&Un&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Fr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ht)Ft[t]=Ht[t];function Js(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class xl{constructor(e,n){this.toDOM=e,this.spec=n||Xr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Lt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof xl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Js(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Sr{constructor(e,n){this.attrs=e,this.spec=n||Xr}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Lt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Sr&&Js(this.attrs,e.attrs)&&Js(this.spec,e.spec)}static is(e){return e.type instanceof Sr}destroy(){}}class wf{constructor(e,n){this.attrs=e,this.spec=n||Xr}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Lt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof wf&&Js(this.attrs,e.attrs)&&Js(this.spec,e.spec)}destroy(){}}class Lt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Lt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Lt(e,e,new xl(n,r))}static inline(e,n,r,i){return new Lt(e,n,new Sr(r,i))}static node(e,n,r,i){return new Lt(e,n,new wf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Sr}get widget(){return this.type instanceof xl}}const xi=[],Xr={};class Ge{constructor(e,n){this.local=e.length?e:xi,this.children=n.length?n:xi}static create(e,n){return n.length?vl(n,e,0,Xr):St}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==St||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Xr)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?UM(this.children,o||[],e,n,r,i,s):o?new Ge(o.sort(Qr),xi):St}add(e,n){return n.length?this==St?Ge.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=u0(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,vl(u,l,c+1,Xr)),s+=3}});let o=c0(s?f0(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Ge(o.length?this.local.concat(o).sort(Qr):this.local,i||this.children)}remove(e){return e.length==0||this==St?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<a&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=St?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ge(i,r):St}forChild(e,n){if(this==St)return this;if(n.isLeaf)return Ge.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Sr){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Ge(i.sort(Qr),xi);return r?new hr([l,r]):l}return r||St}eq(e){if(this==e)return!0;if(!(e instanceof Ge)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Sf(this.localsInner(e))}localsInner(e){if(this==St)return xi;if(e.inlineContent||!this.local.some(Sr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Sr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ge.empty=new Ge([],[]);Ge.removeOverlap=Sf;const St=Ge.empty;class hr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Xr));return hr.from(r)}forChild(e,n){if(n.isLeaf)return Ge.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=St&&(s instanceof hr?r=r.concat(s.members):r.push(s))}return hr.from(r)}eq(e){if(!(e instanceof hr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Sf(r?n:n.sort(Qr)):xi}static from(e){switch(e.length){case 0:return St;case 1:return e[0];default:return new hr(e.every(n=>n instanceof Ge)?e:e.reduce((n,r)=>n.concat(r instanceof Ge?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function UM(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((d,h,p,m)=>{let g=m-p-(h-d);for(let y=0;y<l.length;y+=3){let w=l[y+1];if(w<0||d>w+u-f)continue;let N=l[y]+u-f;h>=N?l[y+1]=d<=N?-2:-1:d>=u&&g&&(l[y]+=g,l[y+1]+=g)}f+=g}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),f=u-i;if(f<0||f>=r.content.size){a=!0;continue}let d=n.map(t[c+1]+s,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),g=r.maybeChild(p);if(g&&m==f&&m+g.nodeSize==h){let y=l[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=St?(l[c]=f,l[c+1]=h,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=KM(l,t,e,n,i,s,o),u=vl(c,r,0,o);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<l.length&&l[d]<h;)d+=3;l.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Ge(e.sort(Qr),l)}function c0(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Lt(i.from+e,i.to+e,i.type))}return n}function KM(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let f=a.local[u].map(r,i,c);f?n.push(f):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function u0(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function f0(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function vl(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=u0(t,l,a+n);if(c){s=!0;let u=vl(c,l,n+a+1,r);u!=St&&i.push(a,a+l.nodeSize,u)}});let o=c0(s?f0(t):t,-n).sort(Qr);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ge(o,i):St}function Qr(t,e){return t.from-e.from||t.to-e.to}function Sf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),fp(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),fp(e,i,r.copy(s.from,r.to)));break}}}return e}function fp(t,e,n){for(;e<t.length&&Qr(n,t[e])>0;)e++;t.splice(e,0,n)}function gc(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=St&&e.push(r)}),t.cursorWrapper&&e.push(Ge.create(t.state.doc,[t.cursorWrapper.deco])),hr.from(e)}const qM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},JM=qt&&kr<=11;class GM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class YM{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new GM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);qt&&kr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),JM&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(rp(this.view)){if(this.suppressingSelectionUpdates)return Gn(this.view);if(qt&&kr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ii(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Pi(s))n.add(s);for(let s=e.anchorNode;s;s=Pi(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&rp(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],a);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(hn&&a.length){let u=a.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,d]=u;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of u){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||ZM(e,f)!=h)&&d.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ma(r)&&(c=gf(e))&&c.eq(De.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gn(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),XM(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(qt&&kr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?vt(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?vt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let dp=new WeakMap,hp=!1;function XM(t){if(!dp.has(t)&&(dp.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=hn,hp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),hp=!0}}function pp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ii(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function QM(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return pp(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?pp(t,n):null}function ZM(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function eA(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Ma(a)||c.push({node:a.focusNode,offset:a.focusOffset})),At&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){s=g;break}if(!w||w.size)break}let f=t.state.doc,d=t.someProp("domParser")||vr.fromSchema(t.state.schema),h=f.resolve(o),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:tA,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:l}}function tA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Bt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Bt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const nA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function rA(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=gf(t,C);if(_&&!t.state.selection.eq(_)){if(At&&Un&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",Y=>Y(t,Fr(13,"Enter"))))return;let j=t.state.tr.setSelection(_);C=="pointer"?j.setMeta("pointer",!0):C=="key"&&j.scrollIntoView(),s&&j.setMeta("composition",s),t.dispatch(j)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=eA(t,e,n),u=t.state.doc,f=u.slice(c.from,c.to),d,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=oA(f.content,c.doc.content,c.from,d,h);if(p&&t.input.domChangeCount++,(Li&&t.input.lastIOSEnter>Date.now()-225||Un)&&i.some(C=>C.nodeType==1&&!nA.test(C.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",C=>C(t,Fr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof Ee&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=mp(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let _=t.state.tr.setSelection(C);s&&_.setMeta("composition",s),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Ee&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),qt&&kr<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),w=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,N;if((Li&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"",""))&&(N=De.findFrom(c.doc.resolve(m.pos+1),1,!0))&&N.head>m.pos)&&t.someProp("handleKeyDown",C=>C(t,Fr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&sA(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",C=>C(t,Fr(8,"Backspace")))){Un&&At&&t.domObserver.suppressSelectionUpdates();return}At&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Un&&!w&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Fr(13,"Enter"))})},20));let v=p.start,E=p.endA,B=C=>{let _=C||t.state.tr.replace(v,E,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let j=mp(t,_.doc,c.sel);j&&!(At&&t.composing&&j.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(j.head==v||j.head==_.mapping.map(E)-1)||qt&&j.empty&&j.head==v)&&_.setSelection(j)}return s&&_.setMeta("composition",s),_.scrollIntoView()},$;if(w){if(m.pos==g.pos){qt&&kr<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gn(t),20));let C=B(t.state.tr.delete(v,E)),_=u.resolve(p.start).marksAcross(u.resolve(p.endA));_&&C.ensureMarks(_),t.dispatch(C)}else if(p.endA==p.endB&&($=iA(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let C=B(t.state.tr);$.type=="add"?C.addMark(v,E,$.mark):C.removeMark(v,E,$.mark),t.dispatch(C)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,g.parentOffset),_=()=>B(t.state.tr.insertText(C,v,E));t.someProp("handleTextInput",j=>j(t,v,E,C,_))||t.dispatch(_())}}else t.dispatch(B())}function mp(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:yf(t,e.resolve(n.anchor),e.resolve(n.head))}function iA(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(W.from(c).eq(t))return{mark:l,type:o}}function sA(t,e,n,r,i){if(n-e<=i.pos-r.pos||yc(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(yc(s,!0,!0));return!o.parent.isTextblock||o.pos>n||yc(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function yc(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function oA(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&gp(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&gp(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function gp(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class d0{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new TM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(kp),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xp(this),bp(this),this.nodeViews=vp(this),this.docView=Xh(this.state.doc,yp(this),gc(this),this.dom,this),this.domObserver=new YM(this,(r,i,s,o)=>rA(this,r,i,s,o)),this.domObserver.start(),EM(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ku(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(kp),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(s0(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=vp(this);aA(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&ku(this),this.editable=xp(this),bp(this);let a=gc(this),c=yp(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,c,a);(f||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&FE(this);if(o){this.domObserver.stop();let h=f&&(qt||At)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&lA(i.selection,e.selection);if(f){let p=At?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=BM(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Xh(e.doc,c,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&uM(this))?Gn(this,h):(qy(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&HE(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ve){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Uh(this,n.getBoundingClientRect(),e)}else Uh(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new l0(e.slice,e.move,i<0?void 0:ve.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(qt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&VE(this.dom),Gn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return qE(this,e)}coordsAtPos(e,n=1){return By(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return QE(this,n||this.state,e)}pasteHTML(e,n){return qs(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return qs(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return bf(this,e)}destroy(){this.docView&&(MM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,NE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return NM(this,e)}domSelectionRange(){let e=this.domSelection();return e?Bt&&this.root.nodeType===11&&IE(this.dom.ownerDocument)==this.dom&&QM(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}d0.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function yp(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Lt.node(0,t.state.doc.content.size,e)]}function bp(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Lt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function xp(t){return!t.someProp("editable",e=>e(t.state)===!1)}function lA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function vp(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function aA(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function kp(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Mr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cA=typeof navigator<"u"&&/Mac/.test(navigator.platform),uA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kt=0;kt<10;kt++)Mr[48+kt]=Mr[96+kt]=String(kt);for(var kt=1;kt<=24;kt++)Mr[kt+111]="F"+kt;for(var kt=65;kt<=90;kt++)Mr[kt]=String.fromCharCode(kt+32),kl[kt]=String.fromCharCode(kt);for(var bc in Mr)kl.hasOwnProperty(bc)||(kl[bc]=Mr[bc]);function fA(t){var e=cA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||uA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?kl:Mr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const dA=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),hA=typeof navigator<"u"&&/Win/.test(navigator.platform);function pA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))dA?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function mA(t){let e=Object.create(null);for(let n in t)e[pA(n)]=t[n];return e}function xc(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function gA(t){return new tt({props:{handleKeyDown:h0(t)}})}function h0(t){let e=mA(t);return function(n,r){let i=fA(r),s,o=e[xc(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[xc(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(hA&&r.ctrlKey&&r.altKey)&&(s=Mr[r.keyCode])&&s!=i){let l=e[xc(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Cf=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function p0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const m0=(t,e,n)=>{let r=p0(t,n);if(!r)return!1;let i=Tf(r);if(!i){let o=r.blockRange(),l=o&&Ui(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(C0(t,i,e,-1))return!0;if(r.parent.content.size==0&&(zi(s,"end")||ve.isSelectable(s)))for(let o=r.depth;;o--){let l=Ta(t.doc,r.before(o),r.after(o),ie.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(zi(s,"end")?De.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):ve.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},yA=(t,e,n)=>{let r=p0(t,n);if(!r)return!1;let i=Tf(r);return i?g0(t,i,e):!1},bA=(t,e,n)=>{let r=b0(t,n);if(!r)return!1;let i=Ef(r);return i?g0(t,i,e):!1};function g0(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Ta(t.doc,s,a,ie.empty);if(!c||c.from!=s||c instanceof dt&&c.slice.size>=a-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Ee.create(u.doc,s)),n(u.scrollIntoView())}return!0}function zi(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const y0=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Tf(r)}let o=s&&s.nodeBefore;return!o||!ve.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ve.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Tf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function b0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const x0=(t,e,n)=>{let r=b0(t,n);if(!r)return!1;let i=Ef(r);if(!i)return!1;let s=i.nodeAfter;if(C0(t,i,e,1))return!0;if(r.parent.content.size==0&&(zi(s,"start")||ve.isSelectable(s))){let o=Ta(t.doc,r.before(),r.after(),ie.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(zi(s,"start")?De.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):ve.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},v0=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Ef(r)}let o=s&&s.nodeAfter;return!o||!ve.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ve.create(t.doc,s.pos)).scrollIntoView()),!0)};function Ef(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const xA=(t,e)=>{let n=t.selection,r=n instanceof ve,i;if(r){if(n.node.isTextblock||!_r(t.doc,n.from))return!1;i=n.from}else if(i=Ca(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(ve.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},vA=(t,e)=>{let n=t.selection,r;if(n instanceof ve){if(n.node.isTextblock||!_r(t.doc,n.to))return!1;r=n.to}else if(r=Ca(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},kA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ui(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},k0=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Mf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const wA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Mf(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(De.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},w0=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Yt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Mf(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Ee.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},S0=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Jn(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ui(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function SA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ve&&e.selection.node.isBlock)return!r.parentOffset||!Jn(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=Mf(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),s.unshift(a&&l?{type:l}:null),o=h;break}else{if(h==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Ee||e.selection instanceof Yt)&&u.deleteSelection();let f=u.mapping.map(r.pos),d=Jn(u.doc,f,s.length,s);if(d||(s[0]=l?{type:l}:null,d=Jn(u.doc,f,s.length,s)),!d)return!1;if(u.split(f,s.length,s),!a&&c&&r.node(o).type!=l){let h=u.mapping.map(r.before(o)),p=u.doc.resolve(h);l&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const CA=SA(),TA=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(ve.create(t.doc,i))),!0)};function EA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||_r(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function C0(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&EA(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,p=W.empty;for(let y=o.length-1;y>=0;y--)p=W.from(o[y].create(null,p));p=W.from(i.copy(p));let m=t.tr.step(new ht(e.pos-1,h,e.pos,h,new ie(p,1,0),o.length,!0)),g=m.doc.resolve(h+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&_r(m.doc,g.pos)&&m.join(g.pos),n(m.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:De.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),d=f&&Ui(f);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(f,d).scrollIntoView()),!0;if(c&&zi(s,"start",!0)&&zi(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let y=W.empty;for(let N=p.length-1;N>=0;N--)y=W.from(p[N].copy(y));let w=t.tr.step(new ht(e.pos-p.length,e.pos+s.nodeSize,e.pos+g,e.pos+s.nodeSize-g,new ie(y,p.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function T0(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ee.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const MA=T0(-1),AA=T0(1);function NA(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&hf(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function wp(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}function Af(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Af(Cf,m0,y0);Af(Cf,x0,v0);Af(k0,w0,S0,CA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function _A(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return OA(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function OA(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=o.resolve(e.start-2);s=new pl(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new pl(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=hf(s,n,r,e);return l?(t&&RA(t,e,l,i,n),!0):!1}function RA(t,e,n,r,i){let s=W.empty;for(let u=n.length-1;u>=0;u--)s=W.from(n[u].type.create(n[u].attrs,s));t.step(new ht(e.start-(r?2:0),e.end,e.start,e.end,new ie(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&Jn(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function DA(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?IA(e,n,t,s):$A(e,n,s):!0:!1}}function IA(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new ht(s-1,o,s,o,new ie(W.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new pl(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Ui(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return _r(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function $A(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?W.empty:W.from(i))))return!1;let f=s.pos,d=f+o.nodeSize;return r.step(new ht(f-(l?1:0),d+(a?1:0),f+1,d-1,new ie((l?W.empty:W.from(i.copy(W.empty))).append(a?W.empty:W.from(i.copy(W.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function PA(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=W.from(c?t.create():null),f=new ie(W.from(t.create(null,W.from(l.type.create(null,u)))),c?3:1,0),d=s.start,h=s.end;n(e.tr.step(new ht(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}var LA=Object.defineProperty,E0=(t,e)=>{for(var n in e)LA(t,n,{get:e[n],enumerable:!0})};function _a(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Oa=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...c)=>{const u=l(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!t,a=t||i.tr,c=()=>(!l&&e&&!a.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(a),o.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(n).map(([f,d])=>[f,(...p)=>{const m=this.buildProps(a,e),g=d(...p)(m);return o.push(g),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>a(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:_a({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,a])=>[l,(...c)=>a(...c)(o)]))}};return o}},zA=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function M0(t,e){const n=new _y(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var A0=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&A0(r)}return t};function Mo(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return A0(n)}function Gs(t,e,n){if(t instanceof xr||t instanceof W)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return W.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Gs("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new py({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?vr.fromSchema(a).parseSlice(Mo(t),n.parseOptions):vr.fromSchema(a).parse(Mo(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=vr.fromSchema(e);return n.slice?s.parseSlice(Mo(t),n.parseOptions).content:s.parse(Mo(t),n.parseOptions)}return Gs("",e,n)}function wu(t,e,n={},r={}){return Gs(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function BA(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function FA(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function HA(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ra(t){return e=>HA(e.$from,t)}function be(t,e,n){return t.config[e]===void 0&&t.parent?be(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?be(t.parent,e,n):null}):t.config[e]}function Nf(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=be(e,"addExtensions",n);return r?[e,...Nf(r())]:e}).flat(10)}function _f(t,e){const n=ci.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function N0(t){return typeof t=="function"}function Fe(t,e=void 0,...n){return N0(t)?e?t.bind(e)(...n):t(...n):t}function VA(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ys(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function _0(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ys(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=be(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=be(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,f])=>{const d={...s,...f};typeof d?.default=="function"&&(d.default=d.default()),d?.isRequired&&d?.default===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function at(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[f,d]=u.split(":").map(h=>h.trim());c.set(f,d)}),l.forEach(u=>{const[f,d]=u.split(":").map(h=>h.trim());c.set(f,d)}),r[i]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[i]=s}),r},{})}function wl(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>at(n,r),{})}function jA(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Sp(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):jA(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function Cp(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&VA(n)?!1:n!=null))}function WA(t,e){var n;const r=_0(t),{nodeExtensions:i,markExtensions:s}=Ys(t),o=(n=i.find(c=>be(c,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,w)=>{const N=be(w,"extendNodeSchema",f);return{...y,...N?N(c):{}}},{}),h=Cp({...d,content:Fe(be(c,"content",f)),marks:Fe(be(c,"marks",f)),group:Fe(be(c,"group",f)),inline:Fe(be(c,"inline",f)),atom:Fe(be(c,"atom",f)),selectable:Fe(be(c,"selectable",f)),draggable:Fe(be(c,"draggable",f)),code:Fe(be(c,"code",f)),whitespace:Fe(be(c,"whitespace",f)),linebreakReplacement:Fe(be(c,"linebreakReplacement",f)),defining:Fe(be(c,"defining",f)),isolating:Fe(be(c,"isolating",f)),attrs:Object.fromEntries(u.map(y=>{var w,N;return[y.name,{default:(w=y?.attribute)==null?void 0:w.default,validate:(N=y?.attribute)==null?void 0:N.validate}]}))}),p=Fe(be(c,"parseHTML",f));p&&(h.parseDOM=p.map(y=>Sp(y,u)));const m=be(c,"renderHTML",f);m&&(h.toDOM=y=>m({node:y,HTMLAttributes:wl(y,u)}));const g=be(c,"renderText",f);return g&&(h.toText=g),[c.name,h]})),a=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const w=be(y,"extendMarkSchema",f);return{...g,...w?w(c):{}}},{}),h=Cp({...d,inclusive:Fe(be(c,"inclusive",f)),excludes:Fe(be(c,"excludes",f)),group:Fe(be(c,"group",f)),spanning:Fe(be(c,"spanning",f)),code:Fe(be(c,"code",f)),attrs:Object.fromEntries(u.map(g=>{var y,w;return[g.name,{default:(y=g?.attribute)==null?void 0:y.default,validate:(w=g?.attribute)==null?void 0:w.validate}]}))}),p=Fe(be(c,"parseHTML",f));p&&(h.parseDOM=p.map(g=>Sp(g,u)));const m=be(c,"renderHTML",f);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:wl(g,u)})),[c.name,h]}));return new py({topNode:o,nodes:l,marks:a})}function UA(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Of(t){return t.sort((n,r)=>{const i=be(n,"priority")||100,s=be(r,"priority")||100;return i>s?-1:i<s?1:0})}function O0(t){const e=Of(Nf(t)),n=UA(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function R0(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,f)=>{var d;a.isBlock&&c>r&&(l+=s);const h=o?.[a.type.name];if(h)return u&&(l+=h({node:a,pos:c,parent:u,index:f,range:e})),!1;a.isText&&(l+=(d=a?.text)==null?void 0:d.slice(Math.max(r,c)-c,i-c))}),l}function KA(t,e){const n={from:0,to:t.content.size};return R0(t,n,e)}function D0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function tr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function I0(t,e){const n=tr(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function ct(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function qA(t,e){const n=ct(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Da(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function $0(t,e){const n=Da(typeof e=="string"?e:e.name,t.schema);return n==="node"?qA(t,e):n==="mark"?I0(t,e):{}}function JA(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function GA(t){const e=JA(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function P0(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=n[s];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const c=e.slice(s).map(l,-1),u=e.slice(s).map(a),f=e.invert().map(c,-1),d=e.invert().map(u);r.push({oldRange:{from:f,to:d},newRange:{from:c,to:u}})})}),GA(r)}function Rf(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Sl(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Rf(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function L0(t,e,n={}){return t.find(r=>r.type===e&&Sl(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Tp(t,e,n={}){return!!L0(t,e,n)}function Df(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!L0([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,a=o+1,c=l+i.node.nodeSize;for(;o>0&&Tp([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&Tp([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function If(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=Df(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var YA=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===e?o=l:s-=1}return[o,s]};function vc(t,e){return e.nodes[t]||e.marks[t]||null}function Go(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var XA=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)==null?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function Su(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?tr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Sl(f.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;t.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),w=Math.min(p,g+m.nodeSize),N=w-y;o+=N,l.push(...m.marks.map(v=>({mark:v,from:y,to:w})))})}),o===0)return!1;const a=l.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Sl(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=l.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,d)=>f+d.to-d.from,0);return(a>0?a+c:a)>=o}function Ar(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?ct(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);l.push({node:f,from:h,to:p})});const a=i-r,c=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Sl(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=a}function QA(t,e,n={}){if(!e)return Ar(t,null,n)||Su(t,null,n);const r=Da(e,t.schema);return r==="node"?Ar(t,e,n):r==="mark"?Su(t,e,n):!1}var ZA=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=Ra(l=>l.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},eN=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Ep(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Mp(t,e){const{nodeExtensions:n}=Ys(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Fe(be(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Ia(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Ia(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function z0(t){return t instanceof ve}function B0(t){return t instanceof Ee}function Wr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function F0(t,e=null){if(!e)return null;const n=De.atStart(t),r=De.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ee.create(t,Wr(0,i,s),Wr(t.content.size,i,s)):Ee.create(t,Wr(e,i,s),Wr(e,i,s))}function tN(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof dt||i instanceof ht))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(De.near(t.doc.resolve(o),n))}var ao=class{constructor(t){this.find=t.find,this.handler=t.handler}},nN=(t,e)=>{if(Rf(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ao(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=XA(c)+s;return o.forEach(d=>{if(u)return;const h=nN(f,d.find);if(!h)return;const p=a.state.tr,m=_a({state:a.state,transaction:p}),g={from:r-(h[0].length-s.length),to:i},{commands:y,chain:w,can:N}=new Oa({editor:n,state:m});d.handler({state:m,range:g,match:h,commands:y,chain:w,can:N})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:s}),a.dispatch(p),u=!0)}),u}function rN(t){const{editor:e,rules:n}=t,r=new tt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=_f(W.from(u),o.schema);const{from:f}=a,d=f+u.length;Ao({editor:e,from:f,to:d,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Ao({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Ao({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Ao({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function iN(t){return Object.prototype.toString.call(t).slice(8,-1)}function No(t){return iN(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function H0(t,e){const n={...t};return No(t)&&No(e)&&Object.keys(e).forEach(r=>{No(e[r])&&No(t[r])?n[r]=H0(t[r],e[r]):n[r]=e[r]}),n}var $f=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Fe(be(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Fe(be(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>H0(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ui=class V0 extends $f{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new V0(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>c?.type.name===n.name))return!1;const a=o.find(c=>c?.type.name===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function sN(t){return typeof t=="number"}var oN=class{constructor(t){this.find=t.find,this.handler=t.handler}},lN=(t,e,n)=>{if(Rf(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function aN(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Oa({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+h.content.size),y=h.textBetween(m-p,g-p,void 0,"￼");lN(y,s.find,o).forEach(N=>{if(N.index===void 0)return;const v=m+N.index+1,E=v+N[0].length,B={from:n.tr.mapping.map(v),to:n.tr.mapping.map(E)},$=s.handler({state:n,range:B,match:N,commands:a,chain:c,can:u,pasteEvent:o,dropEvent:l});f.push($)})}),f.every(h=>h!==null)}var _o=null,cN=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function uN(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:f,to:d,rule:h,pasteEvt:p})=>{const m=u.tr,g=_a({state:u,transaction:m});if(!(!aN({editor:e,state:g,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:p,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(u=>new tt({view(f){const d=p=>{var m;r=(m=f.dom.parentElement)!=null&&m.contains(p.target)?f.dom.parentElement:null,r&&(_o=e)},h=()=>{_o&&(_o=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(s=r===f.dom.parentElement,l=d,!s){const h=_o;h?.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(f,d)=>{var h;const p=(h=d.clipboardData)==null?void 0:h.getData("text/html");return o=d,i=!!p?.includes("data-pm-slice"),!1}}},appendTransaction:(f,d,h)=>{const p=f[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),w=!!y;if(!m&&!g&&!w)return;if(w){let{text:E}=y;typeof E=="string"?E=E:E=_f(W.from(E),h.schema);const{from:B}=y,$=B+E.length,C=cN(E);return a({rule:u,state:h,from:B,to:{b:$},pasteEvt:C})}const N=d.doc.content.findDiffStart(h.doc.content),v=d.doc.content.findDiffEnd(h.doc.content);if(!(!sN(N)||!v||N===v.b))return a({rule:u,state:h,from:N,to:v,pasteEvt:o})}}))}var $a=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=O0(t),this.schema=WA(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:vc(e.name,this.schema)},r=be(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this,e=Of([...this.extensions].reverse()),n=[],r=[],i=e.map(s=>{const o={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:t,type:vc(s.name,this.schema)},l=[],a=be(s,"addKeyboardShortcuts",o);let c={};if(s.type==="mark"&&be(s,"exitable",o)&&(c.ArrowRight=()=>ui.handleExit({editor:t,mark:s})),a){const p=Object.fromEntries(Object.entries(a()).map(([m,g])=>[m,()=>g({editor:t})]));c={...c,...p}}const u=gA(c);l.push(u);const f=be(s,"addInputRules",o);Ep(s,t.options.enableInputRules)&&f&&n.push(...f());const d=be(s,"addPasteRules",o);Ep(s,t.options.enablePasteRules)&&d&&r.push(...d());const h=be(s,"addProseMirrorPlugins",o);if(h){const p=h();l.push(...p)}return l}).flat();return[rN({editor:t,rules:n}),...uN({editor:t,rules:r}),...i]}get attributes(){return _0(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ys(this.extensions);return Object.fromEntries(e.filter(n=>!!be(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ct(n.name,this.schema)},s=be(n,"addNodeView",i);if(!s)return[];const o=(l,a,c,u,f)=>{const d=wl(l,r);return s()({node:l,view:a,getPos:c,decorations:u,innerDecorations:f,editor:t,extension:n,HTMLAttributes:d})};return[n.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Ys(this.extensions);return Object.fromEntries(e.filter(n=>!!be(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:tr(n.name,this.schema)},s=be(n,"addMarkView",i);if(!s)return[];const o=(l,a,c)=>{const u=wl(l,r);return s()({mark:l,view:a,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:f=>{E_(l,t,f)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:vc(e.name,this.schema)};e.type==="mark"&&((n=Fe(be(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=be(e,"onBeforeCreate",r),s=be(e,"onCreate",r),o=be(e,"onUpdate",r),l=be(e,"onSelectionUpdate",r),a=be(e,"onTransaction",r),c=be(e,"onFocus",r),u=be(e,"onBlur",r),f=be(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}};$a.resolve=O0;$a.sort=Of;$a.flatten=Nf;var fN={};E0(fN,{ClipboardTextSerializer:()=>W0,Commands:()=>q0,Delete:()=>J0,Drop:()=>G0,Editable:()=>Y0,FocusEvents:()=>Q0,Keymap:()=>Z0,Paste:()=>eb,Tabindex:()=>tb,focusEventsPluginKey:()=>X0});var ot=class j0 extends $f{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new j0(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},W0=ot.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new tt({key:new gt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=D0(n);return R0(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),U0={};E0(U0,{blur:()=>dN,clearContent:()=>hN,clearNodes:()=>pN,command:()=>mN,createParagraphNear:()=>gN,cut:()=>yN,deleteCurrentNode:()=>bN,deleteNode:()=>xN,deleteRange:()=>vN,deleteSelection:()=>kN,enter:()=>wN,exitCode:()=>SN,extendMarkRange:()=>CN,first:()=>TN,focus:()=>MN,forEach:()=>AN,insertContent:()=>NN,insertContentAt:()=>ON,joinBackward:()=>IN,joinDown:()=>DN,joinForward:()=>$N,joinItemBackward:()=>PN,joinItemForward:()=>LN,joinTextblockBackward:()=>zN,joinTextblockForward:()=>BN,joinUp:()=>RN,keyboardShortcut:()=>HN,lift:()=>VN,liftEmptyBlock:()=>jN,liftListItem:()=>WN,newlineInCode:()=>UN,resetAttributes:()=>KN,scrollIntoView:()=>qN,selectAll:()=>JN,selectNodeBackward:()=>GN,selectNodeForward:()=>YN,selectParentNode:()=>XN,selectTextblockEnd:()=>QN,selectTextblockStart:()=>ZN,setContent:()=>e_,setMark:()=>n_,setMeta:()=>r_,setNode:()=>i_,setNodeSelection:()=>s_,setTextSelection:()=>o_,sinkListItem:()=>l_,splitBlock:()=>a_,splitListItem:()=>c_,toggleList:()=>u_,toggleMark:()=>f_,toggleNode:()=>d_,toggleWrap:()=>h_,undoInputRule:()=>p_,unsetAllMarks:()=>m_,unsetMark:()=>g_,updateAttributes:()=>y_,wrapIn:()=>b_,wrapInList:()=>x_});var dN=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),hN=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),pN=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(a)),d=c.resolve(u.map(a+l.nodeSize)),h=f.blockRange(d);if(!h)return;const p=Ui(h);if(l.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},mN=t=>e=>t(e),gN=()=>({state:t,dispatch:e})=>w0(t,e),yN=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ee(r.doc.resolve(Math.max(o-1,0)))),!0},bN=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},xN=t=>({tr:e,state:n,dispatch:r})=>{const i=ct(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},vN=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},kN=()=>({state:t,dispatch:e})=>Cf(t,e),wN=()=>({commands:t})=>t.keyboardShortcut("Enter"),SN=()=>({state:t,dispatch:e})=>wA(t,e),CN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=tr(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const f=Df(a,s,e);if(f&&f.from<=c&&f.to>=u){const d=Ee.create(o,f.from,f.to);n.setSelection(d)}}return!0},TN=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function EN(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Pf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var MN=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Pf()||EN())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!B0(n.state.selection))return o(),!0;const l=F0(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},AN=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),NN=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),_N=t=>!("type"in t),ON=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const{selection:a}=s.state,c=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Gs(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(y){c(y)}try{l=Gs(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(y){return c(y),!1}let{from:f,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((_N(l)?l:[l]).forEach(y=>{y.check(),h=h?y.isText&&y.marks.length===0:!1,p=p?y.isBlock:!1}),f===d&&p){const{parent:y}=r.doc.resolve(f);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(f-=1,d+=1)}let g;if(h){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof W){let y="";e.forEach(w=>{w.text&&(y+=w.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,f,d)}else{g=l;const y=a.$from.parentOffset===0,w=a.$from.node().isText||a.$from.node().isTextblock,N=a.$from.node().content.size>0;y&&w&&N&&(f=Math.max(0,f-1)),r.replaceWith(f,d,g)}n.updateSelection&&tN(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:g})}return!0},RN=()=>({state:t,dispatch:e})=>xA(t,e),DN=()=>({state:t,dispatch:e})=>vA(t,e),IN=()=>({state:t,dispatch:e})=>m0(t,e),$N=()=>({state:t,dispatch:e})=>x0(t,e),PN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ca(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},LN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ca(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},zN=()=>({state:t,dispatch:e})=>yA(t,e),BN=()=>({state:t,dispatch:e})=>bA(t,e);function K0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FN(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Pf()||K0()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var HN=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=FN(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a?.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0},VN=(t,e={})=>({state:n,dispatch:r})=>{const i=ct(t,n.schema);return Ar(n,i,e)?kA(n,r):!1},jN=()=>({state:t,dispatch:e})=>S0(t,e),WN=t=>({state:e,dispatch:n})=>{const r=ct(t,e.schema);return DA(r)(e,n)},UN=()=>({state:t,dispatch:e})=>k0(t,e);function Ap(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var KN=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Da(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=ct(t,r.schema)),l==="mark"&&(o=tr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,Ap(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&n.addMark(u,u+c.nodeSize,o.create(Ap(f.attrs,e)))})})}),!0):!1},qN=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),JN=()=>({tr:t,dispatch:e})=>{if(e){const n=new Yt(t.doc);t.setSelection(n)}return!0},GN=()=>({state:t,dispatch:e})=>y0(t,e),YN=()=>({state:t,dispatch:e})=>v0(t,e),XN=()=>({state:t,dispatch:e})=>TA(t,e),QN=()=>({state:t,dispatch:e})=>AA(t,e),ZN=()=>({state:t,dispatch:e})=>MA(t,e),e_=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:a}=s;if(r.preserveWhitespace!=="full"){const c=wu(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,a.content.size,c).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:a.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function t_(t,e,n){var r;const{selection:i}=e;let s=null;if(B0(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!=null?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const h=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}var n_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=tr(t,r.schema);if(i)if(o){const c=I0(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(d,h)=>{const p=Math.max(h,u),m=Math.min(h+d.nodeSize,f);d.marks.find(y=>y.type===a)?d.marks.forEach(y=>{a===y.type&&n.addMark(p,m,a.create({...y.attrs,...e}))}):n.addMark(p,m,a.create(e))})});return t_(r,n,a)},r_=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),i_=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=ct(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>wp(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>wp(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},s_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Wr(t,0,r.content.size),s=ve.create(r,i);e.setSelection(s)}return!0},o_=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ee.atStart(r).from,l=Ee.atEnd(r).to,a=Wr(i,o,l),c=Wr(s,o,l),u=Ee.create(r,a,c);e.setSelection(u)}return!0},l_=t=>({state:e,dispatch:n})=>{const r=ct(t,e.schema);return PA(r)(e,n)};function Np(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var a_=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=Go(c,l.node().type.name,l.node().attrs);if(s instanceof ve&&s.node.isBlock)return!l.parentOffset||!Jn(o,l.pos)?!1:(r&&(t&&Np(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,d=l.depth===0?void 0:BA(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&d?[{type:d,attrs:u}]:void 0,p=Jn(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Jn(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:u}]:void 0),r){if(p&&(s instanceof Ee&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),d&&!f&&!l.parentOffset&&l.parent.type!==d)){const m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}t&&Np(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},c_=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=ct(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const f=a.node(-1);if(f.type!==l)return!1;const d=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let y=W.empty;const w=a.index(-1)?1:a.index(-2)?2:3;for(let C=a.depth-w;C>=a.depth-3;C-=1)y=W.from(a.node(C).copy(y));const N=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,v={...Go(d,a.node().type.name,a.node().attrs),...e},E=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(v))||void 0;y=y.append(W.from(l.createAndFill(null,E)||void 0));const B=a.before(a.depth-(w-1));n.replace(B,a.after(-N),new ie(y,4-w,0));let $=-1;n.doc.nodesBetween(B,n.doc.content.size,(C,_)=>{if($>-1)return!1;C.isTextblock&&C.content.size===0&&($=_+1)}),$>-1&&n.setSelection(Ee.near(n.doc.resolve($))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?f.contentMatchAt(0).defaultType:null,p={...Go(d,f.type.name,f.attrs),...e},m={...Go(d,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const g=h?[{type:l,attrs:p},{type:h,attrs:m}]:[{type:l,attrs:p}];if(!Jn(n.doc,a.pos,2))return!1;if(i){const{selection:y,storedMarks:w}=r,{splittableMarks:N}=s.extensionManager,v=w||y.$to.parentOffset&&y.$from.marks();if(n.split(a.pos,2,g).scrollIntoView(),!v||!i)return!0;const E=v.filter(B=>N.includes(B.type.name));n.ensureMarks(E)}return!0},kc=(t,e)=>{const n=Ra(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&_r(t.doc,n.pos)&&t.join(n.pos),!0},wc=(t,e)=>{const n=Ra(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&_r(t.doc,r)&&t.join(r),!0},u_=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=ct(t,o.schema),p=ct(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:w}=m,N=y.blockRange(w),v=g||m.$to.parentOffset&&m.$from.marks();if(!N)return!1;const E=Ra(B=>Mp(B.type.name,f))(m);if(N.depth>=1&&E&&N.depth-E.depth<=1){if(E.node.type===h)return c.liftListItem(p);if(Mp(E.node.type.name,f)&&h.validContent(E.node.content)&&l)return a().command(()=>(s.setNodeMarkup(E.pos,h),!0)).command(()=>kc(s,h)).command(()=>wc(s,h)).run()}return!n||!v||!l?a().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>kc(s,h)).command(()=>wc(s,h)).run():a().command(()=>{const B=u().wrapInList(h,r),$=v.filter(C=>d.includes(C.type.name));return s.ensureMarks($),B?!0:c.clearNodes()}).wrapInList(h,r).command(()=>kc(s,h)).command(()=>wc(s,h)).run()},f_=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=tr(t,r.schema);return Su(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},d_=(t,e,n={})=>({state:r,commands:i})=>{const s=ct(t,r.schema),o=ct(e,r.schema),l=Ar(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},h_=(t,e={})=>({state:n,commands:r})=>{const i=ct(t,n.schema);return Ar(n,i,e)?r.lift(i):r.wrapIn(i,e)},p_=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},m_=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},g_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=tr(t,r.schema),{$from:c,empty:u,ranges:f}=l;if(!i)return!0;if(u&&o){let{from:d,to:h}=l;const p=(s=c.marks().find(g=>g.type===a))==null?void 0:s.attrs,m=Df(c,a,p);m&&(d=m.from,h=m.to),n.removeMark(d,h,a)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,a)});return n.removeStoredMark(a),!0},y_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Da(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=ct(t,r.schema)),l==="mark"&&(o=tr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let f,d,h,p;n.selection.empty?r.doc.nodesBetween(c,u,(m,g)=>{s&&s===m.type&&(h=Math.max(g,c),p=Math.min(g+m.nodeSize,u),f=g,d=m)}):r.doc.nodesBetween(c,u,(m,g)=>{g<c&&s&&s===m.type&&(h=Math.max(g,c),p=Math.min(g+m.nodeSize,u),f=g,d=m),g>=c&&g<=u&&(s&&s===m.type&&n.setNodeMarkup(g,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(y=>{if(o===y.type){const w=Math.max(g,c),N=Math.min(g+m.nodeSize,u);n.addMark(w,N,o.create({...y.attrs,...e}))}}))}),d&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(m=>{o===m.type&&n.addMark(h,p,o.create({...m.attrs,...e}))}))}),!0):!1},b_=(t,e={})=>({state:n,dispatch:r})=>{const i=ct(t,n.schema);return NA(i,e)(n,r)},x_=(t,e={})=>({state:n,dispatch:r})=>{const i=ct(t,n.schema);return _A(i,e)(n,r)},q0=ot.create({name:"commands",addCommands(){return{...U0}}}),J0=ot.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,l,a,c;if((c=(a=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:a.call(l,t))!=null?c:t.getMeta("y-sync$"))return;const u=M0(t.before,[t,...e]);P0(u).forEach(h=>{u.mapping.mapResult(h.oldRange.from).deletedAfter&&u.mapping.mapResult(h.oldRange.to).deletedBefore&&u.before.nodesBetween(h.oldRange.from,h.oldRange.to,(p,m)=>{const g=m+p.nodeSize-2,y=h.oldRange.from<=m&&g<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:m,to:g,newFrom:u.mapping.map(m),newTo:u.mapping.map(g),deletedRange:h.oldRange,newRange:h.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:u})})});const d=u.mapping;u.steps.forEach((h,p)=>{var m,g;if(h instanceof un){const y=d.slice(p).map(h.from,-1),w=d.slice(p).map(h.to),N=d.invert().map(y,-1),v=d.invert().map(w),E=(m=u.doc.nodeAt(y-1))==null?void 0:m.marks.some($=>$.eq(h.mark)),B=(g=u.doc.nodeAt(w))==null?void 0:g.marks.some($=>$.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:N,to:v},newRange:{from:y,to:w},partial:!!(B||E),editor:this.editor,transaction:t,combinedTransform:u})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),G0=ot.create({name:"drop",addProseMirrorPlugins(){return[new tt({key:new gt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Y0=ot.create({name:"editable",addProseMirrorPlugins(){return[new tt({key:new gt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),X0=new gt("focusEvents"),Q0=ot.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new tt({key:X0,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Z0=ot.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:f}=a,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?l.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,g=f.pos-f.parentOffset,y=m&&p.parent.childCount===1?g===f.pos:De.atStart(c).from===d;return!u||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Pf()||K0()?s:i},addProseMirrorPlugins(){return[new tt({key:new gt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=De.atStart(e.doc).from,c=De.atEnd(e.doc).to;if(s||!(o===a&&l===c)||!Ia(n.doc))return;const d=n.tr,h=_a({state:n,transaction:d}),{commands:p}=new Oa({editor:this.editor,state:h});if(p.clearNodes(),!!d.steps.length)return d}})]}}),eb=ot.create({name:"paste",addProseMirrorPlugins(){return[new tt({key:new gt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),tb=ot.create({name:"tabindex",addProseMirrorPlugins(){return[new tt({key:new gt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),v_=class vi{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new vi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new vi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new vi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new vi(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new vi(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},k_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function w_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var S_=class extends zA{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:i})=>{throw i},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:i,slice:s,moved:o})=>this.options.onDrop(i,s,o)),this.on("paste",({event:i,slice:s})=>this.options.onPaste(i,s)),this.on("delete",this.options.onDelete);const n=this.createDoc(),r=F0(n,this.options.autofocus);this.editorState=wi.create({doc:n,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){var e;if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}this.editorView=null,this.isInitialized=!1,(e=this.css)==null||e.remove(),this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=w_(k_,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,n)=>{if(n==="state")return this.editorState;if(n in e)return Reflect.get(e,n);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${n}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,n){const r=N0(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[Y0,W0.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:n.blockSeparator}),q0,Q0,Z0,tb,G0,eb,J0].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new $a(i,this)}createCommandManager(){this.commandManager=new Oa({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=wu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(n){if(!(n instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(n.message))throw n;this.emit("contentError",{editor:this,error:n,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=wu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var n;this.editorView=new d0(e,{...this.options.editorProps,attributes:{role:"textbox",...(n=this.options.editorProps)==null?void 0:n.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.injectCSS();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(u)});return}const{state:n,transactions:r}=this.state.applyTransaction(e),i=!this.state.selection.eq(n.selection),s=r.includes(e),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),!s)return;this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const l=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=l?.getMeta("focus"),c=l?.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:l}),c&&this.emit("blur",{editor:this,event:c.event,transaction:l}),!(e.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||o.doc.eq(n.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return $0(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return QA(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return _f(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return KA(this.state.doc,{blockSeparator:n,textSerializers:{...D0(this.schema),...r}})}get isEmpty(){return Ia(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,n;return(n=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?n:!0}$node(e,n){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new v_(n,this)}get $doc(){return this.$pos(0)}};function Bi(t){return new ao({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Fe(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),c=n.from+l.indexOf(o),u=c+o.length;if(If(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+a,c);const d=n.from+a+o.length;s.addMark(n.from+a,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function C_(t){return new ao({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Fe(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>l?u=l:l=u+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function Cu(t){return new ao({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Fe(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function nt(t){return new ao({find:t.find,handler:({state:e,range:n,match:r})=>{let i=t.replace,s=n.from;const o=n.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);i+=r[0].slice(l+r[1].length),s+=l;const a=s-o;a>0&&(i=r[0].slice(l-a,l)+i,s=o)}e.tr.insertText(i,s,o)}})}function Fi(t){return new ao({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Fe(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&hf(a,t.type,s);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=t.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&_r(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}function T_(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ve){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function E_(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((l,a)=>{const c=s.mapping.map(a),u=s.mapping.map(a)+l.nodeSize;let f=null;if(l.marks.forEach(h=>{if(h!==o)return!1;f=h}),!f)return;let d=!1;if(Object.keys(n).forEach(h=>{n[h]!==f.attrs[h]&&(d=!0)}),d){const h=t.type.create({...t.attrs,...n});s.removeMark(c,u,t.type),s.addMark(c,u,h)}}),s.docChanged&&e.view.dispatch(s)}var Qt=class nb extends $f{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new nb(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function oi(t){return new oN({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Fe(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),f=n.from+a.indexOf(l),d=f+l.length;if(If(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>f).length)return null;d<n.to&&o.delete(d,n.to),f>n.from&&o.delete(n.from+u,f),c=n.from+u+l.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function _p(t){return Dx((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}var M_=class extends S_{constructor(t={}){return super(t),this.contentComponent=null,this.appContext=null,this.reactiveState=_p(this.view.state),this.reactiveExtensionStorage=_p(this.extensionStorage),this.on("beforeTransaction",({nextState:e})=>{this.reactiveState.value=e,this.reactiveExtensionStorage.value=this.extensionStorage}),wm(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){const n=super.registerPlugin(t,e);return this.reactiveState&&(this.reactiveState.value=n),n}unregisterPlugin(t){const e=super.unregisterPlugin(t);return this.reactiveState&&e&&(this.reactiveState.value=e),e}},A_=qx({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=we(),n=sg();return Ev(()=>{const r=t.editor;r&&r.options.element&&e.value&&qr(()=>{var i;if(!e.value||!((i=r.options.element)!=null&&i.firstChild))return;const s=me(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:s}),r.createNodeViews()})}),eo(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return ag("div",{ref:t=>{this.rootEl=t}})}}),N_=(t={})=>{const e=Nx();return ai(()=>{e.value=new M_(t)}),eo(()=>{var n,r,i;const s=(n=e.value)==null?void 0:n.options.element,o=s?.cloneNode(!0);(r=s?.parentNode)==null||r.replaceChild(o,s),(i=e.value)==null||i.destroy()}),e},Cl=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},__=/^\s*>\s$/,O_=Qt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Cl("blockquote",{...at(this.options.HTMLAttributes,t),children:Cl("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fi({find:__,type:this.type})]}}),R_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,D_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,I_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,P_=ui.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Cl("strong",{...at(this.options.HTMLAttributes,t),children:Cl("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Bi({find:R_,type:this.type}),Bi({find:I_,type:this.type})]},addPasteRules(){return[oi({find:D_,type:this.type}),oi({find:$_,type:this.type})]}}),L_=/(^|[^`])`([^`]+)`(?!`)/,z_=/(^|[^`])`([^`]+)`(?!`)/g,B_=ui.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",at(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Bi({find:L_,type:this.type})]},addPasteRules(){return[oi({find:z_,type:this.type})]}}),F_=/^```([a-z]+)?[\s\n]$/,H_=/^~~~([a-z]+)?[\s\n]$/,V_=Qt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",at(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(De.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Cu({find:F_,type:this.type,getAttributes:t=>({language:t[1]})}),Cu({find:H_,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new tt({key:new gt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ee.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),j_=Qt.create({name:"doc",topNode:!0,content:"block+"}),W_=Qt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",at(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const f=a.filter(d=>l.includes(d.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),U_=Qt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,at(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Cu({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),K_=Qt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",at(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!T_(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return z0(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:a}=s.selection,c=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?s.setSelection(Ee.create(s.doc,a.pos+1)):a.nodeAfter.isBlock?s.setSelection(ve.create(s.doc,a.pos)):s.setSelection(Ee.create(s.doc,a.pos));else{const u=(l=a.parent.type.contentMatch.defaultType)==null?void 0:l.create();u&&(s.insert(c,u),s.setSelection(Ee.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[C_({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),q_=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,J_=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,G_=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Y_=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,X_=ui.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",at(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Bi({find:q_,type:this.type}),Bi({find:G_,type:this.type})]},addPasteRules(){return[oi({find:J_,type:this.type}),oi({find:Y_,type:this.type})]}});const Q_="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Z_="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Hi=(t,e)=>{for(const n in e)t[n]=e[n];return t},Tu="numeric",Eu="ascii",Mu="alpha",vs="asciinumeric",as="alphanumeric",Au="domain",rb="emoji",eO="scheme",tO="slashscheme",Sc="whitespace";function nO(t,e){return t in e||(e[t]=[]),e[t]}function Ur(t,e,n){e[Tu]&&(e[vs]=!0,e[as]=!0),e[Eu]&&(e[vs]=!0,e[Mu]=!0),e[vs]&&(e[as]=!0),e[Mu]&&(e[as]=!0),e[as]&&(e[Au]=!0),e[rb]&&(e[Au]=!0);for(const r in e){const i=nO(r,n);i.indexOf(t)<0&&i.push(t)}}function rO(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Ut(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ut.groups={};Ut.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Ut.groups;let i;return e&&e.j?i=e:(i=new Ut(e),n&&r&&Ur(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Ut.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new Ut,Hi(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ut,s){if(r)if(o.t&&typeof o.t=="string"){const a=Hi(rO(o.t,r),n);Ur(s,a,r)}else n&&Ur(s,n,r);o.t=s}return i.j[t]=o,o}};const Ie=(t,e,n,r,i)=>t.ta(e,n,r,i),Ye=(t,e,n,r,i)=>t.tr(e,n,r,i),Op=(t,e,n,r,i)=>t.ts(e,n,r,i),G=(t,e,n,r,i)=>t.tt(e,n,r,i),zn="WORD",Nu="UWORD",ib="ASCIINUMERICAL",sb="ALPHANUMERICAL",Xs="LOCALHOST",_u="TLD",Ou="UTLD",Yo="SCHEME",ki="SLASH_SCHEME",Lf="NUM",Ru="WS",zf="NL",ks="OPENBRACE",ws="CLOSEBRACE",Tl="OPENBRACKET",El="CLOSEBRACKET",Ml="OPENPAREN",Al="CLOSEPAREN",Nl="OPENANGLEBRACKET",_l="CLOSEANGLEBRACKET",Ol="FULLWIDTHLEFTPAREN",Rl="FULLWIDTHRIGHTPAREN",Dl="LEFTCORNERBRACKET",Il="RIGHTCORNERBRACKET",$l="LEFTWHITECORNERBRACKET",Pl="RIGHTWHITECORNERBRACKET",Ll="FULLWIDTHLESSTHAN",zl="FULLWIDTHGREATERTHAN",Bl="AMPERSAND",Fl="APOSTROPHE",Hl="ASTERISK",fr="AT",Vl="BACKSLASH",jl="BACKTICK",Wl="CARET",pr="COLON",Bf="COMMA",Ul="DOLLAR",xn="DOT",Kl="EQUALS",Ff="EXCLAMATION",nn="HYPHEN",Ss="PERCENT",ql="PIPE",Jl="PLUS",Gl="POUND",Cs="QUERY",Hf="QUOTE",ob="FULLWIDTHMIDDLEDOT",Vf="SEMI",vn="SLASH",Ts="TILDE",Yl="UNDERSCORE",lb="EMOJI",Xl="SYM";var ab=Object.freeze({__proto__:null,ALPHANUMERICAL:sb,AMPERSAND:Bl,APOSTROPHE:Fl,ASCIINUMERICAL:ib,ASTERISK:Hl,AT:fr,BACKSLASH:Vl,BACKTICK:jl,CARET:Wl,CLOSEANGLEBRACKET:_l,CLOSEBRACE:ws,CLOSEBRACKET:El,CLOSEPAREN:Al,COLON:pr,COMMA:Bf,DOLLAR:Ul,DOT:xn,EMOJI:lb,EQUALS:Kl,EXCLAMATION:Ff,FULLWIDTHGREATERTHAN:zl,FULLWIDTHLEFTPAREN:Ol,FULLWIDTHLESSTHAN:Ll,FULLWIDTHMIDDLEDOT:ob,FULLWIDTHRIGHTPAREN:Rl,HYPHEN:nn,LEFTCORNERBRACKET:Dl,LEFTWHITECORNERBRACKET:$l,LOCALHOST:Xs,NL:zf,NUM:Lf,OPENANGLEBRACKET:Nl,OPENBRACE:ks,OPENBRACKET:Tl,OPENPAREN:Ml,PERCENT:Ss,PIPE:ql,PLUS:Jl,POUND:Gl,QUERY:Cs,QUOTE:Hf,RIGHTCORNERBRACKET:Il,RIGHTWHITECORNERBRACKET:Pl,SCHEME:Yo,SEMI:Vf,SLASH:vn,SLASH_SCHEME:ki,SYM:Xl,TILDE:Ts,TLD:_u,UNDERSCORE:Yl,UTLD:Ou,UWORD:Nu,WORD:zn,WS:Ru});const Pn=/[a-z]/,Qi=new RegExp("\\p{L}","u"),Cc=new RegExp("\\p{Emoji}","u"),Ln=/\d/,Tc=/\s/,Rp="\r",Ec=`
`,iO="️",sO="‍",Mc="￼";let Oo=null,Ro=null;function oO(t=[]){const e={};Ut.groups=e;const n=new Ut;Oo==null&&(Oo=Dp(Q_)),Ro==null&&(Ro=Dp(Z_)),G(n,"'",Fl),G(n,"{",ks),G(n,"}",ws),G(n,"[",Tl),G(n,"]",El),G(n,"(",Ml),G(n,")",Al),G(n,"<",Nl),G(n,">",_l),G(n,"（",Ol),G(n,"）",Rl),G(n,"「",Dl),G(n,"」",Il),G(n,"『",$l),G(n,"』",Pl),G(n,"＜",Ll),G(n,"＞",zl),G(n,"&",Bl),G(n,"*",Hl),G(n,"@",fr),G(n,"`",jl),G(n,"^",Wl),G(n,":",pr),G(n,",",Bf),G(n,"$",Ul),G(n,".",xn),G(n,"=",Kl),G(n,"!",Ff),G(n,"-",nn),G(n,"%",Ss),G(n,"|",ql),G(n,"+",Jl),G(n,"#",Gl),G(n,"?",Cs),G(n,'"',Hf),G(n,"/",vn),G(n,";",Vf),G(n,"~",Ts),G(n,"_",Yl),G(n,"\\",Vl),G(n,"・",ob);const r=Ye(n,Ln,Lf,{[Tu]:!0});Ye(r,Ln,r);const i=Ye(r,Pn,ib,{[vs]:!0}),s=Ye(r,Qi,sb,{[as]:!0}),o=Ye(n,Pn,zn,{[Eu]:!0});Ye(o,Ln,i),Ye(o,Pn,o),Ye(i,Ln,i),Ye(i,Pn,i);const l=Ye(n,Qi,Nu,{[Mu]:!0});Ye(l,Pn),Ye(l,Ln,s),Ye(l,Qi,l),Ye(s,Ln,s),Ye(s,Pn),Ye(s,Qi,s);const a=G(n,Ec,zf,{[Sc]:!0}),c=G(n,Rp,Ru,{[Sc]:!0}),u=Ye(n,Tc,Ru,{[Sc]:!0});G(n,Mc,u),G(c,Ec,a),G(c,Mc,u),Ye(c,Tc,u),G(u,Rp),G(u,Ec),Ye(u,Tc,u),G(u,Mc,u);const f=Ye(n,Cc,lb,{[rb]:!0});G(f,"#"),Ye(f,Cc,f),G(f,iO,f);const d=G(f,sO);G(d,"#"),Ye(d,Cc,f);const h=[[Pn,o],[Ln,i]],p=[[Pn,null],[Qi,l],[Ln,s]];for(let m=0;m<Oo.length;m++)ir(n,Oo[m],_u,zn,h);for(let m=0;m<Ro.length;m++)ir(n,Ro[m],Ou,Nu,p);Ur(_u,{tld:!0,ascii:!0},e),Ur(Ou,{utld:!0,alpha:!0},e),ir(n,"file",Yo,zn,h),ir(n,"mailto",Yo,zn,h),ir(n,"http",ki,zn,h),ir(n,"https",ki,zn,h),ir(n,"ftp",ki,zn,h),ir(n,"ftps",ki,zn,h),Ur(Yo,{scheme:!0,ascii:!0},e),Ur(ki,{slashscheme:!0,ascii:!0},e),t=t.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<t.length;m++){const g=t[m][0],w=t[m][1]?{[eO]:!0}:{[tO]:!0};g.indexOf("-")>=0?w[Au]=!0:Pn.test(g)?Ln.test(g)?w[vs]=!0:w[Eu]=!0:w[Tu]=!0,Op(n,g,g,w)}return Op(n,"localhost",Xs,{ascii:!0}),n.jd=new Ut(Xl),{start:n,tokens:Hi({groups:e},ab)}}function cb(t,e){const n=lO(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,a=null,c=0,u=null,f=-1,d=-1;for(;o<r&&(a=l.go(n[o]));)l=a,l.accepts()?(f=0,d=0,u=l):f>=0&&(f+=n[o].length,d++),c+=n[o].length,s+=n[o].length,o++;s-=f,o-=d,c-=f,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function lO(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ir(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const a=e[l];t.j[a]?s=t.j[a]:(s=new Ut(r),s.jr=i.slice(),t.j[a]=s),t=s}return s=new Ut(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function Dp(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Qs={defaultProtocol:"http",events:null,format:Ip,formatHref:Ip,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function jf(t,e=null){let n=Hi({},Qs);t&&(n=Hi(n,t instanceof jf?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}jf.prototype={o:Qs,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Qs[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Ip(t){return t}function ub(t,e){this.t="token",this.v=t,this.tk=e}ub.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Qs.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),c&&(o.rel=c),u&&Hi(o,u),{tagName:i,attributes:o,content:s,eventListeners:f}}};function Pa(t,e){class n extends ub{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const $p=Pa("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Pp=Pa("text"),aO=Pa("nl"),Do=Pa("url",{isLink:!0,toHref(t=Qs.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Xs&&t[1].t===pr}}),en=t=>new Ut(t);function cO({groups:t}){const e=t.domain.concat([Bl,Hl,fr,Vl,jl,Wl,Ul,Kl,nn,Lf,Ss,ql,Jl,Gl,vn,Xl,Ts,Yl]),n=[Fl,pr,Bf,xn,Ff,Ss,Cs,Hf,Vf,Nl,_l,ks,ws,El,Tl,Ml,Al,Ol,Rl,Dl,Il,$l,Pl,Ll,zl],r=[Bl,Fl,Hl,Vl,jl,Wl,Ul,Kl,nn,ks,ws,Ss,ql,Jl,Gl,Cs,vn,Xl,Ts,Yl],i=en(),s=G(i,Ts);Ie(s,r,s),Ie(s,t.domain,s);const o=en(),l=en(),a=en();Ie(i,t.domain,o),Ie(i,t.scheme,l),Ie(i,t.slashscheme,a),Ie(o,r,s),Ie(o,t.domain,o);const c=G(o,fr);G(s,fr,c),G(l,fr,c),G(a,fr,c);const u=G(s,xn);Ie(u,r,s),Ie(u,t.domain,s);const f=en();Ie(c,t.domain,f),Ie(f,t.domain,f);const d=G(f,xn);Ie(d,t.domain,f);const h=en($p);Ie(d,t.tld,h),Ie(d,t.utld,h),G(c,Xs,h);const p=G(f,nn);G(p,nn,p),Ie(p,t.domain,f),Ie(h,t.domain,f),G(h,xn,d),G(h,nn,p);const m=G(h,pr);Ie(m,t.numeric,$p);const g=G(o,nn),y=G(o,xn);G(g,nn,g),Ie(g,t.domain,o),Ie(y,r,s),Ie(y,t.domain,o);const w=en(Do);Ie(y,t.tld,w),Ie(y,t.utld,w),Ie(w,t.domain,o),Ie(w,r,s),G(w,xn,y),G(w,nn,g),G(w,fr,c);const N=G(w,pr),v=en(Do);Ie(N,t.numeric,v);const E=en(Do),B=en();Ie(E,e,E),Ie(E,n,B),Ie(B,e,E),Ie(B,n,B),G(w,vn,E),G(v,vn,E);const $=G(l,pr),C=G(a,pr),_=G(C,vn),j=G(_,vn);Ie(l,t.domain,o),G(l,xn,y),G(l,nn,g),Ie(a,t.domain,o),G(a,xn,y),G(a,nn,g),Ie($,t.domain,E),G($,vn,E),G($,Cs,E),Ie(j,t.domain,E),Ie(j,e,E),G(j,vn,E);const Y=[[ks,ws],[Tl,El],[Ml,Al],[Nl,_l],[Ol,Rl],[Dl,Il],[$l,Pl],[Ll,zl]];for(let U=0;U<Y.length;U++){const[ae,k]=Y[U],L=G(E,ae);G(B,ae,L),G(L,k,E);const T=en(Do);Ie(L,e,T);const z=en();Ie(L,n),Ie(T,e,T),Ie(T,n,z),Ie(z,e,T),Ie(z,n,z),G(T,k,E),G(z,k,E)}return G(i,Xs,w),G(i,zf,aO),{start:i,tokens:ab}}function uO(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,a=null,c=null,u=0,f=null,d=-1;for(;i<r&&!(a=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=a||l.go(n[i].t));)a=null,l=c,l.accepts()?(d=0,f=l):d>=0&&d++,i++,u++;if(d<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Ac(Pp,e,o)),o=[]),i-=d,u-=d;const h=f.t,p=n.slice(i-u,i);s.push(Ac(h,e,p))}}return o.length>0&&s.push(Ac(Pp,e,o)),s}function Ac(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const fO=typeof console<"u"&&console&&console.warn||(()=>{}),dO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ke={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function hO(){return Ut.groups={},Ke.scanner=null,Ke.parser=null,Ke.tokenQueue=[],Ke.pluginQueue=[],Ke.customSchemes=[],Ke.initialized=!1,Ke}function Lp(t,e=!1){if(Ke.initialized&&fO(`linkifyjs: already initialized - will not register custom scheme "${t}" ${dO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ke.customSchemes.push([t,e])}function pO(){Ke.scanner=oO(Ke.customSchemes);for(let t=0;t<Ke.tokenQueue.length;t++)Ke.tokenQueue[t][1]({scanner:Ke.scanner});Ke.parser=cO(Ke.scanner.tokens);for(let t=0;t<Ke.pluginQueue.length;t++)Ke.pluginQueue[t][1]({scanner:Ke.scanner,parser:Ke.parser});return Ke.initialized=!0,Ke}function Wf(t){return Ke.initialized||pO(),uO(Ke.parser.start,t,cb(Ke.scanner.start,t))}Wf.scan=cb;function fb(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new jf(n),i=Wf(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var Uf="[\0-   ᠎ -\u2029 　]",mO=new RegExp(Uf),gO=new RegExp(`${Uf}$`),yO=new RegExp(Uf,"g");function bO(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function xO(t){return new tt({key:new gt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=M0(n.doc,[...e]);if(P0(l).forEach(({newRange:c})=>{const u=FA(r.doc,c,h=>h.isTextblock);let f,d;if(u.length>1)f=u[0],d=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const h=r.doc.textBetween(c.from,c.to," "," ");if(!gO.test(h))return;f=u[0],d=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&d){const h=d.split(mO).filter(Boolean);if(h.length<=0)return!1;const p=h[h.length-1],m=f.pos+d.lastIndexOf(p);if(!p)return!1;const g=Wf(p).map(y=>y.toObject(t.defaultProtocol));if(!bO(g))return!1;g.filter(y=>y.isLink).map(y=>({...y,from:m+y.start+1,to:m+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{If(y.from,y.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function vO(t){return new tt({key:new gt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let u=r.target;const f=[];for(;u.nodeName!=="DIV";)f.push(u),u=u.parentNode;o=f.find(d=>d.nodeName==="A")}if(!o)return!1;const l=$0(e.state,t.type.name),a=(i=o?.href)!=null?i:l.href,c=(s=o?.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&a?(window.open(a,c),!0):!1}}})}function kO(t){return new tt({key:new gt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const a=fb(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!a?!1:t.editor.commands.setMark(t.type,{href:a.href})}}})}function Lr(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(yO,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var wO=ui.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Lp(t);return}Lp(t.scheme,t.optionalSlashes)})},onDestroy(){hO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Lr(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Lr(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Lr(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",at(this.options.HTMLAttributes,t),0]:["a",at(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Lr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Lr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[oi({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=fb(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Lr(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(xO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Lr(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(vO({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(kO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),SO=Object.defineProperty,CO=(t,e)=>{for(var n in e)SO(t,n,{get:e[n],enumerable:!0})},TO="listItem",zp="textStyle",Bp=/^\s*([-+*])\s$/,db=Qt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",at(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(TO,this.editor.getAttributes(zp)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Fi({find:Bp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fi({find:Bp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(zp),editor:this.editor})),[t]}}),hb=Qt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",at(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),EO={};CO(EO,{findListItemPos:()=>co,getNextListDepth:()=>Kf,handleBackspace:()=>Du,handleDelete:()=>Iu,hasListBefore:()=>pb,hasListItemAfter:()=>MO,hasListItemBefore:()=>mb,listItemHasSubList:()=>gb,nextListIsDeeper:()=>yb,nextListIsHigher:()=>bb});var co=(t,e)=>{const{$from:n}=e.selection,r=ct(t,e.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},Kf=(t,e)=>{const n=co(t,e);if(!n)return!1;const[,r]=YA(e,t,n.$pos.pos+4);return r},pb=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},mb=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},gb=(t,e,n)=>{if(!n)return!1;const r=ct(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},Du=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ar(t.state,e)&&pb(t.state,e,n)){const{$anchor:l}=t.state.selection,a=t.state.doc.resolve(l.before()-1),c=[];a.node().descendants((d,h)=>{d.type.name===e&&c.push({node:d,pos:h})});const u=c.at(-1);if(!u)return!1;const f=t.state.doc.resolve(a.start()+u.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},f.end()).joinForward().run()}if(!Ar(t.state,e)||!eN(t.state))return!1;const r=co(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=gb(e,t.state,s);return mb(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},yb=(t,e)=>{const n=Kf(t,e),r=co(t,e);return!r||!n?!1:n>r.depth},bb=(t,e)=>{const n=Kf(t,e),r=co(t,e);return!r||!n?!1:n<r.depth},Iu=(t,e)=>{if(!Ar(t.state,e)||!ZA(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:yb(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():bb(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},MO=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},xb=ot.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Iu(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Iu(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Du(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Du(t,n,r)&&(e=!0)}),e}}}}),AO="listItem",Fp="textStyle",Hp=/^(\d+)\.\s$/,vb=Qt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",at(this.options.HTMLAttributes,n),0]:["ol",at(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(AO,this.editor.getAttributes(Fp)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Fi({find:Hp,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fi({find:Hp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Fp)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),NO=/^\s*(\[([( |x])?\])\s$/,_O=Qt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",at(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),a=document.createElement("div"),c=()=>{var u,f;l.ariaLabel=((f=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:f.call(u,t,l.checked))||`Task item checkbox for ${t.textContent||"empty task item"}`};return c(),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",u=>u.preventDefault()),l.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:f}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:d})=>{const h=n();if(typeof h!="number")return!1;const p=d.doc.nodeAt(h);return d.setNodeMarkup(h,void 0,{...p?.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,f])=>{i.setAttribute(u,f)}),i.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,o),i.append(s,a),Object.entries(e).forEach(([u,f])=>{i.setAttribute(u,f)}),{dom:i,contentDOM:a,update:u=>u.type!==this.type?!1:(i.dataset.checked=u.attrs.checked,l.checked=u.attrs.checked,c(),!0)}}},addInputRules(){return[Fi({find:NO,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),OO=Qt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",at(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ot.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(db.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(hb.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(xb.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(vb.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(_O.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(OO.configure(this.options.taskList)),t}});var RO=Qt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",at(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),DO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,IO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,$O=ui.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",at(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Bi({find:DO,type:this.type})]},addPasteRules(){return[oi({find:IO,type:this.type})]}}),PO=Qt.create({name:"text",group:"inline"}),LO=ui.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",at(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function zO(t={}){return new tt({view(e){return new BO(e,t)}})}class BO{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=f?p.bottom:p.top;f&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*l;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*o;r={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=a.getBoundingClientRect(),d=f.width/a.offsetWidth,h=f.height/a.offsetHeight;c=f.left-a.scrollLeft*d,u=f.top-a.scrollTop*h}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Ty(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Qe extends De{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Qe.valid(r)?new Qe(r):De.near(r)}content(){return ie.empty}eq(e){return e instanceof Qe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Qe(e.resolve(n.pos))}getBookmark(){return new qf(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!FO(e)||!HO(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Qe.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(Qe.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!ve.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Qe.valid(l))return l}return null}}}Qe.prototype.visible=!1;Qe.findFrom=Qe.findGapCursorFrom;De.jsonID("gapcursor",Qe);class qf{constructor(e){this.pos=e}map(e){return new qf(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Qe.valid(n)?new Qe(n):De.near(n)}}function FO(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function HO(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function VO(){return new tt({props:{decorations:KO,createSelectionBetween(t,e,n){return e.pos==n.pos&&Qe.valid(n)?new Qe(n):null},handleClick:WO,handleKeyDown:jO,handleDOMEvents:{beforeinput:UO}}})}const jO=h0({ArrowLeft:Io("horiz",-1),ArrowRight:Io("horiz",1),ArrowUp:Io("vert",-1),ArrowDown:Io("vert",1)});function Io(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof Ee){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=Qe.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new Qe(c))),!0):!1}}function WO(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Qe.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ve.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Qe(r))),!0)}function UO(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Qe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=W.empty;for(let o=r.length-1;o>=0;o--)i=W.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new ie(i,0,0));return s.setSelection(Ee.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function KO(t){if(!(t.selection instanceof Qe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ge.create(t.doc,[Lt.widget(t.selection.head,e,{key:"gapcursor"})])}var Ql=200,pt=function(){};pt.prototype.append=function(e){return e.length?(e=pt.from(e),!this.length&&e||e.length<Ql&&this.leafAppend(e)||this.length<Ql&&e.leafPrepend(this)||this.appendInner(e)):this};pt.prototype.prepend=function(e){return e.length?pt.from(e).append(this):this};pt.prototype.appendInner=function(e){return new qO(this,e)};pt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?pt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};pt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};pt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};pt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};pt.from=function(e){return e instanceof pt?e:e&&e.length?new kb(e):pt.empty};var kb=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ql)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ql)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(pt);pt.empty=new kb([]);var qO=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(pt);const JO=500;class cn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(f);return}if(i){u.push(new kn(f.map));let h=f.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new kn(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(s)):f.selection,a=new cn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new kn(e.mapping.maps[u],f,n),h;(h=a&&a.merge(d))&&(d=h,u?s.pop():l=l.slice(0,l.length-1)),s.push(d),n&&(o++,n=void 0),i||(a=d)}let c=o-r.depth;return c>YO&&(l=GO(l,c),o-=c),new cn(l.append(s),o)}remapping(e,n){let r=new Ws;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new cn(this.items.append(e.map(n=>new kn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(d=>{d.selection&&l--},i);let a=n;this.items.forEach(d=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),g=d.selection&&d.selection.map(s.slice(a+1,h));g&&l++,r.push(new kn(p,m,g))}else r.push(new kn(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new kn(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),f=new cn(u,l);return f.emptyItemCount()>JO&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let f=new kn(c.invert(),a,u),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else o.map&&r--},this.items.length,0),new cn(pt.from(i.reverse()),s)}}cn.empty=new cn(pt.empty,0);function GO(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class kn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new kn(n.getMap().invert(),n,this.selection)}}}class dr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const YO=20;function XO(t,e,n,r){let i=n.getMeta(Zr),s;if(i)return i.historyState;n.getMeta(eR)&&(t=new dr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Zr))return o.getMeta(Zr).redo?new dr(t.done.addTransform(n,void 0,r,Xo(e)),t.undone,Vp(n.mapping.maps),t.prevTime,t.prevComposition):new dr(t.done,t.undone.addTransform(n,void 0,r,Xo(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!QO(n,t.prevRanges)),c=o?Nc(t.prevRanges,n.mapping):Vp(n.mapping.maps);return new dr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Xo(e)),cn.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new dr(t.done.rebased(n,s),t.undone.rebased(n,s),Nc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new dr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Nc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function QO(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Vp(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Nc(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function ZO(t,e,n){let r=Xo(e),i=Zr.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new dr(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Zr,{redo:n,historyState:a})}let _c=!1,jp=null;function Xo(t){let e=t.plugins;if(jp!=e){_c=!1,jp=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){_c=!0;break}}return _c}const Zr=new gt("history"),eR=new gt("closeHistory");function tR(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new tt({key:Zr,state:{init(){return new dr(cn.empty,cn.empty,null,0,-1)},apply(e,n,r){return XO(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Sb:r=="historyRedo"?Cb:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function wb(t,e){return(n,r)=>{let i=Zr.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=ZO(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Sb=wb(!1,!0),Cb=wb(!0,!0);ot.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new tt({key:new gt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,a=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(l,a);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,a=s-r,c=l-a,u=l;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var nR=ot.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[zO(this.options)]}});ot.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new tt({key:new gt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return Ge.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((a,c)=>{if(a.isText)return;if(!(i>=c&&i<=c+a.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((a,c)=>{if(a.isText||!(i>=c&&i<=c+a.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Lt.node(c,c+a.nodeSize,{class:this.options.className}))}),Ge.create(t,s)}}})]}});var rR=ot.create({name:"gapCursor",addProseMirrorPlugins(){return[VO()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Fe(be(t,"allowGapCursor",n)))!=null?e:null}}}),iR=ot.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new tt({key:new gt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const a=r>=l&&r<=l+o.nodeSize,c=!o.isLeaf&&Ia(o);if((a||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const f=Lt.node(l,l+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:a}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Ge.create(t,i)}}})]}});ot.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new tt({key:new gt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||z0(n.selection)||t.view.dragging?null:Ge.create(n.doc,[Lt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Wp({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var sR=ot.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new gt(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new tt({key:t,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,a=t.getState(i),c=s.content.size,u=l.nodes[this.options.node];if(a)return o.insert(c,u.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!Wp({node:i,types:e})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!Wp({node:i,types:e})}}})]}}),oR=ot.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Sb(t,e),redo:()=>({state:t,dispatch:e})=>Cb(t,e)}},addProseMirrorPlugins(){return[tR(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),lR=ot.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(P_.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(O_.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(db.configure(this.options.bulletList)),this.options.code!==!1&&i.push(B_.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(V_.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(j_.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(nR.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(rR.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(W_.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(U_.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(oR.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(K_.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(X_.configure(this.options.italic)),this.options.listItem!==!1&&i.push(hb.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(xb.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(wO.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(vb.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(RO.configure(this.options.paragraph)),this.options.strike!==!1&&i.push($O.configure(this.options.strike)),this.options.text!==!1&&i.push(PO.configure(this.options.text)),this.options.underline!==!1&&i.push(LO.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(sR.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),aR=lR,cR=iR,uR=t=>nt({find:/--$/,replace:t??"—"}),fR=t=>nt({find:/\.\.\.$/,replace:t??"…"}),dR=t=>nt({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:t??"“"}),hR=t=>nt({find:/"$/,replace:t??"”"}),pR=t=>nt({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:t??"‘"}),mR=t=>nt({find:/'$/,replace:t??"’"}),gR=t=>nt({find:/<-$/,replace:t??"←"}),yR=t=>nt({find:/->$/,replace:t??"→"}),bR=t=>nt({find:/\(c\)$/,replace:t??"©"}),xR=t=>nt({find:/\(tm\)$/,replace:t??"™"}),vR=t=>nt({find:/\(sm\)$/,replace:t??"℠"}),kR=t=>nt({find:/\(r\)$/,replace:t??"®"}),wR=t=>nt({find:/(?:^|\s)(1\/2)\s$/,replace:t??"½"}),SR=t=>nt({find:/\+\/-$/,replace:t??"±"}),CR=t=>nt({find:/!=$/,replace:t??"≠"}),TR=t=>nt({find:/<<$/,replace:t??"«"}),ER=t=>nt({find:/>>$/,replace:t??"»"}),MR=t=>nt({find:/\d+\s?([*x])\s?\d+$/,replace:t??"×"}),AR=t=>nt({find:/\^2$/,replace:t??"²"}),NR=t=>nt({find:/\^3$/,replace:t??"³"}),_R=t=>nt({find:/(?:^|\s)(1\/4)\s$/,replace:t??"¼"}),OR=t=>nt({find:/(?:^|\s)(3\/4)\s$/,replace:t??"¾"}),RR=ot.create({name:"typography",addOptions(){return{closeDoubleQuote:"”",closeSingleQuote:"’",copyright:"©",ellipsis:"…",emDash:"—",laquo:"«",leftArrow:"←",multiplication:"×",notEqual:"≠",oneHalf:"½",oneQuarter:"¼",openDoubleQuote:"“",openSingleQuote:"‘",plusMinus:"±",raquo:"»",registeredTrademark:"®",rightArrow:"→",servicemark:"℠",superscriptThree:"³",superscriptTwo:"²",threeQuarters:"¾",trademark:"™"}},addInputRules(){const t=[];return this.options.emDash!==!1&&t.push(uR(this.options.emDash)),this.options.ellipsis!==!1&&t.push(fR(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&t.push(dR(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&t.push(hR(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&t.push(pR(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&t.push(mR(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&t.push(gR(this.options.leftArrow)),this.options.rightArrow!==!1&&t.push(yR(this.options.rightArrow)),this.options.copyright!==!1&&t.push(bR(this.options.copyright)),this.options.trademark!==!1&&t.push(xR(this.options.trademark)),this.options.servicemark!==!1&&t.push(vR(this.options.servicemark)),this.options.registeredTrademark!==!1&&t.push(kR(this.options.registeredTrademark)),this.options.oneHalf!==!1&&t.push(wR(this.options.oneHalf)),this.options.plusMinus!==!1&&t.push(SR(this.options.plusMinus)),this.options.notEqual!==!1&&t.push(CR(this.options.notEqual)),this.options.laquo!==!1&&t.push(TR(this.options.laquo)),this.options.raquo!==!1&&t.push(ER(this.options.raquo)),this.options.multiplication!==!1&&t.push(MR(this.options.multiplication)),this.options.superscriptTwo!==!1&&t.push(AR(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&t.push(NR(this.options.superscriptThree)),this.options.oneQuarter!==!1&&t.push(_R(this.options.oneQuarter)),this.options.threeQuarters!==!1&&t.push(OR(this.options.threeQuarters)),t}}),DR=RR;const IR={class:"rich-text-editor"},$R={__name:"RichTextEditor",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Tell your story..."}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=N_({content:r.modelValue,extensions:[aR.configure({heading:{levels:[1,2,3]}}),cR.configure({placeholder:r.placeholder}),DR],editorProps:{attributes:{class:"outline-none min-h-[400px]"},handleKeyDown:(o,l)=>{if(l.key==="Tab"){l.preventDefault();const{state:a,dispatch:c}=o,{$from:u}=a.selection,f=a.tr;return l.shiftKey?f.lift(u.blockRange()):f.insertText("  "),c(f),!0}return!1}},onUpdate:({editor:o})=>{i("update:modelValue",o.getHTML())}});return Cn(()=>r.modelValue,o=>{s.value&&s.value.getHTML()!==o&&s.value.commands.setContent(o,!1)}),eo(()=>{s.value?.destroy()}),e({editor:s}),(o,l)=>(ce(),Re("div",IR,[ye(me(A_),{editor:me(s),class:"prose prose-lg max-w-none"},null,8,["editor"])]))}},PR={class:"flex items-center justify-between px-8 py-4 border-b"},LR={class:"flex items-center gap-4"},zR={class:"flex items-center gap-2"},BR={class:"flex gap-1"},FR=["onClick","title"],HR={class:"max-w-3xl mx-auto px-8 py-8"},VR=["value"],jR={class:"space-y-4"},WR={class:"px-8 py-4 border-t bg-muted/30 flex items-center justify-between"},UR={class:"flex items-center gap-3 text-sm text-muted-foreground"},KR={key:0},qR={key:1,class:"text-muted-foreground/50"},JR={key:2},GR={class:"flex gap-2"},YR={__name:"NodeEditor",props:{editingNode:Object,editingTitle:String,editingDescription:String,editingColor:Number,colorConfig:Array},emits:["update:title","update:description","update:color","save","close"],setup(t,{emit:e}){const n=t,r=e,i=we(null),s=we(null),o=we([]),l=we(0),a=Tn(()=>n.editingDescription?n.editingDescription.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(m=>m.length>0).length:0),c=Tn(()=>n.editingDescription?n.editingDescription.replace(/<[^>]*>/g,"").trim().length:0),u=p=>n.colorConfig.findIndex(m=>m.id===p),f=(p,m=!1)=>{r("update:color",p);const g=u(p);g!==-1&&(l.value=g,qr(m?()=>{i.value?.focus()}:()=>{o.value[g]?.focus()}))},d=p=>{if(p.key==="Escape"){p.preventDefault(),r("close");return}if(p.key==="Enter"&&document.activeElement===i.value){p.preventDefault(),r("save");return}if(p.key==="Enter"&&(p.ctrlKey||p.metaKey)){p.preventDefault(),r("save");return}},h=p=>{r("update:description",p)};return ai(()=>{i.value?.focus(),(n.editingTitle==="New Child"||n.editingTitle==="New Sibling")&&qr(()=>{i.value&&i.value.select()});const p=u(n.editingColor);p!==-1&&(l.value=p)}),Cn(()=>n.editingColor,p=>{const m=u(p);m!==-1&&(l.value=m)}),(p,m)=>(ce(),Ue(wa,{class:"fixed right-0 top-0 sm:w-[15%] md:w-[25%] lg:w-[35%] xl:w-[35%] max-w-[600px] h-screen z-50 rounded-none flex flex-col overflow-hidden"},{default:xe(()=>[te("div",PR,[te("div",LR,[m[4]||(m[4]=te("h3",{class:"text-sm font-medium text-muted-foreground"},"Edit Node",-1)),te("div",zR,[te("div",BR,[(ce(!0),Re(ft,null,pa(t.colorConfig.slice(0,8),(g,y)=>(ce(),Re("button",{key:g.id,onClick:w=>f(g.id),class:Ct(["h-6 w-6 rounded-full border-2 transition-all hover:scale-110",t.editingColor===g.id?"ring-2 ring-offset-2 ring-slate-400 z-10":""]),style:ei({borderColor:`var(${g.cssVar})`,backgroundColor:t.editingColor===g.id?`var(${g.cssVar})`:"white"}),title:g.name},null,14,FR))),128))])])]),ye(He,{onClick:m[0]||(m[0]=g=>p.$emit("close")),variant:"ghost",size:"icon",class:"h-8 w-8"},{default:xe(()=>m[5]||(m[5]=[te("span",{class:"material-icons text-xl"},"close",-1)])),_:1,__:[5]})]),te("div",{class:"flex-1 overflow-y-auto",onKeydown:d},[te("div",HR,[te("input",{value:t.editingTitle,onInput:m[1]||(m[1]=g=>p.$emit("update:title",g.target.value)),placeholder:"Title",ref_key:"titleInput",ref:i,class:"w-full text-3xl font-bold border-none outline-none bg-transparent placeholder:text-muted-foreground/50 mb-6"},null,40,VR),te("div",jR,[ye($R,{ref_key:"descriptionInput",ref:s,"model-value":t.editingDescription,"onUpdate:modelValue":h,placeholder:"Tell your story..."},null,8,["model-value"])])])],32),te("div",WR,[te("div",UR,[t.editingDescription?(ce(),Re("span",KR,Wt(a.value)+" words",1)):Ze("",!0),t.editingDescription&&c.value?(ce(),Re("span",qR,"•")):Ze("",!0),c.value?(ce(),Re("span",JR,Wt(c.value)+" characters",1)):Ze("",!0)]),te("div",GR,[ye(He,{onClick:m[2]||(m[2]=g=>p.$emit("save")),type:"button",size:"sm"},{default:xe(()=>m[6]||(m[6]=[st(" Save "),te("kbd",{class:"ml-2 px-1.5 py-0.5 text-xs bg-background/50 rounded"},"⌘↵",-1)])),_:1,__:[6]}),ye(He,{onClick:m[3]||(m[3]=g=>p.$emit("close")),variant:"ghost",size:"sm",type:"button"},{default:xe(()=>m[7]||(m[7]=[st("Cancel")])),_:1,__:[7]})])])]),_:1}))}},XR=_n(YR,[["__scopeId","data-v-3f4aa494"]]),QR={key:3,class:"p-2"},ZR={class:"grid grid-cols-4 gap-1"},eD=["onClick","title"],tD={__name:"ContextMenu",props:{contextMenu:Object,hasConnections:Boolean,nodeColorConfig:Array},emits:["add-child","add-sibling","start-connection","remove-connections","edit-node","delete-node","change-children-color"],setup(t,{emit:e}){const n=t,r=e,i=we(!1),s=Tn(()=>n.contextMenu?.node?.hasChildren||!1),o=Tn(()=>({left:`${n.contextMenu.x}px`,top:`${n.contextMenu.y}px`})),l=a=>{i.value=!1,r("change-children-color",a)};return(a,c)=>(ce(),Ue(wa,{class:"fixed min-w-[80px] max-w-[250px] z-[300] p-1",style:ei(o.value),onClick:c[7]||(c[7]=fg(()=>{},["stop"]))},{default:xe(()=>[ye(He,{onClick:c[0]||(c[0]=u=>a.$emit("add-child")),variant:"ghost",size:"sm",class:"w-full justify-start text-sm"},{default:xe(()=>c[8]||(c[8]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"add",-1),st(" Add Child ")])),_:1,__:[8]}),t.contextMenu.node?.parent?(ce(),Ue(He,{key:0,onClick:c[1]||(c[1]=u=>a.$emit("add-sibling")),variant:"ghost",size:"sm",class:"w-full justify-start text-sm"},{default:xe(()=>c[9]||(c[9]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"add_circle_outline",-1),st(" Add Sibling ")])),_:1,__:[9]})):Ze("",!0),t.contextMenu.node?.parent?(ce(),Ue(He,{key:1,onClick:c[2]||(c[2]=u=>a.$emit("start-connection")),variant:"ghost",size:"sm",class:"w-full justify-start text-sm"},{default:xe(()=>c[10]||(c[10]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"link",-1),st(" Connect to... ")])),_:1,__:[10]})):Ze("",!0),t.hasConnections?(ce(),Ue(He,{key:2,onClick:c[3]||(c[3]=u=>a.$emit("remove-connections")),variant:"ghost",size:"sm",class:"w-full justify-start text-sm"},{default:xe(()=>c[11]||(c[11]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"link_off",-1),st(" Remove Links ")])),_:1,__:[11]})):Ze("",!0),ye(He,{onClick:c[4]||(c[4]=u=>a.$emit("edit-node")),variant:"ghost",size:"sm",class:"w-full justify-start text-sm"},{default:xe(()=>c[12]||(c[12]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"edit",-1),st(" Edit ")])),_:1,__:[12]}),i.value?(ce(),Re("div",QR,[c[13]||(c[13]=te("div",{class:"text-xs text-muted-foreground mb-2"},"Select color for all children:",-1)),te("div",ZR,[(ce(!0),Re(ft,null,pa(t.nodeColorConfig,u=>(ce(),Re("button",{key:u.id,onClick:f=>l(u.id),class:"w-6 h-6 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-colors",style:ei({backgroundColor:`var(${u.cssVar})`}),title:u.name},null,12,eD))),128))])])):Ze("",!0),s.value&&!i.value?(ce(),Ue(He,{key:4,onClick:c[5]||(c[5]=u=>i.value=!0),variant:"ghost",size:"sm",class:"w-full justify-start text-sm"},{default:xe(()=>c[14]||(c[14]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"palette",-1),st(" Change Children Color ")])),_:1,__:[14]})):Ze("",!0),c[16]||(c[16]=te("div",{class:"my-1 h-px bg-border"},null,-1)),ye(He,{onClick:c[6]||(c[6]=u=>a.$emit("delete-node")),variant:"ghost",size:"sm",class:"w-full justify-start text-sm text-destructive hover:text-destructive"},{default:xe(()=>c[15]||(c[15]=[te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"delete",-1),st(" Delete ")])),_:1,__:[15]})]),_:1,__:[16]},8,["style"]))}},nD=_n(tD,[["__scopeId","data-v-f936fa1e"]]),rD={class:"max-h-[200px] overflow-y-auto"},iD={class:"border-t mt-2 pt-2"},sD={__name:"ConnectionList",props:{connections:Array,x:Number,y:Number},emits:["remove-connection","close"],setup(t){return(e,n)=>(ce(),Ue(wa,{class:"fixed min-w-[200px] max-w-[300px] z-[300] p-2",style:ei({left:`${t.x}px`,top:`${t.y}px`}),onClick:n[1]||(n[1]=fg(()=>{},["stop"]))},{default:xe(()=>[n[4]||(n[4]=te("div",{class:"text-sm font-medium mb-2 px-2"},"Remove Connection:",-1)),te("div",rD,[(ce(!0),Re(ft,null,pa(t.connections,r=>(ce(),Ue(He,{key:`${r.source}-${r.target}`,onClick:i=>e.$emit("remove-connection",r),variant:"ghost",size:"sm",class:"w-full justify-start text-sm mb-1"},{default:xe(()=>[n[2]||(n[2]=te("span",{class:"material-icons mr-2",style:{"font-size":"16px"}},"link",-1)),st(" "+Wt(r.label),1)]),_:2,__:[2]},1032,["onClick"]))),128))]),te("div",iD,[ye(He,{onClick:n[0]||(n[0]=r=>e.$emit("close")),variant:"ghost",size:"sm",class:"w-full justify-center text-sm"},{default:xe(()=>n[3]||(n[3]=[st(" Cancel ")])),_:1,__:[3]})])]),_:1,__:[4]},8,["style"]))}},oD=["title"],lD={class:"material-icons"},aD={key:0,class:"ml-2 text-xs font-medium"},cD={key:0,class:"help-content"},uD={__name:"HelpPanel",setup(t){const e=we(!1),n=()=>{e.value=!e.value};return(r,i)=>(ce(),Re("div",{class:Ct(["help-panel",{expanded:e.value}])},[te("button",{onClick:n,class:"toggle-button",title:e.value?"Hide Help":"Show Help"},[te("span",lD,Wt(e.value?"help":"help_outline"),1),e.value?Ze("",!0):(ce(),Re("span",aD,"Help"))],8,oD),e.value?(ce(),Re("div",cD,[te("div",{class:"help-header"},[i[1]||(i[1]=te("h3",{class:"text-sm font-semibold"},"Keyboard Shortcuts & Tips",-1)),te("button",{onClick:n,class:"close-button"},i[0]||(i[0]=[te("span",{class:"material-icons text-base"},"close",-1)]))]),i[2]||(i[2]=zv('<div class="help-sections" data-v-1dae1059><div class="help-section" data-v-1dae1059><h4 class="section-title" data-v-1dae1059>Navigation</h4><table class="shortcut-table" data-v-1dae1059><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>←</kbd><kbd data-v-1dae1059>→</kbd><kbd data-v-1dae1059>↑</kbd><kbd data-v-1dae1059>↓</kbd></td><td class="shortcut-desc" data-v-1dae1059>Navigate between nodes</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>F</kbd></td><td class="shortcut-desc" data-v-1dae1059>Focus on selected node</td></tr></table></div><div class="help-section" data-v-1dae1059><h4 class="section-title" data-v-1dae1059>Node Operations</h4><table class="shortcut-table" data-v-1dae1059><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>Tab</kbd></td><td class="shortcut-desc" data-v-1dae1059>Add child node</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>Enter</kbd></td><td class="shortcut-desc" data-v-1dae1059>Add sibling node</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>E</kbd></td><td class="shortcut-desc" data-v-1dae1059>Edit selected node</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>⌘/Ctrl</kbd> + <kbd data-v-1dae1059>Del</kbd></td><td class="shortcut-desc" data-v-1dae1059>Delete selected node</td></tr></table></div><div class="help-section" data-v-1dae1059><h4 class="section-title" data-v-1dae1059>In Editor</h4><table class="shortcut-table" data-v-1dae1059><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>Enter</kbd></td><td class="shortcut-desc" data-v-1dae1059>Save (from title)</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>⌘/Ctrl</kbd> + <kbd data-v-1dae1059>Enter</kbd></td><td class="shortcut-desc" data-v-1dae1059>Save (from anywhere)</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>Esc</kbd></td><td class="shortcut-desc" data-v-1dae1059>Cancel editing</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>Tab</kbd></td><td class="shortcut-desc" data-v-1dae1059>Indent text</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059><kbd data-v-1dae1059>Shift</kbd> + <kbd data-v-1dae1059>Tab</kbd></td><td class="shortcut-desc" data-v-1dae1059>Outdent text</td></tr></table></div><div class="help-section" data-v-1dae1059><h4 class="section-title" data-v-1dae1059>Mouse Actions</h4><table class="shortcut-table" data-v-1dae1059><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059>Double-click</td><td class="shortcut-desc" data-v-1dae1059>Edit node</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059>Right-click</td><td class="shortcut-desc" data-v-1dae1059>Open context menu</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059>Drag</td><td class="shortcut-desc" data-v-1dae1059>Pan the canvas</td></tr><tr data-v-1dae1059><td class="shortcut-keys" data-v-1dae1059>Scroll</td><td class="shortcut-desc" data-v-1dae1059>Zoom in/out</td></tr></table></div><div class="help-section" data-v-1dae1059><h4 class="section-title" data-v-1dae1059>Tips</h4><ul class="tips-list" data-v-1dae1059><li data-v-1dae1059>Use <strong data-v-1dae1059>Connect to</strong> in context menu to create visual links</li><li data-v-1dae1059>Colors are inherited from parent nodes</li><li data-v-1dae1059>Markdown shortcuts work in the editor (##, **, -, etc.)</li><li data-v-1dae1059>Export/Import buttons support full Markdown</li></ul></div></div>',1))])):Ze("",!0)],2))}},fD=_n(uD,[["__scopeId","data-v-1dae1059"]]),dD={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},hD={class:"relative z-10"},Tb={__name:"Dialog",props:{open:Boolean},emits:["update:open"],setup(t){return(e,n)=>(ce(),Ue(jx,{to:"body"},[ye(Zv,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:xe(()=>[t.open?(ce(),Re("div",dD,[te("div",{class:"fixed inset-0 bg-black/50",onClick:n[0]||(n[0]=r=>e.$emit("update:open",!1))}),te("div",hD,[_t(e.$slots,"default")])])):Ze("",!0)]),_:3})]))}},Eb={__name:"DialogContent",props:{className:{type:String,default:""}},setup(t){return(e,n)=>(ce(),Re("div",{class:Ct(["relative bg-white rounded-lg shadow-lg w-full overflow-hidden",t.className])},[_t(e.$slots,"default")],2))}},pD={},mD={class:"text-sm text-gray-500 mt-1"};function gD(t,e){return ce(),Re("p",mD,[_t(t.$slots,"default")])}const Mb=_n(pD,[["render",gD]]),yD={},bD={class:"px-6 pb-6 pt-4 flex justify-end gap-2"};function xD(t,e){return ce(),Re("div",bD,[_t(t.$slots,"default")])}const Ab=_n(yD,[["render",xD]]),vD={},kD={class:"px-6 pt-6 pb-2"};function wD(t,e){return ce(),Re("div",kD,[_t(t.$slots,"default")])}const Nb=_n(vD,[["render",wD]]),SD={},CD={class:"text-lg font-semibold"};function TD(t,e){return ce(),Re("h2",CD,[_t(t.$slots,"default")])}const _b=_n(SD,[["render",TD]]),ED={__name:"AlertDialog",props:{open:Boolean},emits:["update:open"],setup(t){return(e,n)=>(ce(),Ue(me(Tb),{open:t.open,"onUpdate:open":n[0]||(n[0]=r=>e.$emit("update:open",r))},{default:xe(()=>[_t(e.$slots,"default")]),_:3},8,["open"]))}},MD={__name:"AlertDialogAction",emits:["click"],setup(t){return(e,n)=>(ce(),Ue(He,to(e.$attrs,{onClick:n[0]||(n[0]=r=>e.$emit("click"))}),{default:xe(()=>[_t(e.$slots,"default")]),_:3},16))}},AD={__name:"AlertDialogCancel",emits:["click"],setup(t){return(e,n)=>(ce(),Ue(He,to({variant:"outline"},e.$attrs,{onClick:n[0]||(n[0]=r=>e.$emit("click"))}),{default:xe(()=>[_t(e.$slots,"default")]),_:3},16))}},ND={__name:"AlertDialogContent",setup(t){return(e,n)=>(ce(),Ue(me(Eb),{class:"max-w-md"},{default:xe(()=>[_t(e.$slots,"default")]),_:3}))}},_D={__name:"AlertDialogDescription",setup(t){return(e,n)=>(ce(),Ue(me(Mb),null,{default:xe(()=>[_t(e.$slots,"default")]),_:3}))}},OD={__name:"AlertDialogFooter",setup(t){return(e,n)=>(ce(),Ue(me(Ab),null,{default:xe(()=>[_t(e.$slots,"default")]),_:3}))}},RD={__name:"AlertDialogHeader",setup(t){return(e,n)=>(ce(),Ue(me(Nb),null,{default:xe(()=>[_t(e.$slots,"default")]),_:3}))}},DD={__name:"AlertDialogTitle",setup(t){return(e,n)=>(ce(),Ue(me(_b),null,{default:xe(()=>[_t(e.$slots,"default")]),_:3}))}},ID={class:"mt-4"},$D={key:0,class:"flex justify-center py-8"},PD={key:1,class:"text-red-500 text-sm py-4"},LD={key:2,class:"text-gray-500 text-center py-8"},zD={key:3,class:"space-y-2 max-h-96 overflow-y-auto"},BD=["onClick"],FD={class:"font-medium"},HD={class:"text-sm text-gray-500"},VD=["onClick"],jD={class:"text-sm text-gray-500"},WD={__name:"FileList",props:{open:Boolean,files:{type:Array,default:()=>[]},currentFileId:[String,Number],maxFiles:{type:Number,default:10},loading:Boolean,error:String},emits:["update:open","load-file","delete-file","refresh"],setup(t,{emit:e}){const n=t,r=e,i=we(!1),s=we(null),o=c=>{const u=new Date(c),d=new Date-u;if(d<6e4)return"just now";if(d<36e5){const h=Math.floor(d/6e4);return`${h} minute${h>1?"s":""} ago`}if(d<864e5){const h=Math.floor(d/36e5);return`${h} hour${h>1?"s":""} ago`}if(d<6048e5){const h=Math.floor(d/864e5);return`${h} day${h>1?"s":""} ago`}return u.toLocaleDateString()},l=c=>{s.value=c,i.value=!0},a=()=>{s.value&&(r("delete-file",s.value.id),i.value=!1,s.value=null)};return Cn(()=>n.open,c=>{c&&r("refresh")}),(c,u)=>(ce(),Re(ft,null,[ye(me(Tb),{open:t.open,"onUpdate:open":u[1]||(u[1]=f=>c.$emit("update:open",f))},{default:xe(()=>[ye(me(Eb),{class:"max-w-2xl"},{default:xe(()=>[ye(me(Nb),null,{default:xe(()=>[ye(me(_b),null,{default:xe(()=>u[3]||(u[3]=[st("Saved Mindmaps")])),_:1,__:[3]}),ye(me(Mb),null,{default:xe(()=>[st(" Select a mindmap to open or manage your saved files (max "+Wt(t.maxFiles)+" files) ",1)]),_:1})]),_:1}),te("div",ID,[t.loading?(ce(),Re("div",$D,u[4]||(u[4]=[te("span",{class:"material-icons animate-spin text-gray-400"},"refresh",-1)]))):t.error?(ce(),Re("div",PD,Wt(t.error),1)):t.files.length===0?(ce(),Re("div",LD," No saved mindmaps yet. Create your first one! ")):(ce(),Re("div",zD,[(ce(!0),Re(ft,null,pa(t.files,f=>(ce(),Re("div",{key:f.id,class:Ct(["flex items-center gap-3 p-3 rounded-lg border hover:bg-gray-50 transition-colors group",{"border-blue-500 bg-blue-50":t.currentFileId===f.id}])},[te("button",{onClick:d=>c.$emit("load-file",f.id),class:"flex-1 text-left"},[te("div",FD,Wt(f.name),1),te("div",HD," Updated "+Wt(o(f.updatedAt)),1)],8,BD),te("button",{onClick:d=>l(f),class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-50 rounded",title:"Delete file"},u[5]||(u[5]=[te("span",{class:"material-icons text-red-500 text-xl"},"delete",-1)]),8,VD)],2))),128))]))]),ye(me(Ab),{class:"flex items-center justify-between"},{default:xe(()=>[te("div",jD,Wt(t.files.length)+" of "+Wt(t.maxFiles)+" files used ",1),ye(He,{onClick:u[0]||(u[0]=f=>c.$emit("update:open",!1)),variant:"outline"},{default:xe(()=>u[6]||(u[6]=[st(" Cancel ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["open"]),ye(me(ED),{open:i.value,"onUpdate:open":u[2]||(u[2]=f=>i.value=f)},{default:xe(()=>[ye(me(ND),null,{default:xe(()=>[ye(me(RD),null,{default:xe(()=>[ye(me(DD),null,{default:xe(()=>u[7]||(u[7]=[st("Delete Mindmap?")])),_:1,__:[7]}),ye(me(_D),null,{default:xe(()=>[st(' Are you sure you want to delete "'+Wt(s.value?.name)+'"? This action cannot be undone. ',1)]),_:1})]),_:1}),ye(me(OD),null,{default:xe(()=>[ye(me(AD),null,{default:xe(()=>u[8]||(u[8]=[st("Cancel")])),_:1,__:[8]}),ye(me(MD),{onClick:a,class:"bg-red-500 hover:bg-red-600"},{default:xe(()=>u[9]||(u[9]=[st(" Delete ")])),_:1,__:[9]})]),_:1})]),_:1})]),_:1},8,["open"])],64))}};function Jf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var fi=Jf();function Ob(t){fi=t}var Es={exec:()=>null};function Be(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(zt.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}var zt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},UD=/^(?:[ \t]*(?:\n|$))+/,KD=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qD=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,uo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,JD=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Gf=/(?:[*+-]|\d{1,9}[.)])/,Rb=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Db=Be(Rb).replace(/bull/g,Gf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),GD=Be(Rb).replace(/bull/g,Gf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Yf=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,YD=/^[^\n]+/,Xf=/(?!\s*\])(?:\\.|[^\[\]\\])+/,XD=Be(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Xf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),QD=Be(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Gf).getRegex(),La="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Qf=/\x3C!--(?:-?>|[\s\S]*?(?:-->|$))/,ZD=Be("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Qf).replace("tag",La).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ib=Be(Yf).replace("hr",uo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",La).getRegex(),eI=Be(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ib).getRegex(),Zf={blockquote:eI,code:KD,def:XD,fences:qD,heading:JD,hr:uo,html:ZD,lheading:Db,list:QD,newline:UD,paragraph:Ib,table:Es,text:YD},Up=Be("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",uo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",La).getRegex(),tI={...Zf,lheading:GD,table:Up,paragraph:Be(Yf).replace("hr",uo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Up).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",La).getRegex()},nI={...Zf,html:Be(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Qf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Es,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Be(Yf).replace("hr",uo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Db).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},rI=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,iI=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,$b=/^( {2,}|\\)\n(?!\s*$)/,sI=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,za=/[\p{P}\p{S}]/u,ed=/[\s\p{P}\p{S}]/u,Pb=/[^\s\p{P}\p{S}]/u,oI=Be(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ed).getRegex(),Lb=/(?!~)[\p{P}\p{S}]/u,lI=/(?!~)[\s\p{P}\p{S}]/u,aI=/(?:[^\s\p{P}\p{S}]|~)/u,cI=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,zb=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,uI=Be(zb,"u").replace(/punct/g,za).getRegex(),fI=Be(zb,"u").replace(/punct/g,Lb).getRegex(),Bb="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",dI=Be(Bb,"gu").replace(/notPunctSpace/g,Pb).replace(/punctSpace/g,ed).replace(/punct/g,za).getRegex(),hI=Be(Bb,"gu").replace(/notPunctSpace/g,aI).replace(/punctSpace/g,lI).replace(/punct/g,Lb).getRegex(),pI=Be("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Pb).replace(/punctSpace/g,ed).replace(/punct/g,za).getRegex(),mI=Be(/\\(punct)/,"gu").replace(/punct/g,za).getRegex(),gI=Be(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),yI=Be(Qf).replace("(?:-->|$)","-->").getRegex(),bI=Be("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",yI).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Zl=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xI=Be(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Zl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Fb=Be(/^!?\[(label)\]\[(ref)\]/).replace("label",Zl).replace("ref",Xf).getRegex(),Hb=Be(/^!?\[(ref)\](?:\[\])?/).replace("ref",Xf).getRegex(),vI=Be("reflink|nolink(?!\\()","g").replace("reflink",Fb).replace("nolink",Hb).getRegex(),td={_backpedal:Es,anyPunctuation:mI,autolink:gI,blockSkip:cI,br:$b,code:iI,del:Es,emStrongLDelim:uI,emStrongRDelimAst:dI,emStrongRDelimUnd:pI,escape:rI,link:xI,nolink:Hb,punctuation:oI,reflink:Fb,reflinkSearch:vI,tag:bI,text:sI,url:Es},kI={...td,link:Be(/^!?\[(label)\]\((.*?)\)/).replace("label",Zl).getRegex(),reflink:Be(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Zl).getRegex()},$u={...td,emStrongRDelimAst:hI,emStrongLDelim:fI,url:Be(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},wI={...$u,br:Be($b).replace("{2,}","*").getRegex(),text:Be($u.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$o={normal:Zf,gfm:tI,pedantic:nI},Zi={normal:td,gfm:$u,breaks:wI,pedantic:kI},SI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kp=t=>SI[t];function yn(t,e){if(e){if(zt.escapeTest.test(t))return t.replace(zt.escapeReplace,Kp)}else if(zt.escapeTestNoEncode.test(t))return t.replace(zt.escapeReplaceNoEncode,Kp);return t}function qp(t){try{t=encodeURI(t).replace(zt.percentDecode,"%")}catch{return null}return t}function Jp(t,e){let n=t.replace(zt.findPipe,(s,o,l)=>{let a=!1,c=o;for(;--c>=0&&l[c]==="\\";)a=!a;return a?"|":" |"}),r=n.split(zt.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(zt.slashPipe,"|");return r}function es(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function CI(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Gp(t,e,n,r,i){let s=e.href,o=e.title||null,l=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let a={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,a}function TI(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[l]=o;return l.length>=i.length?s.slice(i.length):s}).join(`
`)}var ea=class{options;rules;lexer;constructor(t){this.options=t||fi}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:es(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],r=TI(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let r=es(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:es(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=es(e[0],`
`).split(`
`),r="",i="",s=[];for(;n.length>0;){let o=!1,l=[],a;for(a=0;a<n.length;a++)if(this.rules.other.blockquoteStart.test(n[a]))l.push(n[a]),o=!0;else if(!o)l.push(n[a]);else break;n=n.slice(a);let c=l.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=f,n.length===0)break;let d=s.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){let h=d,p=h.raw+`
`+n.join(`
`),m=this.blockquote(p);s[s.length-1]=m,r=r.substring(0,r.length-h.raw.length)+m.raw,i=i.substring(0,i.length-h.text.length)+m.text;break}else if(d?.type==="list"){let h=d,p=h.raw+`
`+n.join(`
`),m=this.list(p);s[s.length-1]=m,r=r.substring(0,r.length-d.raw.length)+m.raw,i=i.substring(0,i.length-h.raw.length)+m.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let s=this.rules.other.listItemRegex(n),o=!1;for(;t;){let a=!1,c="",u="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),d=t.split(`
`,1)[0],h=!f.trim(),p=0;if(this.options.pedantic?(p=2,u=f.trimStart()):h?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=f.slice(p),p+=e[1].length),h&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,t=t.substring(d.length+1),a=!0),!a){let y=this.rules.other.nextBulletRegex(p),w=this.rules.other.hrRegex(p),N=this.rules.other.fencesBeginRegex(p),v=this.rules.other.headingBeginRegex(p),E=this.rules.other.htmlBeginRegex(p);for(;t;){let B=t.split(`
`,1)[0],$;if(d=B,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),$=d):$=d.replace(this.rules.other.tabCharGlobal,"    "),N.test(d)||v.test(d)||E.test(d)||y.test(d)||w.test(d))break;if($.search(this.rules.other.nonSpaceChar)>=p||!d.trim())u+=`
`+$.slice(p);else{if(h||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||N.test(f)||v.test(f)||w.test(f))break;u+=`
`+d}!h&&!d.trim()&&(h=!0),c+=B+`
`,t=t.substring(B.length+1),f=$.slice(p)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,g;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(g=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:g,loose:!1,text:u,tokens:[]}),i.raw+=c}let l=i.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let a=0;a<i.items.length;a++)if(this.lexer.state.top=!1,i.items[a].tokens=this.lexer.blockTokens(i.items[a].text,[]),!i.loose){let c=i.items[a].tokens.filter(f=>f.type==="space"),u=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=u}if(i.loose)for(let a=0;a<i.items.length;a++)i.items[a].loose=!0;return i}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=Jp(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(let o of i)s.rows.push(Jp(o,s.header.length).map((l,a)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[a]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=es(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=CI(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Gp(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return Gp(n,i,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...r[0]].length-1,s,o,l=i,a=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+i);(r=c.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(o=[...s].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&i%3&&!((i+o)%3)){a+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+a);let u=[...r[0]][0].length,f=t.slice(0,i+r.index+u+o);if(Math.min(i,o)%2){let h=f.slice(1,-1);return{type:"em",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}let d=f.slice(2,-2);return{type:"strong",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Kn=class Pu{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||fi,this.options.tokenizer=this.options.tokenizer||new ea,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:zt,block:$o.normal,inline:Zi.normal};this.options.pedantic?(n.block=$o.pedantic,n.inline=Zi.pedantic):this.options.gfm&&(n.block=$o.gfm,this.options.breaks?n.inline=Zi.breaks:n.inline=Zi.gfm),this.tokenizer.rules=n}static get rules(){return{block:$o,inline:Zi}}static lex(e,n){return new Pu(n).lex(e)}static lexInline(e,n){return new Pu(n).inlineTokens(e)}lex(e){e=e.replace(zt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(zt.tabCharGlobal,"    ").replace(zt.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let o=n.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,l=e.slice(1),a;this.options.extensions.startBlock.forEach(c=>{a=c.call({lexer:this},l),typeof a=="number"&&a>=0&&(o=Math.min(o,a))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){let o=n.at(-1);r&&o?.type==="paragraph"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,i=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let l;if(this.options.extensions?.inline?.some(c=>(l=c.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let c=n.at(-1);l.type==="text"&&c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,o)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let a=e;if(this.options.extensions?.startInline){let c=1/0,u=e.slice(1),f;this.options.extensions.startInline.forEach(d=>{f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(a=e.substring(0,c+1))}if(l=this.tokenizer.inlineText(a)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),s=!0;let c=n.at(-1);c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):n.push(l);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}},ta=class{options;parser;constructor(t){this.options=t||fi}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(zt.notSpaceStart)?.[0],i=t.replace(zt.endingNewline,"")+`
`;return r?'<pre><code class="language-'+yn(r)+'">'+(n?i:yn(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:yn(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let o=0;o<t.items.length;o++){let l=t.items[o];r+=this.listitem(l)}let i=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(t){let e="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+yn(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){let s=t.rows[i];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${yn(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),i=qp(t);if(i===null)return r;t=i;let s='<a href="'+t+'"';return e&&(s+=' title="'+yn(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=qp(t);if(i===null)return yn(n);t=i;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${yn(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:yn(t.text)}},nd=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},qn=class Lu{options;renderer;textRenderer;constructor(e){this.options=e||fi,this.options.renderer=this.options.renderer||new ta,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new nd}static parse(e,n){return new Lu(n).parse(e)}static parseInline(e,n){return new Lu(n).parseInline(e)}parse(e,n=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let l=s,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){r+=a||"";continue}}let o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let l=o,a=this.renderer.text(l);for(;i+1<e.length&&e[i+1].type==="text";)l=e[++i],a+=`
`+this.renderer.text(l);n?r+=this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):r+=a;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}parseInline(e,n=this.renderer){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=l||"";continue}}let o=s;switch(o.type){case"escape":{r+=n.text(o);break}case"html":{r+=n.html(o);break}case"link":{r+=n.link(o);break}case"image":{r+=n.image(o);break}case"strong":{r+=n.strong(o);break}case"em":{r+=n.em(o);break}case"codespan":{r+=n.codespan(o);break}case"br":{r+=n.br(o);break}case"del":{r+=n.del(o);break}case"text":{r+=n.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},Qo=class{options;block;constructor(t){this.options=t||fi}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Kn.lex:Kn.lexInline}provideParser(){return this.block?qn.parse:qn.parseInline}},EI=class{defaults=Jf();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=qn;Renderer=ta;TextRenderer=nd;Lexer=Kn;Tokenizer=ea;Hooks=Qo;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let i=r;for(let s of i.header)n=n.concat(this.walkTokens(s.tokens,e));for(let s of i.rows)for(let o of s)n=n.concat(this.walkTokens(o.tokens,e));break}case"list":{let i=r;n=n.concat(this.walkTokens(i.items,e));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{let o=i[s].flat(1/0);n=n.concat(this.walkTokens(o,e))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=s.apply(this,o)),l}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){let i=this.defaults.renderer||new ta(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,l=n.renderer[o],a=i[o];i[o]=(...c)=>{let u=l.apply(i,c);return u===!1&&(u=a.apply(i,c)),u||""}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new ea(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,l=n.tokenizer[o],a=i[o];i[o]=(...c)=>{let u=l.apply(i,c);return u===!1&&(u=a.apply(i,c)),u}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new Qo;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,l=n.hooks[o],a=i[o];Qo.passThroughHooks.has(s)?i[o]=c=>{if(this.defaults.async)return Promise.resolve(l.call(i,c)).then(f=>a.call(i,f));let u=l.call(i,c);return a.call(i,u)}:i[o]=(...c)=>{let u=l.apply(i,c);return u===!1&&(u=a.apply(i,c)),u}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(o){let l=[];return l.push(s.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Kn.lex(t,e??this.defaults)}parser(t,e){return qn.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},i={...this.defaults,...r},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);let o=i.hooks?i.hooks.provideLexer():t?Kn.lex:Kn.lexInline,l=i.hooks?i.hooks.provideParser():t?qn.parse:qn.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(e):e).then(a=>o(a,i)).then(a=>i.hooks?i.hooks.processAllTokens(a):a).then(a=>i.walkTokens?Promise.all(this.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>l(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(e=i.hooks.preprocess(e));let a=o(e,i);i.hooks&&(a=i.hooks.processAllTokens(a)),i.walkTokens&&this.walkTokens(a,i.walkTokens);let c=l(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+yn(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},li=new EI;function ze(t,e){return li.parse(t,e)}ze.options=ze.setOptions=function(t){return li.setOptions(t),ze.defaults=li.defaults,Ob(ze.defaults),ze};ze.getDefaults=Jf;ze.defaults=fi;ze.use=function(...t){return li.use(...t),ze.defaults=li.defaults,Ob(ze.defaults),ze};ze.walkTokens=function(t,e){return li.walkTokens(t,e)};ze.parseInline=li.parseInline;ze.Parser=qn;ze.parser=qn.parse;ze.Renderer=ta;ze.TextRenderer=nd;ze.Lexer=Kn;ze.lexer=Kn.lex;ze.Tokenizer=ea;ze.Hooks=Qo;ze.parse=ze;ze.options;ze.setOptions;ze.use;ze.walkTokens;ze.parseInline;qn.parse;Kn.lex;const MI={key:0,class:"fixed inset-0 z-[500] bg-white overflow-hidden"},AI={class:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-10"},NI={class:"max-w-[680px] mx-auto px-5 py-4 flex justify-between items-center"},_I={class:"h-full overflow-y-auto pt-[73px] pb-20"},OI=["innerHTML"],RI={__name:"MarkdownReader",props:{isOpen:{type:Boolean,required:!0},markdown:{type:String,required:!0}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;ze.use({gfm:!0,breaks:!0,pedantic:!1});const i=Tn(()=>{if(!n.markdown)return"";try{let o=n.markdown;o=o.replace(/<p>\s*\|(.+)\|\s*<\/p>/gm,"|$1|"),o=o.replace(/<p>(\|[^<]+\|)<\/p>/gm,`
$1
`),o=o.replace(/(\|[^\n]+\|)\s*\n\s*\n+\s*(\|[\s-:|]+\|)/gm,`$1
$2`);const l=o.split(`
`),a=[];let c=!1,u=!1;for(let d=0;d<l.length;d++){const h=l[d].trim(),p=h.startsWith("|")&&h.endsWith("|"),m=p&&/^\|[\s-:|]+\|$/.test(h);if(c&&h===""&&d+1<l.length){const g=l[d+1].trim();if(g.startsWith("|")&&g.endsWith("|"))continue}p&&!c?(d>0&&a[a.length-1].trim()!==""&&a.push(""),c=!0):!p&&c&&(a[a.length-1].trim()!==""&&a.push(""),c=!1),a.push(l[d]),u=m}return o=a.join(`
`),ze.parse(o)}catch(o){return console.error("Markdown parsing error:",o),n.markdown}}),s=o=>{o.key==="Escape"&&n.isOpen&&r("close")};return Cn(()=>n.isOpen,o=>{o?document.body.style.overflow="hidden":document.body.style.overflow=""}),ai(()=>{window.addEventListener("keydown",s)}),ha(()=>{window.removeEventListener("keydown",s),document.body.style.overflow=""}),(o,l)=>t.isOpen?(ce(),Re("div",MI,[te("div",AI,[te("div",NI,[l[2]||(l[2]=te("h2",{class:"text-lg font-medium text-gray-800"},"Reading Mode",-1)),te("button",{onClick:l[0]||(l[0]=a=>o.$emit("close")),class:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close reader"},l[1]||(l[1]=[te("span",{class:"material-icons text-gray-600"},"close",-1)]))])]),te("div",_I,[te("article",{class:"markdown-body max-w-[680px] mx-auto px-5",innerHTML:i.value},null,8,OI)])])):Ze("",!0)}},DI=_n(RI,[["__scopeId","data-v-a0479611"]]);function II(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}function zu(t,e){return Array(e+1).join(t)}function $I(t){return t.replace(/^\n*/,"")}function PI(t){for(var e=t.length;e>0&&t[e-1]===`
`;)e--;return t.substring(0,e)}var LI=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function rd(t){return id(t,LI)}var Vb=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function jb(t){return id(t,Vb)}function zI(t){return Ub(t,Vb)}var Wb=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function BI(t){return id(t,Wb)}function FI(t){return Ub(t,Wb)}function id(t,e){return e.indexOf(t.nodeName)>=0}function Ub(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var Rt={};Rt.paragraph={filter:"p",replacement:function(t){return`

`+t+`

`}};Rt.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+`
`}};Rt.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var r=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var i=zu(r===1?"=":"-",t.length);return`

`+t+`
`+i+`

`}else return`

`+zu("#",r)+" "+t+`

`}};Rt.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),`

`+t+`

`}};Rt.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?`
`+t:`

`+t+`

`}};Rt.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",i=e.parentNode;if(i.nodeName==="OL"){var s=i.getAttribute("start"),o=Array.prototype.indexOf.call(i.children,e);r=(s?Number(s)+o:o+1)+".  "}return r+t+(e.nextSibling&&!/\n$/.test(t)?`
`:"")}};Rt.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Rt.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var r=e.firstChild.getAttribute("class")||"",i=(r.match(/language-(\S+)/)||[null,""])[1],s=e.firstChild.textContent,o=n.fence.charAt(0),l=3,a=new RegExp("^"+o+"{3,}","gm"),c;c=a.exec(s);)c[0].length>=l&&(l=c[0].length+1);var u=zu(o,l);return`

`+u+i+`
`+s.replace(/\n$/,"")+`
`+u+`

`}};Rt.horizontalRule={filter:"hr",replacement:function(t,e,n){return`

`+n.hr+`

`}};Rt.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=na(e.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+t+"]("+n+r+")"}};Rt.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var r=e.getAttribute("href"),i=na(e.getAttribute("title"));i&&(i=' "'+i+'"');var s,o;switch(n.linkReferenceStyle){case"collapsed":s="["+t+"][]",o="["+t+"]: "+r+i;break;case"shortcut":s="["+t+"]",o="["+t+"]: "+r+i;break;default:var l=this.references.length+1;s="["+t+"]["+l+"]",o="["+l+"]: "+r+i}return this.references.push(o),s},references:[],append:function(t){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};Rt.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}};Rt.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}};Rt.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",r=t.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}};Rt.image={filter:"img",replacement:function(t,e){var n=na(e.getAttribute("alt")),r=e.getAttribute("src")||"",i=na(e.getAttribute("title")),s=i?' "'+i+'"':"";return r?"!["+n+"]("+r+s+")":""}};function na(t){return t?t.replace(/(\n+\s*)+/g,`
`):""}function Kb(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}Kb.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=Oc(this.array,t,this.options))||(e=Oc(this._keep,t,this.options))||(e=Oc(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function Oc(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(HI(i,e,n))return i}}function HI(t,e,n){var r=t.filter;if(typeof r=="string"){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function VI(t){var e=t.element,n=t.isBlock,r=t.isVoid,i=t.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||i(e))){for(var s=null,o=!1,l=null,a=Yp(l,e,i);a!==e;){if(a.nodeType===3||a.nodeType===4){var c=a.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!o&&c[0]===" "&&(c=c.substr(1)),!c){a=Rc(a);continue}a.data=c,s=a}else if(a.nodeType===1)n(a)||a.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,o=!1):r(a)||i(a)?(s=null,o=!0):s&&(o=!1);else{a=Rc(a);continue}var u=Yp(l,a,i);l=a,a=u}s&&(s.data=s.data.replace(/ $/,""),s.data||Rc(s))}}function Rc(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function Yp(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var sd=typeof window<"u"?window:{};function jI(){var t=sd.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch{}return e}function WI(){var t=function(){};return UI()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function UI(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{sd.ActiveXObject&&(t=!0)}return t}var KI=jI()?sd.DOMParser:WI();function qI(t,e){var n;if(typeof t=="string"){var r=JI().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=t.cloneNode(!0);return VI({element:n,isBlock:rd,isVoid:jb,isPre:e.preformattedCode?GI:null}),n}var Dc;function JI(){return Dc=Dc||new KI,Dc}function GI(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function YI(t,e){return t.isBlock=rd(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=XI(t),t.flankingWhitespace=QI(t,e),t}function XI(t){return!jb(t)&&!BI(t)&&/^\s*$/i.test(t.textContent)&&!zI(t)&&!FI(t)}function QI(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=ZI(t.textContent);return n.leadingAscii&&Xp("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&Xp("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function ZI(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function Xp(t,e,n){var r,i,s;return t==="left"?(r=e.previousSibling,i=/ $/):(r=e.nextSibling,i=/^ /),r&&(r.nodeType===3?s=i.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?s=!1:r.nodeType===1&&!rd(r)&&(s=i.test(r.textContent))),s}var e2=Array.prototype.reduce,t2=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function ra(t){if(!(this instanceof ra))return new ra(t);var e={rules:Rt,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=II({},e,t),this.rules=new Kb(this.options)}ra.prototype={turndown:function(t){if(!i2(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=qb.call(this,new qI(t,this.options));return n2.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return t2.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function qb(t){var e=this;return e2.call(t.childNodes,function(n,r){r=new YI(r,e.options);var i="";return r.nodeType===3?i=r.isCode?r.nodeValue:e.escape(r.nodeValue):r.nodeType===1&&(i=r2.call(e,r)),Jb(n,i)},"")}function n2(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=Jb(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function r2(t){var e=this.rules.forNode(t),n=qb.call(this,t),r=t.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+e.replacement(n,t,this.options)+r.trailing}function Jb(t,e){var n=PI(t),r=$I(e),i=Math.max(t.length-n.length,e.length-r.length),s=`

`.substring(0,i);return n+s+r}function i2(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var Qp=/highlight-(?:text|source)-([a-z0-9]+)/;function s2(t){t.addRule("highlightedCodeBlock",{filter:function(e){var n=e.firstChild;return e.nodeName==="DIV"&&Qp.test(e.className)&&n&&n.nodeName==="PRE"},replacement:function(e,n,r){var i=n.className||"",s=(i.match(Qp)||[null,""])[1];return`

`+r.fence+s+`
`+n.firstChild.textContent+`
`+r.fence+`

`}})}function o2(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var l2=Array.prototype.indexOf,a2=Array.prototype.every,Vi={};Vi.tableCell={filter:["th","td"],replacement:function(t,e){return Gb(t,e)}};Vi.tableRow={filter:"tr",replacement:function(t,e){var n="",r={left:":--",right:"--:",center:":-:"};if(od(e))for(var i=0;i<e.childNodes.length;i++){var s="---",o=(e.childNodes[i].getAttribute("align")||"").toLowerCase();o&&(s=r[o]||s),n+=Gb(s,e.childNodes[i])}return`
`+t+(n?`
`+n:"")}};Vi.table={filter:function(t){return t.nodeName==="TABLE"&&od(t.rows[0])},replacement:function(t){return t=t.replace(`

`,`
`),`

`+t+`

`}};Vi.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function od(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||c2(e))&&a2.call(t.childNodes,function(n){return n.nodeName==="TH"})}function c2(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function Gb(t,e){var n=l2.call(e.parentNode.childNodes,e),r=" ";return n===0&&(r="| "),r+t+" |"}function u2(t){t.keep(function(n){return n.nodeName==="TABLE"&&!od(n.rows[0])});for(var e in Vi)t.addRule(e,Vi[e])}function f2(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}})}function d2(t){t.use([s2,o2,u2,f2])}function h2(t,e){let n="";const r=new ra({headingStyle:"atx",codeBlockStyle:"fenced",bulletListMarker:"-",fence:"```",emDelimiter:"*",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full"});r.use(d2),r.escape=function(o){return o.replace(/\\(?![\\`*_{}[\]()#+\-.!])/g,"\\\\")};const i=o=>{const l=t.find(c=>c.id===o);return!l||!l.parent?1:i(l.parent)+1},s=o=>{const l=o.level||i(o.id);if(l<=6){const c="#".repeat(l);if(n+=`${c} ${o.title}

`,o.description){const u=r.turndown(o.description);n+=`${u}

`}}else{const c="  ".repeat(l-6);if(n+=`${c}- **${o.title}**
`,o.description){const f=r.turndown(o.description).split(`
`).map(d=>c+"  "+d).join(`
`);n+=`${f}
`}}t.filter(c=>c.parent===o.id).forEach(c=>s(c))};return s(e),n}function p2(t){const e=[],n=[];let r=0;const i=t.split(`
`),s=[];let o=null,l=[],a=null,c=!1,u="";const f=(p,m,g=null)=>{const y={id:`node-${r++}`,title:p.trim(),description:"",color:g?g.color:6,level:m,parent:g?g.id:null};return g&&!g.parent?y.direction="east":g&&g.direction&&(y.direction=g.direction),y},d=p=>{const m=[];let g=p;g=g.replace(/```([^\n]*)\n([\s\S]*?)```/g,(N,v,E)=>{const B=`\x3C!--CODE_BLOCK_${m.length}-->`;return m.push(`<pre><code>${E.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`),B}),g=g.replace(/~~~([^\n]*)\n([\s\S]*?)~~~/g,(N,v,E)=>{const B=`\x3C!--CODE_BLOCK_${m.length}-->`;return m.push(`<pre><code>${E.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`),B});const y=[];g=g.replace(/`([^`\n]+)`/g,(N,v)=>{const E=`\x3C!--INLINE_CODE_${y.length}-->`;return y.push(`<code>${v.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code>`),E});let w=g.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>').split(`
`).map(N=>N.includes("\x3C!--CODE_BLOCK_")?N:N.match(/^\s*[-*+]\s+/)?`<li>${N.replace(/^\s*[-*+]\s+/,"")}</li>`:N.trim()?`<p>${N}</p>`:"").join(`
`);return w=w.replace(/(<li>.*<\/li>\n?)+/g,N=>`<ul>${N}</ul>`),m.forEach((N,v)=>{w=w.replace(`\x3C!--CODE_BLOCK_${v}-->`,N)}),y.forEach((N,v)=>{w=w.replace(`\x3C!--INLINE_CODE_${v}-->`,N)}),w},h=()=>{if(a&&l.length>0){const p=l.join(`
`).trim();p&&(a.description=d(p)),l=[]}};for(let p=0;p<i.length;p++){const m=i[p],g=m.match(/^(```|~~~)/);if(g){c?(m.startsWith(u)&&(c=!1,u=""),l.push(m)):(c=!0,u=g[1],l.push(m));continue}if(c){l.push(m);continue}const y=m.match(/^(#{1,6})\s+(.+)/);if(y){h();const N=y[1].length,v=y[2];for(;s.length>0&&s[s.length-1].level>=N;)s.pop();o=s.length>0?s[s.length-1]:null,a=f(v,N,o),e.push(a),o&&n.push({source:o.id,target:a.id}),s.push(a);continue}const w=m.match(/^(\s*)[-*+]\s+\*\*(.+?)\*\*\s*$/);if(w){h();const N=w[1].length,v=w[2],E=7+Math.floor(N/2);for(;s.length>0&&s[s.length-1].level>=E;)s.pop();o=s.length>0?s[s.length-1]:null,a=f(v,E,o),e.push(a),o&&n.push({source:o.id,target:a.id}),s.push(a);continue}l.push(m)}if(h(),e.length===0){const p=f("Imported Document",1);if(l.length>0){const m=l.join(`
`).trim();m&&(p.description=d(m))}e.push(p)}return{nodes:e,links:n}}function m2(t={}){const{maxSize:e=50}=t,n=we([]),r=we([]),i=we(!0),s=Tn(()=>n.value.length>0),o=Tn(()=>r.value.length>0),l=Tn(()=>n.value.length+r.value.length);return{canUndo:s,canRedo:o,historySize:l,isRecording:i,saveState:g=>{if(!i.value)return;const y=JSON.parse(JSON.stringify(g));n.value.push(y),n.value.length>e&&n.value.shift(),r.value=[]},undo:()=>s.value?n.value.pop():null,redo:()=>o.value?r.value.pop():null,pushToRedo:g=>{if(!g)return;const y=JSON.parse(JSON.stringify(g));r.value.push(y),r.value.length>e&&r.value.shift()},pushToUndo:g=>{if(!g)return;const y=JSON.parse(JSON.stringify(g));n.value.push(y),n.value.length>e&&n.value.shift()},clearHistory:()=>{n.value=[],r.value=[]},withoutRecording:g=>{i.value=!1;try{g()}finally{i.value=!0}},getStats:()=>({undoCount:n.value.length,redoCount:r.value.length,totalSize:l.value,maxSize:e})}}const g2="MindmapDB",y2=1,tn="mindmaps",Ic=10;function b2(){const t=we(!1),e=we(null);let n=null;const r=()=>new Promise((u,f)=>{if(n){u(n);return}const d=indexedDB.open(g2,y2);d.onerror=()=>{e.value="Failed to open database",f(new Error("Failed to open database"))},d.onsuccess=h=>{n=h.target.result,t.value=!0,u(n)},d.onupgradeneeded=h=>{const p=h.target.result;if(!p.objectStoreNames.contains(tn)){const m=p.createObjectStore(tn,{keyPath:"id",autoIncrement:!0});m.createIndex("name","name",{unique:!1}),m.createIndex("updatedAt","updatedAt",{unique:!1}),m.createIndex("createdAt","createdAt",{unique:!1})}}}),i=async()=>{try{const h=(await r()).transaction([tn],"readonly").objectStore(tn).getAll();return new Promise((p,m)=>{h.onsuccess=()=>{const g=h.result||[];g.sort((y,w)=>w.updatedAt-y.updatedAt),p(g)},h.onerror=()=>m(new Error("Failed to get files"))})}catch(u){throw e.value=u.message,u}};return{isInitialized:t,error:e,initDB:r,getAllFiles:i,saveFile:async u=>{try{const f=await r();if(!u.id&&(await i()).length>=Ic)throw new Error(`Maximum of ${Ic} files reached. Please delete a file first.`);const h=f.transaction([tn],"readwrite").objectStore(tn),p={...u,updatedAt:Date.now()};p.id||(p.createdAt=Date.now());const m=p.id?h.put(p):h.add(p);return new Promise((g,y)=>{m.onsuccess=()=>{p.id=m.result,g(p)},m.onerror=()=>y(new Error("Failed to save file"))})}catch(f){throw e.value=f.message,f}},loadFile:async u=>{try{const p=(await r()).transaction([tn],"readonly").objectStore(tn).get(u);return new Promise((m,g)=>{p.onsuccess=()=>{p.result?m(p.result):g(new Error("File not found"))},p.onerror=()=>g(new Error("Failed to load file"))})}catch(f){throw e.value=f.message,f}},deleteFile:async u=>{try{const p=(await r()).transaction([tn],"readwrite").objectStore(tn).delete(u);return new Promise((m,g)=>{p.onsuccess=()=>m(),p.onerror=()=>g(new Error("Failed to delete file"))})}catch(f){throw e.value=f.message,f}},clearAllFiles:async()=>{try{const h=(await r()).transaction([tn],"readwrite").objectStore(tn).clear();return new Promise((p,m)=>{h.onsuccess=()=>p(),h.onerror=()=>m(new Error("Failed to clear files"))})}catch(u){throw e.value=u.message,u}},getFileCount:async()=>{try{return(await i()).length}catch(u){return e.value=u.message,0}},MAX_FILES:Ic}}function x2(t=null){const e=we([]),n=we([]),r=we([]),i=we(null),s=we(null),o=we(""),l=we(""),a=we(1),c=we(!1),u=we(null),f=we({show:!1,x:0,y:0,node:null}),d=we(""),h=we(!1),p=we(!1);let m=0;const g=m2({maxSize:50}),y=b2(),w=we(null),N=we(!1),v=we(null),E=()=>{g.saveState(B())},B=()=>({nodes:JSON.parse(JSON.stringify(e.value)),links:JSON.parse(JSON.stringify(n.value)),connections:JSON.parse(JSON.stringify(r.value)),nodeIdCounter:m}),$=S=>{S&&(e.value=JSON.parse(JSON.stringify(S.nodes)),n.value=JSON.parse(JSON.stringify(S.links)),r.value=JSON.parse(JSON.stringify(S.connections)),m=S.nodeIdCounter,i.value&&!e.value.find(O=>O.id===i.value.id)&&(i.value=null),ke())};(()=>{if(e.value.length===0){const S={id:`node-${m++}`,title:"Title",description:"",color:6,level:1,collapsed:!1};e.value.push(S)}})(),qr(()=>{E()});const _=[{id:1,name:"Red",cssVar:"--node-color-1"},{id:2,name:"Orange",cssVar:"--node-color-2"},{id:3,name:"Yellow",cssVar:"--node-color-3"},{id:4,name:"Green",cssVar:"--node-color-4"},{id:5,name:"Cyan",cssVar:"--node-color-5"},{id:6,name:"Blue",cssVar:"--node-color-6"},{id:7,name:"Violet",cssVar:"--node-color-7"},{id:8,name:"Pink",cssVar:"--node-color-8"}],j=S=>{const O=e.value.find(K=>K.id===S);return!O||!O.parent?1:j(O.parent)+1},Y=()=>{const S={id:`node-${m++}`,title:"New Mindmap",description:"",color:6,level:1,parent:null,collapsed:!1};e.value.push(S),i.value=S},U=()=>{if(!f.value.node)return;E();const S=f.value.node,O=S.level||j(S.id),M={id:`node-${m++}`,title:"New Child",description:"",color:S.color||6,parent:S.id,level:O+1,collapsed:!1};if(S.parent?S.direction&&(M.direction=S.direction):M.direction="east",e.value.push(M),n.value.push({source:S.id,target:M.id}),i.value=M,p.value=!0,s.value=M,o.value=M.title,l.value=M.description,a.value=M.color,f.value.show=!1,t&&typeof t=="function"){const K=t();K&&setTimeout(()=>K(M.id),100)}},ae=()=>{if(!f.value.node||!f.value.node.parent)return;E();const S=f.value.node,O=S.parent,M=S.level||j(S.id),K={id:`node-${m++}`,title:"New Sibling",description:"",color:S.color||6,parent:O,level:M,collapsed:!1};S.direction&&(K.direction=S.direction);const ne=e.value.findIndex(ee=>ee.id===S.id);if(ne>=0?e.value.splice(ne+1,0,K):e.value.push(K),n.value.push({source:O,target:K.id}),i.value=K,p.value=!0,s.value=K,o.value=K.title,l.value=K.description,a.value=K.color,f.value.show=!1,t&&typeof t=="function"){const ee=t();ee&&setTimeout(()=>ee(K.id),100)}},k=(S=null)=>{const O=S||f.value.node;if(O&&(p.value=!1,s.value=O,o.value=O.title,l.value=O.description||"",a.value=O.color||6,f.value.show=!1,t&&typeof t=="function")){const M=t();M&&setTimeout(()=>M(O.id),100)}},L=()=>{if(!s.value||h.value)return;h.value=!0,p.value||E();const S=s.value.title!==o.value;s.value.title=o.value||"Untitled",s.value.description=l.value,s.value.color=a.value,S&&delete s.value.width;const O=e.value.findIndex(M=>M.id===s.value.id);O>=0&&(e.value[O]={...s.value}),p.value=!1,ke(),R(),setTimeout(()=>{h.value=!1},200)},T=()=>{const S=f.value.node;if(!S)return;E();let O=null;if(S.parent){const K=e.value.filter(ne=>ne.parent===S.parent&&ne.id!==S.id);if(K.length>0){const ne=e.value.indexOf(S),ee=K.map(Dt=>e.value.indexOf(Dt)),_e=ee.filter(Dt=>Dt>ne);if(_e.length>0)O=e.value[Math.min(..._e)];else{const Dt=ee.filter(rt=>rt<ne);Dt.length>0&&(O=e.value[Math.max(...Dt)])}}O||(O=e.value.find(ne=>ne.id===S.parent))}e.value=e.value.filter(K=>K.id!==S.id),n.value=n.value.filter(K=>(K.source.id||K.source)!==S.id&&(K.target.id||K.target)!==S.id);const M=K=>{e.value.filter(ee=>ee.parent===K).forEach(ee=>{e.value=e.value.filter(_e=>_e.id!==ee.id),n.value=n.value.filter(_e=>(_e.source.id||_e.source)!==ee.id&&(_e.target.id||_e.target)!==ee.id),M(ee.id)})};M(S.id),f.value.show=!1,(i.value?.id===S.id||!i.value)&&(i.value=O)},z=()=>{i.value&&(f.value.node=i.value,T())},I=()=>{c.value=!0,u.value=f.value.node,f.value.show=!1},de=()=>{c.value=!1,u.value=null},ge=S=>{const O=e.value.find(ee=>ee.id===S);if(!O)return{parent:null,children:[],siblings:[]};const M=O.parent?e.value.find(ee=>ee.id===O.parent):null,K=e.value.filter(ee=>ee.parent===S).map(ee=>e.value.find(_e=>_e.id===ee.id)||ee),ne=O.parent?e.value.filter(ee=>ee.parent===O.parent&&ee.id!==S):[];return{parent:M,children:K,siblings:ne}},Se=(S,O)=>{const M=ge(S.id);let K=S.direction;if(!K){let ne=S;for(;ne.parent&&!K;){const ee=e.value.find(_e=>_e.id===ne.parent);if(ee)K=ee.direction,ne=ee;else break}}switch(O){case"ArrowLeft":return S.parent?K==="west"?M.children[0]||null:M.parent:M.children.filter(ee=>ee.direction==="west")[0]||null;case"ArrowRight":return S.parent?K==="west"?M.parent:M.children[0]||null:M.children.filter(ee=>ee.direction==="east")[0]||null;case"ArrowUp":if(M.siblings.length>0){const ne=e.value.filter(_e=>_e.parent===S.parent),ee=ne.findIndex(_e=>_e.id===S.id);if(ee>0)return ne[ee-1]}return null;case"ArrowDown":if(M.siblings.length>0){const ne=e.value.filter(_e=>_e.parent===S.parent),ee=ne.findIndex(_e=>_e.id===S.id);if(ee<ne.length-1)return ne[ee+1]}return null;default:return null}},ke=()=>{s.value=null,o.value="",l.value="",a.value=6},Oe=()=>{if(p.value&&s.value){const S=s.value.id;e.value=e.value.filter(O=>O.id!==S),n.value=n.value.filter(O=>(O.source.id||O.source)!==S&&(O.target.id||O.target)!==S),i.value?.id===S&&(i.value=null)}p.value=!1,ke()},Me=(S,O)=>{S.stopPropagation();const M=O.data||O;c.value&&u.value?(M.id!==u.value.id&&(r.value.find(ne=>ne.source===u.value.id&&ne.target===M.id||ne.source===M.id&&ne.target===u.value.id)||(E(),r.value.push({source:u.value.id,target:M.id}))),de()):i.value=M},q=(S,O)=>{S.preventDefault(),S.stopPropagation();const M=O.data||O,K=e.value.some(ne=>ne.parent===M.id);f.value={show:!0,x:S.pageX,y:S.pageY,node:{...M,hasChildren:K}}},oe=(S,O)=>{S.stopPropagation(),S.preventDefault();const M=O.data||O;if(i.value=M,p.value=!1,s.value=M,o.value=M.title,l.value=M.description||"",a.value=M.color||6,t&&typeof t=="function"){const K=t();K&&setTimeout(()=>K(M.id),100)}},X=()=>{f.value.show=!1,i.value=null},se=S=>{if((S.metaKey||S.ctrlKey)&&S.key==="z"&&!S.shiftKey){S.preventDefault(),V();return}if((S.metaKey||S.ctrlKey)&&S.shiftKey&&(S.key==="z"||S.key==="Z")){S.preventDefault(),Q();return}if(S.key==="Escape"&&s.value){S.preventDefault(),Oe();return}if((S.key==="e"||S.key==="E")&&i.value){S.preventDefault(),s.value&&s.value.id!==i.value.id?(Oe(),setTimeout(()=>{k(i.value)},50)):s.value||k(i.value);return}if(s.value||h.value)return;const O=document.activeElement;if(!(O&&(O.tagName==="INPUT"||O.tagName==="TEXTAREA"))){if(!i.value){(S.key==="ArrowLeft"||S.key==="ArrowRight"||S.key==="ArrowUp"||S.key==="ArrowDown")&&(i.value=e.value.find(M=>!M.parent),S.preventDefault());return}switch(S.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":S.preventDefault();const M=e.value.find(K=>K.id===i.value.id);if(M){const K=Se(M,S.key);K&&(i.value=K)}break;case"Tab":S.preventDefault(),f.value.node=i.value,U();break;case"Enter":S.preventDefault(),i.value.parent&&(f.value.node=i.value,ae());break;case"Delete":case"Backspace":(S.metaKey||S.ctrlKey)&&(S.preventDefault(),i.value.parent&&(f.value.node=i.value,T()));break;case"f":case"F":if(S.preventDefault(),i.value&&t&&typeof t=="function"){const K=t();K&&K(i.value.id)}break}}},R=()=>{const S=e.value.find(M=>!M.parent);if(!S)return;const O=h2(e.value,S);d.value=O},he=()=>{if(R(),!d.value)return;const S=new Blob([d.value],{type:"text/markdown"}),O=URL.createObjectURL(S),M=document.createElement("a");M.href=O,M.download="mindmap.md",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(O)},Ne=()=>{const S=document.createElement("input");S.type="file",S.accept=".md,.markdown,.txt",S.onchange=async O=>{const M=O.target.files[0];if(M)try{const K=await M.text(),ne=p2(K);E(),e.value=[],n.value=[],r.value=[],i.value=null,s.value=null,m=ne.nodes.length,e.value=ne.nodes,n.value=ne.links;const ee=e.value.find(_e=>!_e.parent);if(ee&&(i.value=ee,t&&typeof t=="function")){const _e=t();_e&&setTimeout(()=>_e(ee.id),100)}}catch(K){console.error("Failed to import markdown:",K),alert("Failed to import markdown file. Please check the file format.")}},S.click()},b=(S,O)=>{const M=K=>{e.value.filter(ee=>ee.parent===K).forEach(ee=>{ee.color=O,M(ee.id)})};E(),M(S)},x=Tn(()=>{if(!f.value.node)return!1;const S=f.value.node.id;return r.value.some(O=>O.source===S||O.target===S)}),A=S=>{const O=e.value.find(M=>M.id===S);O&&(O.collapsed=!O.collapsed,E())},H=S=>r.value.filter(O=>O.source===S||O.target===S).map(O=>{const M=e.value.find(ee=>ee.id===O.source),K=e.value.find(ee=>ee.id===O.target),ne=O.source===S;return{...O,label:ne?`→ ${K?.title||"Unknown"}`:`← ${M?.title||"Unknown"}`}}),F=S=>{E(),r.value=r.value.filter(O=>!(O.source===S.source&&O.target===S.target))},V=()=>{g.withoutRecording(()=>{const S=B(),O=g.undo();O&&(g.pushToRedo(S),$(O))})},Q=()=>{g.withoutRecording(()=>{const S=B(),O=g.redo();O&&(g.pushToUndo(S),$(O))})},J=async(S=null)=>{e.value=[],n.value=[],r.value=[],i.value=null,s.value=null,m=0,w.value=S?{name:S,id:null}:null,N.value=!1,v.value=null,g.clearHistory(),Y()},D=async()=>{if(!h.value)try{h.value=!0;const S=B(),O={name:w.value?.name||`Mindmap ${new Date().toLocaleDateString()}`,nodes:S.nodes,links:S.links,connections:S.connections,nodeIdCounter:S.nodeIdCounter,updatedAt:Date.now()};w.value?.id&&(O.id=w.value.id);const M=await y.saveFile(O);return w.value=M,v.value=JSON.stringify(S),N.value=!1,M}catch(S){throw console.error("Failed to save file:",S),S}finally{h.value=!1}},P=async S=>{try{const O=await y.loadFile(S);return e.value=O.nodes||[],n.value=O.links||[],r.value=O.connections||[],m=O.nodeIdCounter||0,i.value=null,s.value=null,w.value=O,v.value=JSON.stringify(B()),N.value=!1,g.clearHistory(),g.saveState(B()),O}catch(O){throw console.error("Failed to load file:",O),O}},re=async S=>{try{await y.deleteFile(S),w.value?.id===S&&await J()}catch(O){throw console.error("Failed to delete file:",O),O}},Z=async()=>{try{return await y.getAllFiles()}catch(S){return console.error("Failed to get files:",S),[]}},le=async S=>{!S||!w.value||(w.value.name=S,N.value=!0,w.value.id&&await D())};let pe=null;const Te=()=>{pe&&clearTimeout(pe),pe=setTimeout(async()=>{if(N.value&&w.value)try{await D()}catch(S){console.error("Auto-save failed:",S)}},2e3)};return Cn([e,n,r],()=>{const S=JSON.stringify(B());v.value&&S!==v.value&&(N.value=!0,Te())},{deep:!0}),e.value.length===0&&J(),{nodes:e,links:n,connections:r,selectedNode:i,editingNode:s,editingTitle:o,editingDescription:l,editingColor:a,connectionMode:c,connectionSource:u,contextMenu:f,nodeColorConfig:_,generatedMarkdown:d,hasConnections:x,canUndo:g.canUndo,canRedo:g.canRedo,addChildNode:U,addSiblingNode:ae,editNode:k,saveNode:L,deleteNode:T,deleteSelectedNode:z,startConnection:I,cancelConnection:de,removeConnection:F,getNodeConnections:H,closeEditor:ke,cancelEdit:Oe,handleNodeClick:Me,handleNodeRightClick:q,handleNodeDoubleClick:oe,handleCanvasClick:X,handleKeyPress:se,exportMarkdown:R,downloadMarkdown:he,importMarkdown:Ne,undo:V,redo:Q,saveStateBeforeMutation:E,createNewFile:J,saveCurrentFile:D,loadFile:P,deleteFile:re,getAllFiles:Z,updateFileName:le,currentFile:w,isDirty:N,isSaving:h,toggleCollapse:A,updateChildrenColor:b}}function v2(t,e,n,r){const i=we(null),s=we(null),o=we(null),l=we(!1);let a=null,c=null;const u=$=>{const C=new Set,_=j=>{t.value.forEach(Y=>{Y.parent===j&&(C.add(Y.id),_(Y.id))})};return _($),C},f=($,C)=>$===C?!0:u($).has(C),d=($,C,_)=>{const j=_.ownerSVGElement,Y=j.createSVGPoint();Y.x=$.sourceEvent.clientX,Y.y=$.sourceEvent.clientY;const U=j.getScreenCTM(),ae=Y.matrixTransform(U.inverse()),k=_.querySelector("rect");if(!k)return"child";const L=k.getBBox(),T=k.getCTM(),z=j.createSVGPoint();z.x=L.x,z.y=L.y;const I=z.matrixTransform(T),de=I.x,ge=I.y,Se=L.width,ke=L.height,Oe=ae.x-de,Me=ae.y-ge;if(!C.parent){const se=Se/2,R=0,he=Oe-se,Ne=Me-R,b=Math.atan2(Ne,he)*(180/Math.PI);return b>=-90&&b<90?"east":"west"}const q=Me;t.value.some(se=>se.parent===C.id);const oe=8,X=8;return q<oe?"before":q>ke-X?"after":"child"},h=($,C,_)=>{p();const Y=Xe($.ownerSVGElement).select(".nodes"),ae=Xe($).attr("transform").match(/translate\(([^,]+),([^)]+)\)/);if(!ae)return;const k=parseFloat(ae[1]),L=parseFloat(ae[2]),T=_.width||120,z=_.height||40;if(a=Y.append("g").attr("class","drop-indicator").attr("pointer-events","none"),["east","west"].includes(C)){C==="east"?a.append("path").attr("d",`M ${k+T+30} ${L} 
                      l -20 -20 
                      l 0 40 
                      z`).attr("fill","#3498db"):C==="west"&&a.append("path").attr("d",`M ${k-30} ${L} 
                      l 20 -20 
                      l 0 40 
                      z`).attr("fill","#3498db");return}C==="before"?(a.append("rect").attr("x",k-20).attr("y",L-z/2-15).attr("width",T+40).attr("height",10).attr("fill","#3498db").attr("opacity",.3).attr("rx",5),a.append("line").attr("x1",k-20).attr("y1",L-z/2-10).attr("x2",k+T+20).attr("y2",L-z/2-10).attr("stroke","#3498db").attr("stroke-width",4)):C==="after"?(a.append("rect").attr("x",k-20).attr("y",L+z/2+5).attr("width",T+40).attr("height",10).attr("fill","#3498db").attr("opacity",.3).attr("rx",5),a.append("line").attr("x1",k-20).attr("y1",L+z/2+10).attr("x2",k+T+20).attr("y2",L+z/2+10).attr("stroke","#3498db").attr("stroke-width",4)):(a.append("rect").attr("x",k-2).attr("y",L-z/2-2).attr("width",T+4).attr("height",z+4).attr("fill","#3498db").attr("fill-opacity",.1).attr("stroke","#3498db").attr("stroke-width",3).attr("rx",10),a.append("text").attr("x",k+T/2).attr("y",L).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#3498db").attr("font-size","12px").attr("font-weight","bold").text("DROP AS CHILD"),a.append("path").attr("d",`M ${k+T+10} ${L} l 20 0 l -8 -8 m 8 8 l -8 8`).attr("stroke","#3498db").attr("stroke-width",3).attr("fill","none"))},p=()=>{a&&(a.remove(),a=null)},m=$=>{if($.key==="Escape"&&l.value){l.value=!1,p();const C=document.querySelector(".node.dragging");C&&c&&Xe(C).classed("dragging",!1).transition().duration(200).attr("transform",`translate(${c.x},${c.y})`),i.value=null,s.value=null,o.value=null,c=null}};typeof window<"u"&&window.addEventListener("keydown",m);const g=kw().on("start",function($,C){const _=C.data||C;_.parent&&($.sourceEvent&&$.sourceEvent.detail>1||(l.value=!0,i.value=_,c={x:C.x,y:C.y},Xe(this).classed("dragging",!0).raise(),i.value._originalParent=_.parent,i.value._originalIndex=t.value.indexOf(_)))}).on("drag",function($,C){if(!i.value)return;Xe(this).attr("transform",`translate(${$.x},${$.y})`),this.ownerSVGElement.getBoundingClientRect();const _=$.sourceEvent.clientX,j=$.sourceEvent.clientY,Y=document.elementsFromPoint(_,j),U=this.ownerSVGElement.querySelectorAll(".node");let ae=null;for(const L of U)if(L.__data__&&L.__data__.data&&!L.__data__.data.parent){ae=L;break}let k=null;for(const L of Y){if(L===this||L.parentNode===this)continue;let T=L;for(;T&&T!==this.ownerSVGElement;){if(T.classList&&T.classList.contains("node")&&T!==this){if(T.classList.contains("dragging"))break;const z=T.__data__;if(z&&z.data&&z.data.id!==i.value.id){k=T;break}}T=T.parentNode}if(k)break}if(!k&&ae&&ae!==this){const T=ae.getAttribute("transform").match(/translate\(([^,]+),([^)]+)\)/);if(T){const z=parseFloat(T[1]),I=parseFloat(T[2]),de=ae.__data__.data,ge=de.width||120,Se=de.height||40,ke=this.ownerSVGElement.createSVGPoint();ke.x=_,ke.y=j;const Oe=this.ownerSVGElement.getScreenCTM(),Me=ke.matrixTransform(Oe.inverse()),q=i.value.parent,oe=q?50:100,X=Me.x-z,se=Me.y-I;Math.abs(X)<=ge/2+oe&&Math.abs(se)<=Se/2+oe&&(q&&Math.abs(X)<ge/2+20&&Math.abs(se)<Se/2+20?k=null:k=ae)}}if(k){const L=k.__data__.data;if(f(i.value.id,L.id))s.value=null,o.value=null,p();else{s.value=L;const T=d($,L,k);o.value=T,h(k,T,L)}}else s.value=null,o.value=null,p()}).on("end",function($,C){i.value&&(l.value=!1,Xe(this).classed("dragging",!1),p(),(!s.value||!o.value)&&Xe(this).transition().duration(200).attr("transform",`translate(${c.x},${c.y})`),s.value&&o.value&&y(),i.value=null,s.value=null,o.value=null,c=null)}),y=()=>{const $=i.value,C=s.value,_=o.value;if(!$||!C)return;r&&r();const j=t.value.findIndex(U=>U.id===$.id);if(j===-1)return;const[Y]=t.value.splice(j,1);if(["east","west"].includes(_)){Y.parent=C.id,Y.level=2,Y.direction=_;const U=t.value.findIndex(ae=>ae.id===C.id);t.value.splice(U+1,0,Y)}else if(_==="child"){Y.parent=C.id,Y.level=(C.level||1)+1,C.direction&&(Y.direction=C.direction);const U=t.value.findIndex(k=>k.id===C.id),ae=w(C.id,U);t.value.splice(ae+1,0,Y)}else{Y.parent=C.parent,Y.level=C.level||1,C.direction&&(Y.direction=C.direction);const U=t.value.findIndex(ae=>ae.id===C.id);if(_==="before")t.value.splice(U,0,Y);else if(C.parent===Y.parent)t.value.splice(U+1,0,Y);else{const ae=N(C.id,U);t.value.splice(ae+1,0,Y)}}v(Y.id,Y.level),Y.direction&&E(Y.id,Y.direction),B(),n()},w=($,C)=>{let _=C;for(let j=C+1;j<t.value.length;j++)t.value[j].parent===$&&(_=j);return _},N=($,C)=>{const _=u($);let j=C;for(let Y=C+1;Y<t.value.length;Y++)_.has(t.value[Y].id)&&(j=Y);return j},v=($,C)=>{t.value.forEach(_=>{_.parent===$&&(_.level=C+1,v(_.id,_.level))})},E=($,C)=>{t.value.forEach(_=>{_.parent===$&&(_.direction=C,E(_.id,C))})},B=()=>{e.value.length=0,t.value.forEach($=>{$.parent&&e.value.push({source:$.parent,target:$.id})})};return{drag:g,isDragging:l,draggedNode:i,dropTarget:s,dropPosition:o}}function k2(t,e,n,r,i,s,o,l,a,c,u,f,d,h,p,m){let g=null,y=null,w=null,N=null,v=0,E=null;const B=300;let $=null;const C=()=>{if(!t.value)return;const q=e.value.clientWidth,oe=e.value.clientHeight;g=Xe(t.value).attr("width",q).attr("height",oe),g.selectAll("g").remove(),w=LC().scaleExtent([.1,4]).on("zoom",X=>{y.attr("transform",X.transform)}),g.call(w),y=g.append("g"),y.append("g").attr("class","links"),y.append("g").attr("class","connections"),y.append("g").attr("class","nodes")},_=()=>{const q=new Map;n.value.forEach(X=>q.set(X.id,{...X,children:[]}));const oe=[];return q.forEach(X=>{if(X.parent){const se=q.get(X.parent);se?se.collapsed||se.children.push(X):oe.push(X)}else oe.push(X)}),r.value.forEach(X=>{const se=X.source.id||X.source,R=X.target.id||X.target,he=q.get(se),Ne=q.get(R);if(he&&Ne&&!Ne.parent&&!he.children.some(b=>b.id===R)&&!he.collapsed){he.children.push(Ne);const b=oe.findIndex(x=>x.id===R);b>=0&&oe.splice(b,1)}}),oe.length===0?null:cf(oe[0])},j=()=>{if(!y)return;if(y.select(".links").selectAll("*").remove(),y.select(".connections").selectAll("*").remove(),y.select(".nodes").selectAll("*").remove(),n.value.length===0){h();return}const q=Xe("body").append("svg").style("visibility","hidden");n.value.forEach(oe=>{const X=q.append("text").attr("class","node-title").style("font-size",()=>{const J=oe.level||1;return[22,18,16,15,12,12][Math.min(J-1,5)]+"px"}).text(oe.title),se=X.node().getBBox();X.remove();const R=document.createElement("div");R.style.position="absolute",R.style.visibility="hidden";const he=oe.description?156:180;R.style.width=he+"px",R.style.lineHeight="1.2",R.style.wordWrap="break-word",R.style.overflowWrap="break-word",R.style.fontSize=(()=>{const J=oe.level||1;return[22,18,16,15,12,12][Math.min(J-1,5)]+"px"})(),R.style.padding="0",R.textContent=oe.title,document.body.appendChild(R);const Ne=R.offsetHeight;document.body.removeChild(R);const b=20,x=24,A=160,H=240;oe.title.length;const F=Math.min(se.width+b,H);oe.width=Math.max(A,F);const V=44,Q=Ne+x;oe.height=Math.max(V,Q)}),q.remove(),T(),h()},Y=()=>{const q=n.value.find(oe=>!oe.parent);return q?n.value.some(oe=>oe.parent===q.id):!1},U=q=>{if(!q.children||q.children.length===0)return q.height||40;const oe=q.children.reduce((se,R)=>se+U(R),0),X=35*(q.children.length-1);return Math.max(q.height||40,oe+X)},ae=q=>{const oe=q.reduce((se,R)=>se+U(R),0),X=35*(q.length-1);return oe+X},k=(q,oe,X)=>{q.x=Math.round(oe/2/100)*100,q.y=Math.round(X/2/100)*100;const R={east:[],west:[]};q.children?.forEach(D=>{D.data.direction||(D.data.direction="east");const P=D.data.direction;P==="east"||P==="west"?R[P].push(D):(D.data.direction="east",R.east.push(D))}),q.descendants().forEach(D=>{D.width=D.data.width||120,D.height=D.data.height||40});const he=Xd(q.descendants(),D=>D.depth),Ne=new Map,b=new Map;he.forEach((D,P)=>{const re=Math.max(...D.map(le=>le.width||120)),Z=Math.ceil(re/100);Ne.set(P,Z)});let x=0;for(let D=0;D<=Math.max(...he.keys());D++){if(D===0)x=0;else{const P=Ne.get(D-1)||1;x+=P+1}b.set(D,x)}const A=35;if(R.east.length>0){let D=q.y-ae(R.east)/2;R.east.forEach(P=>{const re=U(P),Z=b.get(P.depth)||0;P.x=q.x+Z*100,P.y=D+re/2,L(P,"east",100,b,q.x),D+=re+A})}if(R.west.length>0){let D=q.y-ae(R.west)/2;R.west.forEach(P=>{const re=U(P),Z=b.get(P.depth)||0;P.x=q.x-Z*100,P.y=D+re/2,L(P,"west",100,b,q.x),D+=re+A})}const H=y.select(".links"),F=y.select(".connections"),V=y.select(".nodes");H.selectAll("*").remove(),F.selectAll("*").remove(),V.selectAll("*").remove();const Q=q.links();H.selectAll(".link").data(Q).enter().append("path").attr("class","link").attr("d",D=>{const P=D.source.width||120,re=D.target.width||120,Z=D.target.x>D.source.x;let le,pe;Z?(le=D.source.x+P,pe=D.target.x):(le=D.source.x,pe=D.target.x+re);const Te=(le+pe)/2;return`M${le},${D.source.y}
                C${Te},${D.source.y}
                ${Te},${D.target.y}
                ${pe},${D.target.y}`});const J=q.descendants();z(J,V),I(F,J)},L=(q,oe,X=100,se=null,R=0)=>{if(!q.children||q.children.length===0)return;const he=35,Ne=ae(q.children);let b=q.y-Ne/2;q.children.forEach(x=>{const A=U(x);if(oe==="east"){if(se){const H=se.get(x.depth)||0;x.x=R+H*X}else x.x=q.x+X;x.y=b+A/2}else if(oe==="west"){if(se){const H=se.get(x.depth)||0;x.x=R-H*X}else x.x=q.x-X;x.y=b+A/2}b+=A+he,L(x,oe,X,se,R)})},T=()=>{const q=_();if(!q)return;const oe=e.value.clientWidth,X=e.value.clientHeight;if(Y()){k(q,oe,X);return}const se=100,R=20;_C().nodeSize([40,se])(q);const Ne=Xd(q.descendants(),M=>M.depth),b=new Map;Ne.forEach((M,K)=>{const ne=Math.max(...M.map(_e=>_e.data.width||120)),ee=Math.ceil(ne/se);b.set(K,ee)});let x=0;const A=new Map;for(let M=0;M<=Math.max(...Ne.keys());M++){A.set(M,x);const K=b.get(M)||1;x+=K+1}q.descendants().forEach(M=>{M.gridX=A.get(M.depth)||0,M.gridsUsed=b.get(M.depth)||1});const F=Math.max(...q.descendants().map(M=>(M.gridX||0)+(M.gridsUsed||1)))*se,V=(oe-F)/2,Q={minY:Zd(q.descendants(),M=>M.x),maxY:Qd(q.descendants(),M=>M.x)},J=Q.maxY-Q.minY,D=(X-J)/2-Q.minY;q.descendants().forEach(M=>{const K=M.x;M.x=(M.gridX||0)*se+V,M.y=K+D,M.width=M.data.width||120,M.height=M.data.height||40}),Ne.forEach(M=>{M.sort((K,ne)=>K.y-ne.y);for(let K=1;K<M.length;K++){const ne=M[K-1],ee=M[K],_e=ne.y+ne.height/2,rt=ee.y-ee.height/2-_e;if(rt<R){const yt=R-rt;for(let mn=K;mn<M.length;mn++)M[mn].y+=yt}}});const P=(M,K)=>{M.y+=K,q.descendants().filter(ee=>ee.parent===M).forEach(ee=>P(ee,K))};q.descendants().forEach(M=>{const K=q.descendants().filter(ne=>ne.parent===M);if(K.length!==0){K.sort((ne,ee)=>ne.y-ee.y);for(let ne=1;ne<K.length;ne++){const ee=K[ne-1],_e=K[ne],Dt=ee.y+ee.height/2,yt=_e.y-_e.height/2-Dt;if(yt<R){const mn=R-yt;P(_e,mn)}}}});const re={minY:Zd(q.descendants(),M=>M.y-M.height/2),maxY:Qd(q.descendants(),M=>M.y+M.height/2)},Z=re.maxY-re.minY;q.descendants().forEach(M=>{M.y=M.y-re.minY+(X-Z)/2});const le=y.select(".links"),pe=y.select(".connections"),Te=y.select(".nodes"),S=q.links();le.selectAll(".link").data(S).enter().append("path").attr("class","link").attr("d",M=>{const K=M.source.width||120;M.target.width;const ne=M.source.x+K,ee=M.target.x;return`M${ne},${M.source.y}
                C${ne+50},${M.source.y}
                ${ee-50},${M.target.y}
                ${ee},${M.target.y}`});const O=q.descendants();z(O,Te),I(pe,O)},z=(q,oe)=>{N=oe.selectAll(".node").data(q).enter().append("g").attr("class",R=>`node ${s.value?.id===R.data.id?"selected":""}`).attr("data-level",R=>R.data.level||R.depth+1).attr("data-node-id",R=>R.data.id).attr("transform",R=>`translate(${R.x},${R.y})`).on("click",function(R,he){R.stopPropagation();const Ne=new Date().getTime(),b=he.data||he;E===b.id&&Ne-v<B?(d(R,he),E=null,v=0):(u(R,he),E=b.id,v=Ne)}).on("contextmenu",f),N.each(function(R){R.data.parent&&Xe(this).call($)}),N.each(function(R){R.width=R.data.width||120,R.height=R.data.height||40}),N.append("rect").attr("x",0).attr("y",R=>-R.height/2).attr("width",R=>R.width).attr("height",R=>R.height).attr("rx",6).attr("ry",6).style("fill","var(--node-background)").style("stroke",R=>{const he=R.data.color||6,Ne=o.find(b=>b.id===he);return Ne?`var(${Ne.cssVar})`:"var(--node-default-color)"}).style("stroke-width",R=>s.value?.id===R.data.id?"var(--node-selected-border-width)":"var(--node-border-width)");const se=N.append("foreignObject").attr("x",-25).attr("y",R=>-R.height/2).attr("width",R=>R.width+25).attr("height",R=>R.height).append("xhtml:div").attr("class","node-content").style("width","100%").style("height","100%").style("position","relative").style("display","flex").style("align-items","center").style("padding","12px 30px 12px 35px").style("box-sizing","border-box").style("min-height","44px").style("overflow","visible");se.append("xhtml:div").attr("class","node-title-text").style("width",R=>R.data.description?"calc(100% - 24px)":"100%").style("font-weight",R=>(R.data.level||R.depth+1)<=3?"600":"500").style("font-size",R=>{const he=R.data.level||R.depth+1;return["18px","16px","15px","14px","13px","12px"][Math.min(he-1,5)]}).style("color","var(--node-text-color)").style("line-height","1.2").style("word-wrap","break-word").style("overflow-wrap","break-word").text(R=>R.data.title),se.filter(R=>R.data.description?R.data.description.replace(/<[^>]*>/g,"").trim().length>0:!1).append("xhtml:div").attr("class","description-indicator").style("position","absolute").style("right","8px").style("top","50%").style("transform","translateY(-50%)").style("opacity","0.6").style("pointer-events","none").append("xhtml:span").attr("class","material-icons").style("font-size","16px").style("color","var(--node-text-color)").text("description"),se.filter(R=>{const he=R.children&&R.children.length>0,Ne=n.value.some(b=>b.parent===R.data.id);return he||Ne}).append("xhtml:button").attr("class","collapse-expand-btn").style("position","absolute").style("left","8px").style("top","50%").style("transform","translateY(-50%)").style("width","18px").style("height","18px").style("border","1px solid rgba(0, 0, 0, 0.1)").style("border-radius","50%").style("background","white").style("box-shadow","0 1px 2px rgba(0, 0, 0, 0.05)").style("cursor","pointer").style("display","flex").style("align-items","center").style("justify-content","center").style("padding","0").style("font-size","14px").style("font-weight","600").style("line-height","1").style("color","#666").style("pointer-events","all").style("z-index","10").style("transition","all 0.2s ease").on("mouseover",function(){Xe(this).style("background","#f5f5f5").style("border-color","rgba(0, 0, 0, 0.15)").style("transform","translateY(-50%) scale(1.1)")}).on("mouseout",function(){Xe(this).style("background","white").style("border-color","rgba(0, 0, 0, 0.1)").style("transform","translateY(-50%) scale(1)")}).on("click",function(R,he){R.preventDefault(),R.stopPropagation(),R.stopImmediatePropagation(),m(he.data.id),j()}).text(R=>R.data.collapsed?"+":"−")},I=(q,oe)=>{const X=new Map;oe.forEach(se=>{X.set(se.data.id,{x:se.x,y:se.y,width:se.width||120,height:se.height||40})}),q.selectAll(".connection").data(i.value).enter().append("path").attr("class","connection").attr("d",se=>{const R=X.get(se.source),he=X.get(se.target);if(!R||!he)return"";let Ne=R.x+R.width,b=R.y,x=he.x,A=he.y;he.x<R.x&&(Ne=R.x,x=he.x+he.width),Math.abs(R.x-he.x)<50&&(Ne=R.x+R.width/2,x=he.x+he.width/2,he.y>R.y?(b=R.y+R.height/2,A=he.y-he.height/2):(b=R.y-R.height/2,A=he.y+he.height/2));const H=(Ne+x)/2,F=Math.abs(x-Ne)*.3;return`M${Ne},${b}
                Q${H},${b-F}
                ${x},${A}`}).style("fill","none").style("stroke","#999").style("stroke-width",2).style("stroke-dasharray","5,5").style("opacity",.6).style("pointer-events","none")},de=()=>{j()},ge=()=>{!g||!w||g.transition().duration(750).call(w.transform,Hs)},Se=()=>{!g||!w||g.transition().duration(300).call(w.scaleBy,1.3)},ke=()=>{!g||!w||g.transition().duration(300).call(w.scaleBy,.7)},Oe=q=>{if(!g||!w||!e.value)return;const oe=y.select(`.node[data-node-id="${q}"]`);if(oe.empty())return;const X=oe.datum();if(!X)return;const se=Bg(g.node()),R=e.value.clientWidth,he=e.value.clientHeight,Ne=X.x||0,b=X.y||0,x=X.width||120;X.height;const A=Ne+x/2,H=b,F=R/2-A*se.k,V=he/2-H*se.k;g.transition().duration(500).call(w.transform,Hs.scale(se.k).translate(F/se.k,V/se.k))};return $=v2(n,r,j,p).drag,Cn([n,r,i,s],()=>{j()},{deep:!0}),{initD3:C,updateVisualization:j,updateLayout:de,resetZoom:ge,zoomIn:Se,zoomOut:ke,panToNode:Oe}}function w2(t,e="mindmap",n=[]){if(!t)throw new Error("SVG element is required for export");const r=t.cloneNode(!0),i=t.querySelector("g"),s=r.querySelector("g");if(!i||!s)throw new Error("SVG must contain a <g> element with content");const o=i.getBBox(),l=50;s.removeAttribute("transform"),r.setAttribute("viewBox",`${o.x-l} ${o.y-l} ${o.width+l*2} ${o.height+l*2}`),r.setAttribute("width",o.width+l*2),r.setAttribute("height",o.height+l*2),S2(r),r.style.backgroundColor="white";const a=new XMLSerializer().serializeToString(r),c=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),u=URL.createObjectURL(c),f=document.createElement("a");f.href=u,f.download=`${e}.svg`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(u)}function S2(t,e){const n=getComputedStyle(document.documentElement),r=n.getPropertyValue("--node-background").trim()||"#ffffff",i=n.getPropertyValue("--node-text-color").trim()||"#1e293b",s=n.getPropertyValue("--node-border-width").trim()||"2px",o=n.getPropertyValue("--node-default-color").trim()||"#94a3b8",l={};for(let c=1;c<=8;c++)l[`--node-color-${c}`]=n.getPropertyValue(`--node-color-${c}`).trim();t.querySelectorAll(".node rect").forEach(c=>{const u=c.style.stroke;if(u&&u.includes("var(")){const f=u.match(/var\((--node-color-\d+)\)/);f&&l[f[1]]?c.style.stroke=l[f[1]]:c.style.stroke=o}c.style.fill=r,c.style.strokeWidth||(c.style.strokeWidth=s)}),t.querySelectorAll(".description-indicator").forEach(c=>{c.style.display="none"});const a=document.createElementNS("http://www.w3.org/2000/svg","style");a.textContent=`
    .node rect { 
      fill: ${r}; 
      stroke-width: ${s};
    }
    .node-content { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
      color: ${i};
    }
    .node-title-text { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
      color: ${i};
    }
    .link { fill: none; stroke: #999; stroke-width: 2px; }
    .connection { fill: none; stroke: #2196F3; stroke-width: 2px; stroke-dasharray: 5,5; marker-end: url(#arrowhead); }
    .material-icons { font-family: "Material Icons"; font-size: 16px; color: ${i}; }
    text { fill: ${i}; }
  `,t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)}function C2(t){return t.replace(/\.json$/,"")}const T2={class:"demo-container"},E2={class:"mindmap-side"},M2={key:1,class:"absolute top-5 left-1/2 -translate-x-1/2 bg-amber-500 text-white px-4 py-2 rounded-lg flex items-center gap-3 z-[150] shadow-lg text-sm"},A2={__name:"MindmapFirst",setup(t){const e=we(null),n=we(null),r=we(null),{nodes:i,links:s,connections:o,selectedNode:l,editingNode:a,editingTitle:c,editingDescription:u,editingColor:f,connectionMode:d,connectionSource:h,contextMenu:p,nodeColorConfig:m,addChildNode:g,addSiblingNode:y,editNode:w,saveNode:N,deleteNode:v,startConnection:E,cancelConnection:B,removeConnection:$,getNodeConnections:C,cancelEdit:_,handleNodeClick:j,handleNodeRightClick:Y,handleNodeDoubleClick:U,handleCanvasClick:ae,handleKeyPress:k,exportMarkdown:L,downloadMarkdown:T,importMarkdown:z,generatedMarkdown:I,hasConnections:de,saveStateBeforeMutation:ge,currentFile:Se,isDirty:ke,isSaving:Oe,createNewFile:Me,saveCurrentFile:q,loadFile:oe,deleteFile:X,getAllFiles:se,updateFileName:R,toggleCollapse:he,updateChildrenColor:Ne}=x2(()=>r.value),{initD3:b,updateVisualization:x,resetZoom:A,zoomIn:H,zoomOut:F,panToNode:V}=k2(n,e,i,s,o,l,m,d,h,p,j,Y,U,L,ge,he),Q=we(!1),J=we({x:0,y:0}),D=we([]),P=we(!1),re=we([]),Z=we(!1),le=we(""),pe=we(!1),Te=we(""),S=()=>{if(!p.value.node)return;const it=C(p.value.node.id);it.length!==0&&(D.value=it,J.value={x:p.value.x,y:p.value.y},Q.value=!0,p.value.show=!1)},O=()=>{Q.value=!1,D.value=[]},M=it=>{$(it),O()},K=it=>{p.value.node&&(Ne(p.value.node.id,it),p.value.show=!1)},ne=async()=>{ke.value&&!confirm("You have unsaved changes. Create a new file anyway?")||await Me()},ee=async it=>{ke.value&&!confirm("You have unsaved changes. Load this file anyway?")||(await oe(it),P.value=!1)},_e=async it=>{await X(it),await Dt()},Dt=async()=>{Z.value=!0,le.value="";try{re.value=await se()}catch(it){le.value="Failed to load files",console.error("Failed to load files:",it)}finally{Z.value=!1}},rt=()=>{L(),Te.value=I.value,pe.value=!0},yt=()=>{pe.value=!1,Te.value=""},mn=()=>{if(!n.value)return;const it=Se.value?.name||"mindmap",Je=C2(it);try{w2(n.value,Je,m)}catch(Vt){console.error("Failed to export SVG:",Vt),alert("Failed to export mindmap as SVG")}},ld=()=>{if(!e.value||!n.value)return;const it=e.value.clientWidth,Je=e.value.clientHeight;Xe(n.value).attr("width",it).attr("height",Je)},ad=it=>{it.target.closest(".context-menu")||(p.value.show=!1),!it.target.closest(".connection-list")&&Q.value&&(Q.value=!1)};return ai(()=>{b(),x(),r.value=V,window.addEventListener("resize",ld),window.addEventListener("scroll",()=>{p.value.show=!1}),document.addEventListener("click",ad),window.addEventListener("keydown",k)}),ha(()=>{window.removeEventListener("resize",ld),document.removeEventListener("click",ad),window.removeEventListener("keydown",k)}),(it,Je)=>(ce(),Re("div",T2,[te("div",E2,[te("div",{class:"mindmap-first-container",ref_key:"containerRef",ref:e},[ye(DT,{"current-file":me(Se),"is-dirty":me(ke),"is-saving":me(Oe),onNewFile:ne,onOpenFiles:Je[0]||(Je[0]=Vt=>P.value=!0),onSaveFile:me(q),onUpdateFileName:me(R),onResetZoom:me(A),onZoomIn:me(H),onZoomOut:me(F),onExportMarkdown:me(T),onImportMarkdown:me(z),onOpenReader:rt,onExportImage:mn},null,8,["current-file","is-dirty","is-saving","onSaveFile","onUpdateFileName","onResetZoom","onZoomIn","onZoomOut","onExportMarkdown","onImportMarkdown"]),(ce(),Re("svg",{ref_key:"svgRef",ref:n,class:"mindmap-svg",onClick:Je[1]||(Je[1]=(...Vt)=>me(ae)&&me(ae)(...Vt))},Je[7]||(Je[7]=[te("defs",null,[te("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"},[te("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#999"})])],-1)]),512)),me(a)?(ce(),Ue(XR,{key:0,"editing-node":me(a),"editing-title":me(c),"editing-description":me(u),"editing-color":me(f),"color-config":me(m),"onUpdate:title":Je[2]||(Je[2]=Vt=>c.value=Vt),"onUpdate:description":Je[3]||(Je[3]=Vt=>u.value=Vt),"onUpdate:color":Je[4]||(Je[4]=Vt=>f.value=Vt),onSave:me(N),onClose:me(_)},null,8,["editing-node","editing-title","editing-description","editing-color","color-config","onSave","onClose"])):Ze("",!0),ye(fD),me(d)?(ce(),Re("div",M2,[Je[8]||(Je[8]=st(" Click another node to connect ")),te("button",{onClick:Je[5]||(Je[5]=(...Vt)=>me(B)&&me(B)(...Vt)),class:"px-2 py-1 bg-white text-amber-600 rounded text-xs hover:bg-amber-50 transition-colors"},"Cancel")])):Ze("",!0),me(p).show?(ce(),Ue(nD,{key:2,"context-menu":me(p),"has-connections":me(de),"node-color-config":me(m),onAddChild:me(g),onAddSibling:me(y),onStartConnection:me(E),onRemoveConnections:S,onEditNode:me(w),onDeleteNode:me(v),onChangeChildrenColor:K},null,8,["context-menu","has-connections","node-color-config","onAddChild","onAddSibling","onStartConnection","onEditNode","onDeleteNode"])):Ze("",!0),Q.value?(ce(),Ue(sD,{key:3,connections:D.value,x:J.value.x,y:J.value.y,onRemoveConnection:M,onClose:O},null,8,["connections","x","y"])):Ze("",!0),ye(WD,{open:P.value,"onUpdate:open":Je[6]||(Je[6]=Vt=>P.value=Vt),files:re.value,"current-file-id":me(Se)?.id,loading:Z.value,error:le.value,onLoadFile:ee,onDeleteFile:_e,onRefresh:Dt},null,8,["open","files","current-file-id","loading","error"]),ye(DI,{"is-open":pe.value,markdown:Te.value,onClose:yt},null,8,["is-open","markdown"])],512)])]))}},N2=_n(A2,[["__scopeId","data-v-fe25ebc0"]]),_2={__name:"App",setup(t){return(e,n)=>(ce(),Ue(N2))}};E1(_2).mount("#app");</script>
    <style rel="stylesheet" crossorigin>.material-icons[data-v-1dadd534]{transition:all .2s ease}button:hover .material-icons[data-v-1dadd534]{transform:scale(1.1)}button:active .material-icons[data-v-1dadd534]{transform:scale(.95)}input[type=text][data-v-1dadd534]{min-width:80px;max-width:200px}.ProseMirror{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.125rem;line-height:1.75;letter-spacing:-.01em}.ProseMirror p.is-editor-empty:first-child:before{content:attr(data-placeholder);float:left;color:hsl(var(--muted-foreground) / .5);pointer-events:none;height:0}.ProseMirror:focus{outline:none}.ProseMirror h1{font-size:2em;font-weight:700;margin-top:1em;margin-bottom:.5em;line-height:1.2}.ProseMirror h2{font-size:1.5em;font-weight:600;margin-top:1em;margin-bottom:.5em;line-height:1.3}.ProseMirror h3{font-size:1.25em;font-weight:600;margin-top:1em;margin-bottom:.5em;line-height:1.4}.ProseMirror ul,.ProseMirror ol{padding-left:2em;margin:1em 0}.ProseMirror ul{list-style-type:disc}.ProseMirror ul ul{list-style-type:circle}.ProseMirror ul ul ul{list-style-type:square}.ProseMirror ol{list-style-type:decimal}.ProseMirror li{margin:.5em 0;display:list-item}.ProseMirror li::marker{color:hsl(var(--muted-foreground))}.ProseMirror code{background-color:hsl(var(--muted));padding:.2em .4em;border-radius:3px;font-size:.9em;font-family:SF Mono,Monaco,Cascadia Code,monospace}.ProseMirror pre{background-color:hsl(var(--muted));padding:1em;border-radius:6px;overflow-x:auto;margin:1em 0}.ProseMirror pre code{background:none;padding:0}.ProseMirror blockquote{border-left:3px solid hsl(var(--border));padding-left:1em;margin:1em 0;font-style:italic;color:hsl(var(--muted-foreground))}.ProseMirror a{color:hsl(var(--primary));text-decoration:underline;cursor:pointer}.ProseMirror a:hover{text-decoration:none}.ProseMirror strong{font-weight:600}.ProseMirror em{font-style:italic}.ProseMirror hr{border:none;border-top:2px solid hsl(var(--border));margin:2em 0}input[type=text][data-v-3f4aa494],input[data-v-3f4aa494]:not([type]),textarea[data-v-3f4aa494]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}input.text-3xl[data-v-3f4aa494]{letter-spacing:-.02em;line-height:1.2}textarea[data-v-3f4aa494]{line-height:1.75;letter-spacing:-.01em}input[data-v-3f4aa494],textarea[data-v-3f4aa494]{transition:all .2s ease}kbd[data-v-3f4aa494]{font-family:SF Mono,Monaco,Cascadia Code,monospace;font-size:.75rem;border:1px solid hsl(var(--border));box-shadow:0 1px #0000001a}.overflow-y-auto[data-v-3f4aa494]{scrollbar-width:thin;scrollbar-color:hsl(var(--muted-foreground) / .2) transparent}.overflow-y-auto[data-v-3f4aa494]::-webkit-scrollbar{width:8px}.overflow-y-auto[data-v-3f4aa494]::-webkit-scrollbar-track{background:transparent}.overflow-y-auto[data-v-3f4aa494]::-webkit-scrollbar-thumb{background-color:hsl(var(--muted-foreground) / .2);border-radius:4px}.overflow-y-auto[data-v-3f4aa494]::-webkit-scrollbar-thumb:hover{background-color:hsl(var(--muted-foreground) / .3)}.help-panel[data-v-1dae1059]{position:fixed;bottom:1.25rem;left:1.25rem;z-index:200;transition:all .3s ease}.toggle-button[data-v-1dae1059]{display:flex;align-items:center;border-radius:var(--radius);border-width:1px;border-color:hsl(var(--border));background-color:hsl(var(--background));padding:.5rem .75rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.toggle-button[data-v-1dae1059]:hover{background-color:hsl(var(--muted))}.help-content[data-v-1dae1059]{position:absolute;bottom:0;left:0;width:20rem;overflow:hidden;border-radius:var(--radius);border-width:1px;border-color:hsl(var(--border));background-color:hsl(var(--background));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);animation:slideUp-1dae1059 .3s ease}.help-header[data-v-1dae1059]{display:flex;align-items:center;justify-content:space-between;border-bottom-width:1px;padding:.75rem 1rem}.close-button[data-v-1dae1059]{border-radius:.25rem;padding:.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.close-button[data-v-1dae1059]:hover{background-color:hsl(var(--muted))}.help-sections[data-v-1dae1059]{max-height:60vh}.help-sections[data-v-1dae1059]>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.help-sections[data-v-1dae1059]{overflow-y:auto;padding:1rem}.help-section[data-v-1dae1059]>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.section-title[data-v-1dae1059]{font-size:.75rem;line-height:1rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:hsl(var(--muted-foreground))}.shortcut-table[data-v-1dae1059]{width:100%;font-size:.875rem;line-height:1.25rem}.shortcut-table tr[data-v-1dae1059]{border-bottom-width:1px;border-color:hsl(var(--border) / .3)}.shortcut-table tr[data-v-1dae1059]:last-child{border-width:0px}.shortcut-table td[data-v-1dae1059]{padding-top:.375rem;padding-bottom:.375rem}.shortcut-keys[data-v-1dae1059]{white-space:nowrap;padding-right:.75rem;text-align:right;width:40%}.shortcut-keys kbd[data-v-1dae1059]{margin-left:.125rem;margin-right:.125rem;display:inline-block;border-radius:.25rem;border-width:1px;border-color:hsl(var(--border));background-color:hsl(var(--muted));padding:.125rem .375rem;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:.75rem;line-height:1rem;min-width:1.5rem;text-align:center}.shortcut-desc[data-v-1dae1059]{padding-left:.75rem;color:hsl(var(--muted-foreground));width:60%}.tips-list[data-v-1dae1059]{list-style-position:inside;list-style-type:disc}.tips-list[data-v-1dae1059]>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.tips-list[data-v-1dae1059]{font-size:.875rem;line-height:1.25rem;color:hsl(var(--muted-foreground))}.tips-list strong[data-v-1dae1059]{font-weight:500;color:hsl(var(--foreground))}.help-sections[data-v-1dae1059]{scrollbar-width:thin;scrollbar-color:hsl(var(--muted-foreground) / .2) transparent}.help-sections[data-v-1dae1059]::-webkit-scrollbar{width:6px}.help-sections[data-v-1dae1059]::-webkit-scrollbar-track{background:transparent}.help-sections[data-v-1dae1059]::-webkit-scrollbar-thumb{background-color:hsl(var(--muted-foreground) / .2);border-radius:3px}.help-sections[data-v-1dae1059]::-webkit-scrollbar-thumb:hover{background-color:hsl(var(--muted-foreground) / .3)}@keyframes slideUp-1dae1059{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}.markdown-body[data-v-a0479611]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:18px;line-height:1.6;color:#333;word-wrap:break-word}.markdown-body[data-v-a0479611] *{box-sizing:border-box}.markdown-body[data-v-a0479611] :before,.markdown-body[data-v-a0479611] :after{box-sizing:border-box}.markdown-body[data-v-a0479611] h1{font-size:2.5em;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.2;border-bottom:1px solid #eee;padding-bottom:.3em}.markdown-body[data-v-a0479611] h2{font-size:2em;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.3;border-bottom:1px solid #eee;padding-bottom:.3em}.markdown-body[data-v-a0479611] h3{font-size:1.5em;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.4}.markdown-body[data-v-a0479611] h4{font-size:1.25em;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.4}.markdown-body[data-v-a0479611] h5{font-size:1.1em;font-weight:600;margin-top:1.5em;margin-bottom:.5em}.markdown-body[data-v-a0479611] h6{font-size:1em;font-weight:600;margin-top:1.5em;margin-bottom:.5em;color:#666}.markdown-body[data-v-a0479611] p{margin-top:0;margin-bottom:1.5em}.markdown-body[data-v-a0479611] ul{margin-top:0;margin-bottom:1.5em;padding-left:2em;list-style-type:disc}.markdown-body[data-v-a0479611] ol{margin-top:0;margin-bottom:1.5em;padding-left:2em;list-style-type:decimal}.markdown-body[data-v-a0479611] ul ul{list-style-type:circle}.markdown-body[data-v-a0479611] ul ul ul{list-style-type:square}.markdown-body[data-v-a0479611] li{margin-bottom:.5em;display:list-item}.markdown-body[data-v-a0479611] li>p{margin-bottom:.5em}.markdown-body[data-v-a0479611] li>p:first-child{margin-top:0}.markdown-body[data-v-a0479611] .task-list-item{list-style-type:none;margin-left:-1.5em}.markdown-body[data-v-a0479611] .task-list-item input[type=checkbox]{margin-right:.5em;vertical-align:middle}.markdown-body[data-v-a0479611] blockquote{margin:1.5em 0;padding:0 1em;color:#666;border-left:4px solid #dfe2e5}.markdown-body[data-v-a0479611] code{padding:.2em .4em;margin:0;font-size:85%;background-color:#f6f8fa;border-radius:3px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace}.markdown-body[data-v-a0479611] pre{margin-top:0;margin-bottom:1.5em;padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:6px}.markdown-body[data-v-a0479611] pre code{padding:0;margin:0;font-size:100%;background-color:transparent;border:0}.markdown-body[data-v-a0479611] table{margin-bottom:1.5em;border-spacing:0;border-collapse:collapse;display:block;width:100%;overflow:auto}.markdown-body[data-v-a0479611] table th{font-weight:600;padding:6px 13px;border:1px solid #dfe2e5;background-color:#f6f8fa}.markdown-body[data-v-a0479611] table td{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body[data-v-a0479611] table tr{background-color:#fff;border-top:1px solid #dfe2e5}.markdown-body[data-v-a0479611] table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body[data-v-a0479611] hr{height:.25em;padding:0;margin:2em 0;background-color:#e1e4e8;border:0}.markdown-body[data-v-a0479611] img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body[data-v-a0479611] a{color:#0366d6;text-decoration:none}.markdown-body[data-v-a0479611] a:hover{text-decoration:underline}.markdown-body[data-v-a0479611] strong{font-weight:600}.markdown-body[data-v-a0479611] em{font-style:italic}.markdown-body[data-v-a0479611]>*:first-child{margin-top:0!important}.markdown-body[data-v-a0479611]>*:last-child{margin-bottom:0!important}.demo-container[data-v-fe25ebc0]{display:flex;height:100%;width:100%}.mindmap-side[data-v-fe25ebc0]{position:relative;flex:1 1 0%}.mindmap-first-container[data-v-fe25ebc0]{position:relative;height:100%;width:100%;overflow:hidden;background-color:hsl(var(--muted) / .3)}.mindmap-svg[data-v-fe25ebc0]{height:100%;width:100%;cursor:grab}.mindmap-svg[data-v-fe25ebc0]:active{cursor:grabbing}.connection-indicator[data-v-fe25ebc0]{position:absolute;top:1.25rem;left:50%;z-index:150;display:flex;--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));align-items:center;gap:.75rem;border-radius:var(--radius);--tw-bg-opacity: 1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1));padding:.75rem 1.25rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.btn[data-v-fe25ebc0]{cursor:pointer;border-radius:calc(var(--radius) - 2px);border-width:1px;border-color:hsl(var(--border));background-color:hsl(var(--background));padding:.5rem 1.25rem;font-size:.875rem;line-height:1.25rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.btn[data-v-fe25ebc0]:hover{background-color:hsl(var(--muted))}.btn.small[data-v-fe25ebc0]{padding:.25rem .75rem;font-size:.75rem;line-height:1rem}[data-v-fe25ebc0] .node rect{fill:var(--node-background);stroke-width:var(--node-border-width);rx:var(--node-border-radius);ry:var(--node-border-radius);transition:all .3s ease}[data-v-fe25ebc0] .node.selected rect{stroke-width:var(--node-selected-border-width);filter:drop-shadow(var(--node-selected-shadow))}[data-v-fe25ebc0] .node:hover rect{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}[data-v-fe25ebc0] .node-title{fill:hsl(var(--foreground));font-size:.875rem;line-height:1.25rem;font-weight:600}[data-v-fe25ebc0] .node[data-level="1"] .node-title{font-size:1.125rem;line-height:1.75rem;font-weight:700}[data-v-fe25ebc0] .node[data-level="2"] .node-title{font-size:1rem;line-height:1.5rem;font-weight:600}[data-v-fe25ebc0] .node[data-level="3"] .node-title{font-size:15px;font-weight:600}[data-v-fe25ebc0] .node[data-level="4"] .node-title{font-size:.875rem;line-height:1.25rem;font-weight:500}[data-v-fe25ebc0] .node[data-level="5"] .node-title{font-size:13px;font-weight:500}[data-v-fe25ebc0] .node[data-level="6"] .node-title{font-size:.75rem;line-height:1rem;font-weight:500}[data-v-fe25ebc0] .node-snippet{fill:hsl(var(--muted-foreground));font-size:.75rem;line-height:1rem;opacity:.8}[data-v-fe25ebc0] .node-type-icon{font-size:1rem;line-height:1.5rem}[data-v-fe25ebc0] .link{fill:none;stroke:hsl(var(--muted-foreground));stroke-width:2px;opacity:.4}[data-v-fe25ebc0] .node{cursor:pointer}[data-v-fe25ebc0] .node.dragging{cursor:grabbing;opacity:.7;z-index:1000}[data-v-fe25ebc0] .node.dragging rect{filter:drop-shadow(0 4px 12px rgba(0,0,0,.25))}[data-v-fe25ebc0] .drop-indicator,[data-v-fe25ebc0] .node.dragging .node-content{pointer-events:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root{--background: 0 0% 100%;--foreground: 222.2 84% 4.9%;--card: 0 0% 100%;--card-foreground: 222.2 84% 4.9%;--popover: 0 0% 100%;--popover-foreground: 222.2 84% 4.9%;--primary: 204 64% 44%;--primary-foreground: 210 40% 98%;--secondary: 210 40% 96.1%;--secondary-foreground: 222.2 47.4% 11.2%;--muted: 210 40% 96.1%;--muted-foreground: 215.4 16.3% 46.9%;--accent: 210 40% 96.1%;--accent-foreground: 222.2 47.4% 11.2%;--destructive: 0 84.2% 60.2%;--destructive-foreground: 210 40% 98%;--border: 214.3 31.8% 91.4%;--input: 214.3 31.8% 91.4%;--ring: 222.2 84% 4.9%;--radius: .5rem;--color-background: #ffffff;--color-text: #333333;--color-border: #e0e0e0;--color-primary: #3498db;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif}.container{width:100%;margin-right:auto;margin-left:auto;padding-right:2rem;padding-left:2rem}@media (min-width: 1400px){.container{max-width:1400px}}.visible{visibility:visible}.collapse{visibility:collapse}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-0{bottom:0}.bottom-5{bottom:1.25rem}.left-0{left:0}.left-1\/2{left:50%}.left-3{left:.75rem}.left-5{left:1.25rem}.right-0{right:0}.top-0{top:0}.top-3{top:.75rem}.top-5{top:1.25rem}.z-10{z-index:10}.z-50{z-index:50}.z-\[100\]{z-index:100}.z-\[150\]{z-index:150}.z-\[200\]{z-index:200}.z-\[300\]{z-index:300}.z-\[500\]{z-index:500}.mx-0{margin-left:0;margin-right:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-6{margin-bottom:1.5rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-96{max-height:24rem}.max-h-\[200px\]{max-height:200px}.max-h-\[60vh\]{max-height:60vh}.min-h-\[400px\]{min-height:400px}.min-h-\[80px\]{min-height:80px}.w-10{width:2.5rem}.w-24{width:6rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-8{width:2rem}.w-80{width:20rem}.w-full{width:100%}.w-px{width:1px}.min-w-\[200px\]{min-width:200px}.min-w-\[80px\]{min-width:80px}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-\[250px\]{max-width:250px}.max-w-\[300px\]{max-width:300px}.max-w-\[600px\]{max-width:600px}.max-w-\[680px\]{max-width:680px}.max-w-md{max-width:28rem}.max-w-none{max-width:none}.flex-1{flex:1 1 0%}.border-collapse{border-collapse:collapse}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.resize{resize:both}.list-disc{list-style-type:disc}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:var(--radius)}.rounded-md{border-radius:calc(var(--radius) - 2px)}.rounded-none{border-radius:0}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-t{border-top-width:1px}.border-none{border-style:none}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-border{border-color:hsl(var(--border))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-input{border-color:hsl(var(--input))}.bg-amber-500{--tw-bg-opacity: 1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.bg-background{background-color:hsl(var(--background))}.bg-background\/50{background-color:hsl(var(--background) / .5)}.bg-black\/50{background-color:#00000080}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-border{background-color:hsl(var(--border))}.bg-card{background-color:hsl(var(--card))}.bg-destructive{background-color:hsl(var(--destructive))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-muted{background-color:hsl(var(--muted))}.bg-muted\/30{background-color:hsl(var(--muted) / .3)}.bg-primary{background-color:hsl(var(--primary))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-secondary{background-color:hsl(var(--secondary))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.fill-muted-foreground{fill:hsl(var(--muted-foreground))}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0{padding-top:0;padding-bottom:0}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-20{padding-bottom:5rem}.pb-6{padding-bottom:1.5rem}.pl-2{padding-left:.5rem}.pr-3{padding-right:.75rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.pt-\[73px\]{padding-top:73px}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-\[13px\]{font-size:13px}.text-\[15px\]{font-size:15px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity, 1))}.text-card-foreground{color:hsl(var(--card-foreground))}.text-destructive{color:hsl(var(--destructive))}.text-destructive-foreground{color:hsl(var(--destructive-foreground))}.text-foreground{color:hsl(var(--foreground))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-muted-foreground{color:hsl(var(--muted-foreground))}.text-muted-foreground\/50{color:hsl(var(--muted-foreground) / .5)}.text-primary{color:hsl(var(--primary))}.text-primary-foreground{color:hsl(var(--primary-foreground))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-secondary-foreground{color:hsl(var(--secondary-foreground))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-100{opacity:1}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-2{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-slate-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(148 163 184 / var(--tw-ring-opacity, 1))}.ring-offset-2{--tw-ring-offset-width: 2px}.ring-offset-background{--tw-ring-offset-color: hsl(var(--background))}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow{--tw-drop-shadow: drop-shadow(0 1px 2px rgb(0 0 0 / .1)) drop-shadow(0 1px 1px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}body{margin:0;font-family:var(--font-family);background:hsl(var(--background));color:hsl(var(--foreground))}#app{width:100vw;height:100vh}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-transparent::file-selector-button{background-color:transparent}.file\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\:font-medium::file-selector-button{font-weight:500}.placeholder\:text-muted-foreground::-moz-placeholder{color:hsl(var(--muted-foreground))}.placeholder\:text-muted-foreground::placeholder{color:hsl(var(--muted-foreground))}.placeholder\:text-muted-foreground\/50::-moz-placeholder{color:hsl(var(--muted-foreground) / .5)}.placeholder\:text-muted-foreground\/50::placeholder{color:hsl(var(--muted-foreground) / .5)}.hover\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-gray-400:hover{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity, 1))}.hover\:bg-accent:hover{background-color:hsl(var(--accent))}.hover\:bg-amber-50:hover{--tw-bg-opacity: 1;background-color:rgb(255 251 235 / var(--tw-bg-opacity, 1))}.hover\:bg-destructive\/90:hover{background-color:hsl(var(--destructive) / .9)}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-muted:hover{background-color:hsl(var(--muted))}.hover\:bg-primary\/90:hover{background-color:hsl(var(--primary) / .9)}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600:hover{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:bg-secondary\/80:hover{background-color:hsl(var(--secondary) / .8)}.hover\:text-accent-foreground:hover{color:hsl(var(--accent-foreground))}.hover\:text-destructive:hover{color:hsl(var(--destructive))}.hover\:text-gray-800:hover{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.focus\:border-blue-500:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-ring:focus{--tw-ring-color: hsl(var(--ring))}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-ring:focus-visible{--tw-ring-color: hsl(var(--ring))}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.disabled\:pointer-events-none:disabled{pointer-events:none}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\:opacity-100{opacity:1}@media (min-width: 640px){.sm\:w-\[15\%\]{width:15%}}@media (min-width: 768px){.md\:w-\[25\%\]{width:25%}}@media (min-width: 1024px){.lg\:w-\[35\%\]{width:35%}}@media (min-width: 1280px){.xl\:w-\[35\%\]{width:35%}}.material-icons{font-family:Material Icons;font-weight:400;font-style:normal;display:inline-flex;align-items:center;justify-content:center;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga";vertical-align:middle}.material-icons.text-base{font-size:16px}.material-icons.text-lg{font-size:18px}.material-icons.text-xl{font-size:20px}:root{--node-color-1: #ef4444;--node-color-2: #f97316;--node-color-3: #eab308;--node-color-4: #22c55e;--node-color-5: #06b6d4;--node-color-6: #3b82f6;--node-color-7: #8b5cf6;--node-color-8: #ec4899;--node-default-color: #94a3b8;--node-border-radius: 6px;--node-border-width: 2px;--node-background: #ffffff;--node-text-color: #1e293b;--node-selected-border-width: 4px;--node-selected-shadow: 0 4px 12px rgba(0, 0, 0, .15)}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
